<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>px-red-certmgr: README.md Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">px-red-certmgr
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('da/ddd/README_8md.html','../../');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">README.md</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../da/ddd/README_8md.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor"># px-red-certmgr information</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;This is a repository <span class="keywordflow">for</span> certificate management module which helps to generate and store X509 v3 format certificates <span class="keywordflow">for each</span> service in a device with asymmetric RSA keys/elliptical curve keys.</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;This repository contains the code <span class="keywordflow">for</span> the certificate manager daemon and library, and also of certcmd a command line tools based on the library.</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;This is a C++ project: Files are named with cpp or hpp extension.</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;## Structure of <span class="keyword">this</span> repository</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;Here is the <a class="code" href="../../d9/d42/certcmd_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a> structure of the project.</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;| Folder                                        | Description |</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;| --------------------------------------------- | ----------- |</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;| ├── certcmd                                   | Command line tool which can communicate with a running certmanagd daemon via libcertmgr <span class="keyword">interface </span>|</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;| ├── certmgr                                   | <a class="code" href="../../db/d1e/namespacecertmanagerApi.html#ad8a262d552b700f98fca9757ea797b46">Certificate</a> manager sources |</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;| │   ├── certmanagd                            | Daemon sources which are in charge of generation, storage and management of certificates |</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;| │   ├── common                                | Common sources used by the daemon and library |</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;| │   └── libcertmgr                            | Library sources providing interfacing apis to communicate with certmanagd and certcmd |</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;| ├── docs                                      | Doxygen documentation |</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;| ├── COPYING                                   | License of the certificate manager daemon |</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;| ├── CMakeLists.txt                            | Top level cmake file to build the project |</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;| ├── Reference-Files                           | Reference directory containing the various sample configuration files required for device certificate manager functionality |</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;| └── README.md                                 | A readme file for the px-red-certmgr repository information |</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;## Structure of certmanagd source folder</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;| Folder                                        | Description |</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;| --------------------------------------------- | ----------- |</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;| ├── CMakeLists.txt                            | Cmake file to build the binary |</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;| ├── docs                                      | Doxygen documentation |</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;| ├── export                                    | Header files which need to be exported for certmanagd daemon application |</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;| ├── inc                                       | Header files included for certmanagd daemon |</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;| ├── scripts                                   | Script file which needs to be installed on the target for network configuration |</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;| └── src                                       | Source files included for certmanagd daemon | </div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;|     ├── BinaryServiceCallbacks.cpp            | Representation of callbacks functions for certificate management daemon |</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;|     ├── CertificateAuthority.cpp              | CA representation for certificate management daemon |</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;|     ├── CertificateInfoStorage.cpp            | Representation of certificate information in read &amp; write format |</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;|     ├── certmanagd.cpp                        | Tools <span class="keywordflow">for</span> certificate management |</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;|     ├── CnfConfiguration.cpp                  | Representation of the conf configuration <span class="keywordflow">for</span> a service <span class="keywordflow">for</span> certificate management |</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;|     ├── CnfFileConfiguration.cpp              | Representation of the cnf file configuration <span class="keywordflow">for</span> a service <span class="keywordflow">for</span> certificate management |</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;|     ├── CnfHookConfiguration.cpp              | Representation of the cnfhook file configuration <span class="keywordflow">for</span> a service <span class="keywordflow">for</span> certificate management |</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;|     ├── Common.cpp                            | This file is used to provide common APIs to be used by certmanagd files |</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;|     ├── ExternalCertificateStorage.cpp        | Representation of storage <span class="keywordflow">for</span> external certificates |</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;|     ├── LibraryWrapperServiceCallbacks.cpp    | Wrapper of callbacks functions <span class="keywordflow">for</span> certificate management daemon coming from external library |</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;|     ├── Log.cpp                               | Function to log the activity inside daemon <span class="keyword">using</span> syslog |</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;|     ├── NetworkConfiguration.cpp              | Representation of the configuration of the network <span class="keywordflow">for</span> certificate management |</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;|     ├── NetworkInfo.cpp                       | Representation of the network information <span class="keywordflow">for</span> a certificate |</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;|     ├── Openssl.cpp                           | This contains a wrapper <span class="keyword">class </span>that defines and maintains a BIO openssl object |</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;|     ├── Server.cpp                            | Server representation for certificate management |</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;|     ├── Service.cpp                           | Representation of a service for certificate management |</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;|     └── TrustedCertificate.cpp                | Trusted <a class="code" href="../../d8/d1f/namespacecertmanager.html#a0f8812216d236124499a79dbcff3db02a8244c26e585a457ad62fab28018790fd">client</a> representation for certificate management daemon | </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;## Structure of common source folder</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;| Folder                                        | Description |</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;| --------------------------------------------- | ----------- |</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;| ├── export                                    | Common header files which need to be exported for daemon and library applications |</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;| ├── inc                                       | Common header files included for both daemon and library  |</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;| └── src                                       | Common source files included for both daemon and library | </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;|     ├── certificate.cpp                       | Representation of all certificate parameters |</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;|     ├── CertificateIdCnMap.cpp                | Representation of certificate Ids and common name base on c++ std::map |</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;|     ├── CertificateIdList.cpp                 | Representation of certificate Ids base on c++ std::set |</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;|     ├── CertificateInfo.cpp                   | Representation of certificate information in read only |</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;|     ├── Commands.cpp                          | Class for commands and function to parse and create commands |</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;|     ├── DaemonConfiguration.cpp               | Representation of the configuration for the Daemon certificate management |</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;|     ├── ExternalCertificateAccessor.cpp       | External <a class="code" href="../../db/d1e/namespacecertmanagerApi.html#ad8a262d552b700f98fca9757ea797b46">Certificate</a> files accessor which <a class="code" href="../../d8/d1f/namespacecertmanager.html#a4fc725d063923830f5fcd8a7c4813713ab6a98a05294b9891e462e38a1bad9b72">help</a> to get the <a class="code" href="../../d8/d1f/namespacecertmanager.html#a4fc725d063923830f5fcd8a7c4813713a54910693a807f4dcf8a0d65ce924cd6b">path</a> of an external certificate and its related files |</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;|     ├── InternalCertificatesAccessor.cpp      | Internal <a class="code" href="../../db/d1e/namespacecertmanagerApi.html#ad8a262d552b700f98fca9757ea797b46">Certificate</a> files accessor which <a class="code" href="../../d8/d1f/namespacecertmanager.html#a4fc725d063923830f5fcd8a7c4813713ab6a98a05294b9891e462e38a1bad9b72">help</a> to get the <a class="code" href="../../d8/d1f/namespacecertmanager.html#a4fc725d063923830f5fcd8a7c4813713a54910693a807f4dcf8a0d65ce924cd6b">path</a> of an internal certificate and its related files |</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;|     ├── ServiceConfiguration.cpp              | Representation of the configuration for a service for certificate management |</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;|     └── Tools.cpp                             | Tools for certificate management | </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">## Structure of libcertmgr source folder</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;| Folder                                        | Description |</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;| --------------------------------------------- | ----------- |</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;| ├── CMakeLists.txt                            | Cmake file to build the library |</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;| ├── docs                                      | Doxygen documentation |</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;| ├── export                                    | Header files which need to be exported for certificate manager library application |</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;| └── src                                       | Source files included for certificate manager library | </div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;|     ├── CertmanagerApi.cpp                    | Implementation of c++ Api for certificate manager |</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;|     ├── CertmanagerApiException.cpp           | Implementation of certificate manager API exceptions |</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;|     └── OverwrittenData.cpp                   | Accessor for data which can be overwritten by the user for each certificate | </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="preprocessor">## Build Dependencies</span></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;This repository build depends on the following modules:</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  * `px-red-utils` - repository to store common libraries and utility files used in various sub modules/ components of the toolkit.</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  * `Third party components` - cxxtoold, openssl, syslog, thread, librt</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="preprocessor">## How to use this repository</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;There are two ways to use this repository:</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;  * Using the &#39;px-red-certmgr&#39; standalone without the `px-toolkit` module in any application: </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    * To use independently, the user need to clone the other dependent repo `px-red-utils` and <a class="code" href="../../d8/d1f/namespacecertmanager.html#a4fc725d063923830f5fcd8a7c4813713a4e8b58e9836fc48fd970cb27b7dd16f4">add</a> various third party vendor modules</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    </div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  * Using the &#39;px-red-certmgr&#39; as a component of `px-toolkit`</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    * This repository needs to be cloned at `https:<span class="comment">//bitbucket-prod.tcc.etn.com/projects/LNXTK/repos/px-toolkit/browse/etn_source/certmgr/v2` level. </span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    * If you perform `git submodule update --init --recursive` operation from px-toolkit level, then `px-red-certmgr` will get cloned. </div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    * To ensure that the certificate manager gets build, please make sure that you have enabled the support for PX-Red&#39;s certificate manager module in the configuration file at px-toolkit level.</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="preprocessor">## Configuring your builds</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;The build options are provided by the following &quot;<a class="code" href="../../d8/d1f/namespacecertmanager.html#a0f8812216d236124499a79dbcff3db02a8f9d5d363bf5d2cc63021c8d58bd6608">config</a>&quot; files:</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  * `https:<span class="comment">//bitbucket-prod.tcc.etn.com/projects/LNXTK/repos/px-toolkit/browse/etn_source/shared/shared_make/config` - contains default Toolkit package choices.</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  * `https:<span class="comment">//bitbucket-prod.tcc.etn.com/projects/LNXTK/repos/px-toolkit/browse/etn_source/shared/shared_make/depend` - Sets some Toolkit configuration dependencies, based on the configuration choices made.</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="preprocessor"># Configuring the certificate manager</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;The certificate manager use a configuration file (by default /etc/certmanagd/config.daemon).</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;Then for each service, the certificate manager need a service configuration file.</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;This includes the service cnfhook files for service <a class="code" href="../../d8/d1f/namespacecertmanager.html#a0f8812216d236124499a79dbcff3db02a0ca94a5d1ba705c746460108752453d0">server</a> certificate attibutes and configuration options.</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;You can find a example of those file and more in the Reference-Files folder.</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="preprocessor">## Creating init script</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;The init script file for certmanagd is responsible for configuring and starting the daemon process and all other operations to be performed on daemon ( like start, stop, status, reload, restart ).</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;Please refer https:<span class="comment">//bitbucket-prod.tcc.etn.com/projects/LNXTK/repos/px-toolkit/browse/etn_source/certmgr/v2/rootfs/etc/init.d/certmanagd file for reference for creating init script.</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="preprocessor">## Configuring daemon configuration file</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;This is a configuration file for the certmanagd with the directory paths for IPC files, certificate storage paths and user groups specified.</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;Please refer https:<span class="comment">//bitbucket-prod.tcc.etn.com/projects/LNXTK/repos/px-toolkit/browse/etn_source/certmgr/v2/rootfs/etc/certmanager/config.daemon file for reference for configuring daemon configuration file.</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="preprocessor">## Users and groups added for device certificate</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<a class="code" href="../../d8/d1f/namespacecertmanager.html#a7844c393e4170830ae38f18ed77a6a7f">User</a> is the daemonUser specified in <a class="code" href="../../d8/d1f/namespacecertmanager.html#a0f8812216d236124499a79dbcff3db02a8f9d5d363bf5d2cc63021c8d58bd6608">config</a>.daemon file that will run the daemon.</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;While creating a new user, we should make sure to assign groups to that user so that it can use a particular service.</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;By default, the &quot;admin&quot; user is added to groups for all the <a class="code" href="../../d3/d3b/certmanagd_8cpp.html#a9c397f715ce393010dfcfaf8d63032ba">services</a> (PKI and HTTPS by default).</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;Please check the https:<span class="comment">//bitbucket-prod.tcc.etn.com/projects/LNXTK/repos/px-toolkit/browse/rootfs/skeleton/etc/group file for reference on creating groups for services and certificate manager daemon.</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;Group is the <a class="code" href="../../d8/d1f/namespacecertmanager.html#a4fc725d063923830f5fcd8a7c4813713a7d90bc1d933c4ae0469fdb87c17490c6">list</a> of users who can access the <a class="code" href="../../d3/d3b/certmanagd_8cpp.html#a9c397f715ce393010dfcfaf8d63032ba">services</a> assigned to them.</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="preprocessor">## Creating service conf files</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;A conf file is a sample file that helps to define configuration information about a standard service.</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;These files hold the callback script <a class="code" href="../../d8/d1f/namespacecertmanager.html#a4fc725d063923830f5fcd8a7c4813713a54910693a807f4dcf8a0d65ce924cd6b">path</a>, conf file <a class="code" href="../../d8/d1f/namespacecertmanager.html#a4fc725d063923830f5fcd8a7c4813713a54910693a807f4dcf8a0d65ce924cd6b">path</a>, certificate generation and target configurations, openssl engine option, network interface information(s) to be added in the certificate and allowed target(s) among CA, <a class="code" href="../../d8/d1f/namespacecertmanager.html#a0f8812216d236124499a79dbcff3db02a0ca94a5d1ba705c746460108752453d0">server</a> and trusted <a class="code" href="../../d8/d1f/namespacecertmanager.html#a0f8812216d236124499a79dbcff3db02a8244c26e585a457ad62fab28018790fd">client</a>.</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  * PKI (Public Key Infrastructure) service:</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    This service can act as a master service to provide signed certificates to other <a class="code" href="../../d3/d3b/certmanagd_8cpp.html#a9c397f715ce393010dfcfaf8d63032ba">services</a> of the device.</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    This service is by default configured to generate self-signed certificates which act as master certificate.</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;  * HTTPS service:</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    In this case, by default, this service will get its <a class="code" href="../../d8/d1f/namespacecertmanager.html#a0f8812216d236124499a79dbcff3db02a0ca94a5d1ba705c746460108752453d0">server</a> certificate signed by the pki1 service.</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;Please refer https:<span class="comment">//bitbucket-prod.tcc.etn.com/projects/LNXTK/repos/px-toolkit/browse/etn_source/mercury_server/rootfs/etc/certmanager/services/https.conf file for reference on creating service conf files.</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="preprocessor">## Creating service cnfhook files</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;Cnfhook file is a sample file that describes the service <a class="code" href="../../d8/d1f/namespacecertmanager.html#a0f8812216d236124499a79dbcff3db02a0ca94a5d1ba705c746460108752453d0">server</a> certificate attibutes and configuration options.</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;These files hold the configuration key (RSA2048, SECP256K1, SECP384R1, SECP521R1, PRIME256V1), size of keys (default: 2048), algorithm to use (sha256), extensions to <a class="code" href="../../d8/d1f/namespacecertmanager.html#a4fc725d063923830f5fcd8a7c4813713a4e8b58e9836fc48fd970cb27b7dd16f4">add</a> to a certificate request, common name, email address for who to contact (CA), Country, State, City, Organization Names and units.</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;Please refer https:<span class="comment">//bitbucket-prod.tcc.etn.com/projects/LNXTK/repos/px-toolkit/browse/etn_source/mercury_server/rootfs/usr/share/certmanager/cnfhook-https.hook file for reference on creating service cnfhook files.</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="preprocessor">## Creating callback scripts</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;This is a sample file that describes how to handle different system operations, when a operation happens in service certificates.</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;These files hold the actions to be performed on service certificates in case of any operations or events in the system.</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;Please refer https:<span class="comment">//bitbucket-prod.tcc.etn.com/projects/LNXTK/repos/px-toolkit/browse/etn_source/mercury_server/rootfs/usr/share/certmanager/callback-https.sh for reference on creating service callback scripts</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="preprocessor">## Daemon notification about network change</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  * In case of any change in the network, the daemon is notified and a <a class="code" href="../../d8/d1f/namespacecertmanager.html#a4fc725d063923830f5fcd8a7c4813713a839b0ff14e416f30b5a0634267dbdc28">reload</a> operation occurs for all the <a class="code" href="../../d3/d3b/certmanagd_8cpp.html#a9c397f715ce393010dfcfaf8d63032ba">services</a>.</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  * Each service checks whether the certificate needs to be renewed with updated network information.</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  * E.g., if the <a class="code" href="../../d8/d1f/namespacecertmanager.html#aadbdab2313709d34c474536c433b30cb">IP</a> address of a network interface gets changed, then https certificate will be regenerated as it depends on all N/W interfaces whereas PKI1 will not get renewed.</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="preprocessor">## Daemon notification about time change</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  * In case of time change detected, the certmanagd gets notified and the existing certificates are checked for validity.</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  * At first, the daemon will go through all the PKI <a class="code" href="../../d3/d3b/certmanagd_8cpp.html#a9c397f715ce393010dfcfaf8d63032ba">services</a> (service name starts with PKI) and will check if any certificate is not valid anymore either due to start date or expiry date.</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;  * Then the daemon will regenerate a new certificate for that service. Same will be done for all other <a class="code" href="../../d3/d3b/certmanagd_8cpp.html#a9c397f715ce393010dfcfaf8d63032ba">services</a>.</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  * In addition to that, the CA/PKI <a class="code" href="../../d3/d3b/certmanagd_8cpp.html#a9c397f715ce393010dfcfaf8d63032ba">services</a> will also raise a time reloads notification for renewing their dependent service certificates as they are renewed.</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  * The device will have a ‘time-change-notifier’ which will be responsible for time change detection and intimation to the daemon.</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  * By default, it detects drift bigger than 1 seconds, on an interval of 2 seconds.</div>
<div class="ttc" id="certmanagd_8cpp_html_a9c397f715ce393010dfcfaf8d63032ba"><div class="ttname"><a href="../../d3/d3b/certmanagd_8cpp.html#a9c397f715ce393010dfcfaf8d63032ba">services</a></div><div class="ttdeci">std::vector&lt; service_ptr &gt; services</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3b/certmanagd_8cpp_source.html#l00053">certmanagd.cpp:53</a></div></div>
<div class="ttc" id="namespacecertmanager_html_a4fc725d063923830f5fcd8a7c4813713a7d90bc1d933c4ae0469fdb87c17490c6"><div class="ttname"><a href="../../d8/d1f/namespacecertmanager.html#a4fc725d063923830f5fcd8a7c4813713a7d90bc1d933c4ae0469fdb87c17490c6">certmanager::list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4b/Commands_8hpp_source.html#l00048">Commands.hpp:48</a></div></div>
<div class="ttc" id="certcmd_8cpp_html_a3c04138a5bfe5d72780bb7e82a18e627"><div class="ttname"><a href="../../d9/d42/certcmd_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a></div><div class="ttdeci">int main(int argc, char **argv)</div><div class="ttdoc">The certcmd program entry point, main(). </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d42/certcmd_8cpp_source.html#l00079">certcmd.cpp:79</a></div></div>
<div class="ttc" id="namespacecertmanager_html_a7844c393e4170830ae38f18ed77a6a7f"><div class="ttname"><a href="../../d8/d1f/namespacecertmanager.html#a7844c393e4170830ae38f18ed77a6a7f">certmanager::User</a></div><div class="ttdeci">std::string User</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db9/ServiceCallbacks_8hpp_source.html#l00029">ServiceCallbacks.hpp:29</a></div></div>
<div class="ttc" id="namespacecertmanager_html_a0f8812216d236124499a79dbcff3db02a8244c26e585a457ad62fab28018790fd"><div class="ttname"><a href="../../d8/d1f/namespacecertmanager.html#a0f8812216d236124499a79dbcff3db02a8244c26e585a457ad62fab28018790fd">certmanager::client</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4b/Commands_8hpp_source.html#l00026">Commands.hpp:26</a></div></div>
<div class="ttc" id="namespacecertmanager_html_a4fc725d063923830f5fcd8a7c4813713a54910693a807f4dcf8a0d65ce924cd6b"><div class="ttname"><a href="../../d8/d1f/namespacecertmanager.html#a4fc725d063923830f5fcd8a7c4813713a54910693a807f4dcf8a0d65ce924cd6b">certmanager::path</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4b/Commands_8hpp_source.html#l00052">Commands.hpp:52</a></div></div>
<div class="ttc" id="namespacecertmanager_html_aadbdab2313709d34c474536c433b30cb"><div class="ttname"><a href="../../d8/d1f/namespacecertmanager.html#aadbdab2313709d34c474536c433b30cb">certmanager::IP</a></div><div class="ttdeci">std::string IP</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/db9/ServiceCallbacks_8hpp_source.html#l00026">ServiceCallbacks.hpp:26</a></div></div>
<div class="ttc" id="namespacecertmanager_html_a4fc725d063923830f5fcd8a7c4813713a839b0ff14e416f30b5a0634267dbdc28"><div class="ttname"><a href="../../d8/d1f/namespacecertmanager.html#a4fc725d063923830f5fcd8a7c4813713a839b0ff14e416f30b5a0634267dbdc28">certmanager::reload</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4b/Commands_8hpp_source.html#l00041">Commands.hpp:41</a></div></div>
<div class="ttc" id="namespacecertmanager_html_a0f8812216d236124499a79dbcff3db02a0ca94a5d1ba705c746460108752453d0"><div class="ttname"><a href="../../d8/d1f/namespacecertmanager.html#a0f8812216d236124499a79dbcff3db02a0ca94a5d1ba705c746460108752453d0">certmanager::server</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4b/Commands_8hpp_source.html#l00026">Commands.hpp:26</a></div></div>
<div class="ttc" id="namespacecertmanagerApi_html_ad8a262d552b700f98fca9757ea797b46"><div class="ttname"><a href="../../db/d1e/namespacecertmanagerApi.html#ad8a262d552b700f98fca9757ea797b46">certmanagerApi::Certificate</a></div><div class="ttdeci">std::string Certificate</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df8/TypesApi_8hpp_source.html#l00029">TypesApi.hpp:29</a></div></div>
<div class="ttc" id="namespacecertmanager_html_a0f8812216d236124499a79dbcff3db02a8f9d5d363bf5d2cc63021c8d58bd6608"><div class="ttname"><a href="../../d8/d1f/namespacecertmanager.html#a0f8812216d236124499a79dbcff3db02a8f9d5d363bf5d2cc63021c8d58bd6608">certmanager::config</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4b/Commands_8hpp_source.html#l00026">Commands.hpp:26</a></div></div>
<div class="ttc" id="namespacecertmanager_html_a4fc725d063923830f5fcd8a7c4813713ab6a98a05294b9891e462e38a1bad9b72"><div class="ttname"><a href="../../d8/d1f/namespacecertmanager.html#a4fc725d063923830f5fcd8a7c4813713ab6a98a05294b9891e462e38a1bad9b72">certmanager::help</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4b/Commands_8hpp_source.html#l00042">Commands.hpp:42</a></div></div>
<div class="ttc" id="namespacecertmanager_html_a4fc725d063923830f5fcd8a7c4813713a4e8b58e9836fc48fd970cb27b7dd16f4"><div class="ttname"><a href="../../d8/d1f/namespacecertmanager.html#a4fc725d063923830f5fcd8a7c4813713a4e8b58e9836fc48fd970cb27b7dd16f4">certmanager::add</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d4b/Commands_8hpp_source.html#l00049">Commands.hpp:49</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../da/ddd/README_8md.html">README.md</a></li>
    <li class="footer">Generated on Fri May 7 2021 20:24:54 for px-red-certmgr by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
