<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>mqtt_broker_conf: MQTT Broker Out-of-Band (OOB) Objects</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">mqtt_broker_conf
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('de/dca/md__src_product-ref1_px-toolkit_etn_source_mqtt_broker_conf_mqtt_broker_oobs.html','../../');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">MQTT Broker Out-of-Band (OOB) Objects </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The Mosquitto MQTT Broker is supported by three OOB objects:</p>
<ul>
<li><b>MqttBrokerSettings</b></li>
<li><b>ACCESS_CTRL/MQTT</b></li>
<li><b>ACCESS_CTRL/MQTTS</b></li>
</ul>
<p>The MqttBrokerSettings OOB is configured using the <code>mqtt_broker_conf</code> program. See <a href="../.././mqtt_broker_conf.md">mqtt_broker_conf.md</a> for more information about this program.</p>
<h2>MqttBrokerSettings OOB</h2>
<p>The MQTT Broker requires a mosquitto.conf file to control its operation. The purpose of the MqttBrokerSettings OOB is to define that input, allowing the UI to change the settings in that OOB. The mqtt_broker_conf program is run before starting the Mosquitto mqtt_broker (in <a href="../.././rootfs/etc/init.d/mqtt_broker">its initialization script</a>), and this program parses this OOB and uses the contents to generate the appropriate mosquitto.conf output.</p>
<p>The configuration options for mosquitto.conf are very extensive, so rather than create an extensive custom protobuf definition for the MqttBrokerSettings OOB, the design is to use repeated GenericConfigFileEntry entries, as defined in <a href="../../../libpx/tk_proto/hg/GenericTableEntry.proto">GenericTableEntry.proto</a>.</p>
<p>For the complete description of all the options, see the <a href="https://mosquitto.org/man/mosquitto-conf-5.html">mosquitto.conf man page</a> and <a href="https://mosquitto.org/man/mosquitto-tls-7.html">its TLS configuration</a>.</p>
<p>For a fuller discussion of configuring TLS options for MQTT for Eaton products, see the Confluence page on <a href="https://confluence-prod.tcc.etn.com/display/LNXTK/Securing+MQTT+Broker+with+TLS">Securing MQTT Broker with TLS</a>.</p>
<p>The sections below describe how the GenericConfigFileEntry fields are used to support configuration of the mosquitto.conf file.</p>
<h3>Fields for the Configuration file</h3>
<p>The fields described here configure one entry in the mosquitto.conf, either as <code>&lt;key_label&gt; [key_options] &lt;value&gt;</code> or else <code>&lt;key_label&gt; &lt;complex_text&gt;</code>.</p>
<h4>key_label</h4>
<p>The (usually unique) label that can be used to identify this configuration element or entry. Used as the key in a configuration file, though some configuration items may have multiple entries. Also serves as the "name" for this entry. Required.</p>
<h4>key_options</h4>
<p>Not used.</p>
<h4>value</h4>
<p>The chosen value for this table entry, when it can be specified this way. May commonly be just kept as a string, even if it represents some numeric or boolean value to the system.</p>
<h4>complex_text</h4>
<p>Text for a complex entry, not conforming to the simple <code>&lt;value&gt;</code> style. The UI is responsible for managing this text correctly. An example is</p>
<h3>Fields for the Selection metadata</h3>
<p>The fields described here are used by the UI to offer appropriate choices to the user when choosing MQTT options.</p>
<h4>value_choices</h4>
<p>A semicolon-separated text listing of the choices for the "value" field, which can be displayed to the user, in the cases where there is a fixed set of choices (eg, "true;false").</p>
<h4>value_minimum and value_maximum</h4>
<p>The minimum and maximum permitted value for the "value" field, when it is a numeric type with a limited range.</p>
<h4>option_choices</h4>
<p>Not used.</p>
<h3>Fields for UI guidance or hints</h3>
<p>The fields described here are used by the UI widgets to organize the configuration options and present them appropriately, and offer some guidance to the user when configuring.</p>
<h4>tool_tip</h4>
<p>A short one-line description of this entry, suitable for display eg, as a UI tool-tip.</p>
<h4>description</h4>
<p>Longer, more descriptive explanation of this entry. Can provide guidance to the user when configuring.</p>
<h4>category</h4>
<p>A simple tag that can be used to group "like" entries in this table.</p>
<h4>rank</h4>
<p>A simple numeric ranking for this entry, which can be used by the UI to display it in the proper order with respect to the other entries in the table or category.</p>
<h4>display_hint</h4>
<p>Indicates if this entry should normally be displayed, or else if it is disabled or hidden by the UI.</p>
<h3>Fields for Developer guidance</h3>
<h4>comments</h4>
<p>Optional developer comments about this entry. May be useful to explain choices or dependencies. Not intended for UI display.</p>
<h3>Parial Example of MqttBrokerSettings OOB</h3>
<p>The following shows some representative entries in this OOB.</p>
<p>```json { "toolkitStruct": { "generic_config_table": [ { "key_label":"retry_interval", "value": { "uint32_val":20 }, "tool_tip":"Seconds to wait before resending a QoS message", "description": [ "Time in seconds to wait before resending an outgoing QoS=1 or ", "QoS=2 message." ], "category":"General Configuration", "rank":1, "display_hint":"DISPLAY_DISABLED" }, { "key_label":"address", "complex_text":"", "tool_tip":"The address(es) for a Bridge Connection", "description": [ "The address line may have multiple host address and ports specified. See ", "below in the round_robin description for more details on bridge behaviour if ", "multiple addresses are used.", "Eg, address &lt;host&gt;[:&lt;port&gt;] [&lt;host&gt;[:&lt;port&gt;]]" ], "category":"Bridge Connection", "rank":132, "display_hint":"DISPLAY_HIDDEN_DISABLED", "comments":"Set to DISPLAY_HIDDEN_DISABLED since this is a product-level choice." }, { "key_label":"bridge_protocol_version", "value": { "str_val":"mqttv31" }, "value_choices":"mqttv31;mqttv311", "tool_tip":"The version of the MQTT protocol to use for this bridge", "description": [ "Set the version of the MQTT protocol to use for this bridge. Can be one ", "of mqttv31 or mqttv311. Defaults to mqttv31." ], "category":"Bridge Options", "rank":141, "display_hint":"DISPLAY_HIDDEN_DISABLED", "comments":"Set to DISPLAY_HIDDEN_DISABLED since this is a product-level choice." }, { "key_label":"bridge_psk", "value": { "str_val":"" }, "tool_tip":"Pre-shared-key for Bridge Connection", "description": [ "A bridge can be configured to use PSK with the bridge_identity and ", "bridge_psk options. This pre-shared-key is in hexadecimal format with no \"0x"." ], "category":"Bridge Connection: PSK based SSL/TLS support", "rank":172, "display_hint":"DISPLAY_HIDDEN_DISABLED", "comments":"Set to DISPLAY_HIDDEN_DISABLED since this is a product-level choice." } ], "description":"Input for generating the mqtt_broker.conf file, showing the possible entries. This OOB is of type repeated GenericConfigFileEntry generic_config_table.", "label":"MQTT Broker Configuration" } } ```</p>
<h2>ACCESS_CTRL/MQTT OOB</h2>
<p>For the OOB that controls the firewall settings for the MQTT Broker, see <a href="../../../../documents/Network_OOB_Objects.md">the writeup for all ACCESS_CTRL OOBs</a></p>
<p>By default, the MQTT Broker is disabled, and the default port assignment is the standard MQTT port 1883.</p>
<h3>Example 'ACCESS_CTRL/MQTTS'</h3>
<p>```json { "toolkitStruct": { "access_ctrl": { "restricted":false, "disabled":true, "port":1883 }, "description":"Handles MQTT pub/sub requests, and access of MQTT data sources.", "label":"MQTT Broker" } } ```</p>
<h2>ACCESS_CTRL/MQTTS OOB</h2>
<p>For the OOB that controls the firewall settings for the Secure MQTT Broker, see <a href="../../../../documents/Network_OOB_Objects.md">the writeup for all ACCESS_CTRL OOBs</a></p>
<p>By default, the Secure MQTT Broker is disabled, and the default port assignment is the Secure MQTT port 8883.</p>
<h3>Example 'ACCESS_CTRL/MQTTS'</h3>
<p>```json { "toolkitStruct": { "access_ctrl": { "restricted":false, "disabled":true, "port":8883 }, "description":"Handles MQTT secure pub/sub requests, and access of secure MQTT data sources.", "label":"MQTT Broker Secure" } } </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri May 7 2021 20:26:15 for mqtt_broker_conf by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
