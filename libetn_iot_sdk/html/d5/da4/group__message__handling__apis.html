<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>libetn_iot_sdk: Message handling APIs</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libetn_iot_sdk
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d5/da4/group__message__handling__apis.html','../../');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Message handling APIs<div class="ingroups"><a class="el" href="../../d3/d15/group__eaton__iot__sdk__apis.html">Eaton IoT SDK APIs</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for Message handling APIs:</div>
<div class="dyncontent">
<center><table><tr><td><img src="../../d5/da4/group__message__handling__apis.png" border="0" alt="" usemap="#d5_2da4_2group____message____handling____apis"/>
<map name="d5_2da4_2group____message____handling____apis" id="d5_2da4_2group____message____handling____apis">
<area shape="rect" id="node2" href="../../d3/d15/group__eaton__iot__sdk__apis.html" title="Eaton IoT SDK APIs" alt="" coords="5,5,152,32"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/df1/structiot__data.html">iot_data</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure containing the data to be published for one message type (i.e.  <a href="../../dc/df1/structiot__data.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d32/structiot__command.html">iot_command</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure containing a command to be sent to the cloud (i.e.  <a href="../../d9/d32/structiot__command.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga3dfe3ae25533f7be0e6ccd18dbd2326a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/da4/group__message__handling__apis.html#ga3dfe3ae25533f7be0e6ccd18dbd2326a">iot_send</a> (<a class="el" href="../../db/d38/iot__device_8h.html#ab998a158fc458cb8f09b1928c8f3e7ac">IOT_DEVICE_HANDLE</a> deviceHandle, <a class="el" href="../../db/d38/iot__device_8h.html#a5d263c7df269f3d5678ce5cb348ec17b">IOT_DATA</a> *data, int *message_size)</td></tr>
<tr class="memdesc:ga3dfe3ae25533f7be0e6ccd18dbd2326a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends data to IoT Hub (i.e.  <a href="#ga3dfe3ae25533f7be0e6ccd18dbd2326a">More...</a><br/></td></tr>
<tr class="separator:ga3dfe3ae25533f7be0e6ccd18dbd2326a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf6c31012b13805b13765d8b4fe82f526"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/da4/group__message__handling__apis.html#gaf6c31012b13805b13765d8b4fe82f526">iot_sendCommand</a> (<a class="el" href="../../db/d38/iot__device_8h.html#ab998a158fc458cb8f09b1928c8f3e7ac">IOT_DEVICE_HANDLE</a> deviceHandle, const <a class="el" href="../../db/d38/iot__device_8h.html#ac218d65b187da224b6e15f6215351d8e">IOT_COMMAND</a> *command, int *message_size)</td></tr>
<tr class="memdesc:gaf6c31012b13805b13765d8b4fe82f526"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a command to IoT Hub (i.e.  <a href="#gaf6c31012b13805b13765d8b4fe82f526">More...</a><br/></td></tr>
<tr class="separator:gaf6c31012b13805b13765d8b4fe82f526"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6c02a1a3859f49453ecf83a12a503cdb"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/da4/group__message__handling__apis.html#ga6c02a1a3859f49453ecf83a12a503cdb">iot_sendCustomMessage</a> (<a class="el" href="../../db/d38/iot__device_8h.html#ab998a158fc458cb8f09b1928c8f3e7ac">IOT_DEVICE_HANDLE</a> deviceHandle, const char *payload, const char *properties[], size_t num_properties)</td></tr>
<tr class="memdesc:ga6c02a1a3859f49453ecf83a12a503cdb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a custom message to the IoT Hub (i.e., one created by the product).  <a href="#ga6c02a1a3859f49453ecf83a12a503cdb">More...</a><br/></td></tr>
<tr class="separator:ga6c02a1a3859f49453ecf83a12a503cdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa4f2b5d3bb5def4020d6b3e3f19003ec"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/da4/group__message__handling__apis.html#gaa4f2b5d3bb5def4020d6b3e3f19003ec">iot_updateDeviceCommandStatus</a> (<a class="el" href="../../db/d38/iot__device_8h.html#ab998a158fc458cb8f09b1928c8f3e7ac">IOT_DEVICE_HANDLE</a> deviceHandle, const char *commandID, const char *deviceUUID, const char *task, const <a class="el" href="../../db/d38/iot__device_8h.html#a9b2c08a2dbddb16c997e7ca82796555d">IOT_COMMAND_STATUS</a> status, const char *description, int *message_size)</td></tr>
<tr class="memdesc:gaa4f2b5d3bb5def4020d6b3e3f19003ec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a device command status update to IoT Hub.  <a href="#gaa4f2b5d3bb5def4020d6b3e3f19003ec">More...</a><br/></td></tr>
<tr class="separator:gaa4f2b5d3bb5def4020d6b3e3f19003ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab37cf27483eb40a83de29b7c2e63c5f6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/da4/group__message__handling__apis.html#gab37cf27483eb40a83de29b7c2e63c5f6">iot_set_enable_batching</a> (<a class="el" href="../../db/d38/iot__device_8h.html#ab998a158fc458cb8f09b1928c8f3e7ac">IOT_DEVICE_HANDLE</a> deviceHandle, bool enable, uint32_t doWorkIntervalSeconds)</td></tr>
<tr class="memdesc:gab37cf27483eb40a83de29b7c2e63c5f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Setter for the connection's wantBatching flag and doWorkIntervalSeconds value.  <a href="#gab37cf27483eb40a83de29b7c2e63c5f6">More...</a><br/></td></tr>
<tr class="separator:gab37cf27483eb40a83de29b7c2e63c5f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac18d69ba56c2b7b2a5aaf9b545898d9e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/da4/group__message__handling__apis.html#gac18d69ba56c2b7b2a5aaf9b545898d9e">iot_do_send_immediate</a> (<a class="el" href="../../db/d38/iot__device_8h.html#ab998a158fc458cb8f09b1928c8f3e7ac">IOT_DEVICE_HANDLE</a> deviceHandle)</td></tr>
<tr class="memdesc:gac18d69ba56c2b7b2a5aaf9b545898d9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the connection's sendImmediately flag to trigger publishing of all batched messages.  <a href="#gac18d69ba56c2b7b2a5aaf9b545898d9e">More...</a><br/></td></tr>
<tr class="separator:gac18d69ba56c2b7b2a5aaf9b545898d9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9c38874a7c24c72c45e82601c4e9f099"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/da4/group__message__handling__apis.html#ga9c38874a7c24c72c45e82601c4e9f099">iot_getCommandParameter</a> (const char *params, const char *tag, int *offset, int *length)</td></tr>
<tr class="memdesc:ga9c38874a7c24c72c45e82601c4e9f099"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve location and size of a device command parameter by name.  <a href="#ga9c38874a7c24c72c45e82601c4e9f099">More...</a><br/></td></tr>
<tr class="separator:ga9c38874a7c24c72c45e82601c4e9f099"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5dc7d4401ec6028418ccf4a14ecfcc11"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/da4/group__message__handling__apis.html#ga5dc7d4401ec6028418ccf4a14ecfcc11">iot_getCommandParameterToken</a> (const char *params, int index, int *offset, int *length)</td></tr>
<tr class="memdesc:ga5dc7d4401ec6028418ccf4a14ecfcc11"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve location and size of a device command parameter by token index.  <a href="#ga5dc7d4401ec6028418ccf4a14ecfcc11">More...</a><br/></td></tr>
<tr class="separator:ga5dc7d4401ec6028418ccf4a14ecfcc11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac218a5acf0f72e77d352bdb235d38cd4"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/da4/group__message__handling__apis.html#gac218a5acf0f72e77d352bdb235d38cd4">iot_getCommandParameterTokenCount</a> (const char *params, int *count)</td></tr>
<tr class="memdesc:gac218a5acf0f72e77d352bdb235d38cd4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the number of tokens in a device command parameter.  <a href="#gac218a5acf0f72e77d352bdb235d38cd4">More...</a><br/></td></tr>
<tr class="separator:gac218a5acf0f72e77d352bdb235d38cd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8e16b7dd16600a83e535fd0d10769e44"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/da4/group__message__handling__apis.html#ga8e16b7dd16600a83e535fd0d10769e44">iot_getJsonTokenCount</a> (const char *json, int len)</td></tr>
<tr class="memdesc:ga8e16b7dd16600a83e535fd0d10769e44"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the number of tokens in a json string.  <a href="#ga8e16b7dd16600a83e535fd0d10769e44">More...</a><br/></td></tr>
<tr class="separator:ga8e16b7dd16600a83e535fd0d10769e44"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>See <a class="el" href="../../d5/df1/md__src_product-ref1_px-toolkit_etn_source_libetn_iot_sdk_docs_iot_device_sdk.html#md_message_handling_apis">Message handling overview</a> </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga3dfe3ae25533f7be0e6ccd18dbd2326a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool iot_send </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d38/iot__device_8h.html#ab998a158fc458cb8f09b1928c8f3e7ac">IOT_DEVICE_HANDLE</a>&#160;</td>
          <td class="paramname"><em>deviceHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d38/iot__device_8h.html#a5d263c7df269f3d5678ce5cb348ec17b">IOT_DATA</a> *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>message_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends data to IoT Hub (i.e. </p>
<p>DeviceTree, DeviceRealtime, ChannelRealtime, Trends etc). This is a non-blocking call. On success, sets the messageId in the IOT_DATA structure.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">deviceHandle</td><td>A handle to the device connection. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">data</td><td>A list of one or more data entity values (refer to <a class="el" href="../../dc/df1/structiot__data.html" title="Structure containing the data to be published for one message type (i.e. ">iot_data</a>). Note: the caller is responsible for freeing the IOT_DATA structure. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">message_size</td><td>If a valid pointer, returns the size of the message that was sent, for I/O statistics or checking the size of the message that was sent. This is the serialized data size, not including the message "parameters" like "a" or "d". </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool True if data was successfully sent, else False. </dd></dl>

<p>Definition at line <a class="el" href="../../d3/d53/iot__device_8c_source.html#l00200">200</a> of file <a class="el" href="../../d3/d53/iot__device_8c_source.html">iot_device.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/da4/group__message__handling__apis_ga3dfe3ae25533f7be0e6ccd18dbd2326a_cgraph.png" border="0" usemap="#d5/da4/group__message__handling__apis_ga3dfe3ae25533f7be0e6ccd18dbd2326a_cgraph" alt=""/></div>
<map name="d5/da4/group__message__handling__apis_ga3dfe3ae25533f7be0e6ccd18dbd2326a_cgraph" id="d5/da4/group__message__handling__apis_ga3dfe3ae25533f7be0e6ccd18dbd2326a_cgraph">
<area shape="rect" id="node2" href="../../db/d38/iot__device_8h.html#a0403205a70b39d5e559730cc8c17ab86" title="Returns the IOT_DEVICE_CONNECTION associated with an IOT_DEVICE_HANDLE. " alt="" coords="190,301,306,328"/><area shape="rect" id="node3" href="../../db/d38/iot__device_8h.html#a1a01656d15dc77a04e64c9c07c88d3a3" title="Creates an IoT Hub message, either by allocating memory for it (PX Red) or choosing the next availabl..." alt="" coords="188,352,308,379"/><area shape="rect" id="node29" href="../../db/d38/iot__device_8h.html#a234e4f6f4306ed2dbd3484148faff785" title="Set Iot Hub message properties, such as message type and (optionally) parent device. " alt="" coords="165,469,331,496"/><area shape="rect" id="node32" href="../../db/d38/iot__device_8h.html#a22b51caecdf56b82c3674ece92a40e88" title="Callback routine to process confirmation (or failure) of an outbound message (sent Device&#45;to&#45;Cloud)..." alt="" coords="131,403,365,445"/><area shape="rect" id="node4" href="../../db/d38/iot__device_8h.html#ac1964130f48b78c48eb92afa5fc92736" title="For PXGreen, gets the next available message buffer. " alt="" coords="420,233,551,260"/><area shape="rect" id="node5" href="../../db/d38/iot__device_8h.html#a6f9d3843c2d1316092405fcc618e0bfe" title="serializeData" alt="" coords="431,284,539,311"/><area shape="rect" id="node25" href="../../db/d38/iot__device_8h.html#a5e8629233d0adaa0b30c935558f9f46c" title="Deletes or marks unused an IoT Hub message, freeing any allocated resources. " alt="" coords="413,411,557,437"/><area shape="rect" id="node26" href="../../db/d38/iot__device_8h.html#a8f946e3afc48831f091af8259018320b" title="serializeCommand" alt="" coords="413,360,557,387"/><area shape="rect" id="node6" href="../../db/d38/iot__device_8h.html#adc62f945def2a99c296d39f596b02758" title="serializeDeviceTreeJson" alt="" coords="647,335,823,361"/><area shape="rect" id="node11" href="../../db/d38/iot__device_8h.html#a87a4f9d48debc02652afa3f51b4c7675" title="serializeDevicesRealtimeJson" alt="" coords="627,233,842,260"/><area shape="rect" id="node16" href="../../db/d38/iot__device_8h.html#ac5b57ac3f1e6b80367180667dabb1454" title="serializeChannelRealtimesJson" alt="" coords="623,183,846,209"/><area shape="rect" id="node18" href="../../db/d38/iot__device_8h.html#a3bafbf9dbe312633e6cced33ddd1ee0b" title="serializeTrendsJson" alt="" coords="661,284,808,311"/><area shape="rect" id="node20" href="../../db/d38/iot__device_8h.html#a0f707f88aa54e54cf90431b123c0259f" title="serializeAlarmsJson" alt="" coords="659,132,810,159"/><area shape="rect" id="node7" href="../../db/d38/iot__device_8h.html#a783d5ab7847e154c74374bcc19dc6710" title="allocateSerializedBuffer" alt="" coords="931,309,1109,336"/><area shape="rect" id="node8" href="../../db/d38/iot__device_8h.html#af1f05f9e48d52e80e018d0dff434a938" title="serializeDeviceJson" alt="" coords="945,435,1095,461"/><area shape="rect" id="node9" href="../../db/d38/iot__device_8h.html#acf57b71f1285d7bdda5e7ee7e106a5ba" title="checkSerializedBufferSize" alt="" coords="1177,397,1367,424"/><area shape="rect" id="node10" href="../../db/d38/iot__device_8h.html#a5173731f1b948708dbf37f99bee9bbea" title="addStringField" alt="" coords="1215,259,1329,285"/><area shape="rect" id="node12" href="../../db/d38/iot__device_8h.html#a4173c00f1aac45bd903b4290d847e420" title="serializeDeviceRealtimeJson" alt="" coords="917,208,1123,235"/><area shape="rect" id="node13" href="../../db/d38/iot__device_8h.html#adba3c4a4960f88b22eac95f7c05f54ad" title="addLongNumericField" alt="" coords="1191,208,1353,235"/><area shape="rect" id="node14" href="../../db/d38/iot__device_8h.html#a07d8b97dd7461e57a15470f6e5930d23" title="addIntNumericField" alt="" coords="1198,309,1346,336"/><area shape="rect" id="node15" href="../../db/d38/iot__device_8h.html#a6fa06f2810d77a2b8b277338ffda053c" title="addBooleanField" alt="" coords="1207,157,1337,184"/><area shape="rect" id="node17" href="../../db/d38/iot__device_8h.html#a0488e971d6f1ee3c859f46a8194b8702" title="serializeChannelRealtimeJson" alt="" coords="913,157,1127,184"/><area shape="rect" id="node19" href="../../db/d38/iot__device_8h.html#ac3f701ba3e7e11e8e17d7eedd25ada2d" title="serializeTrendJson" alt="" coords="951,259,1089,285"/><area shape="rect" id="node21" href="../../db/d38/iot__device_8h.html#a77ce3c7f979e71b39874ae265c2f3226" title="serializeAlarmJson" alt="" coords="949,107,1091,133"/><area shape="rect" id="node22" href="../../db/d38/iot__device_8h.html#a5fd36a937796d85e5ef49258ae05e3ed" title="addULongNumericField" alt="" coords="1186,5,1358,32"/><area shape="rect" id="node23" href="../../db/d38/iot__device_8h.html#a8b660424d1cb9d1b48480d71120738c5" title="addUIntNumericField" alt="" coords="1193,56,1351,83"/><area shape="rect" id="node24" href="../../db/d38/iot__device_8h.html#a9a9866958c2d6dd26e080a357a049c28" title="addOpenBraceStringField" alt="" coords="1179,107,1365,133"/><area shape="rect" id="node27" href="../../db/d38/iot__device_8h.html#aebc0d73f1a54fffb19f041ef5a858266" title="serializeTransferImageJson" alt="" coords="636,485,833,512"/><area shape="rect" id="node28" href="../../db/d38/iot__device_8h.html#aab77a0c8e1df0becf42a7873cbe0d490" title="serializeDeviceCommandStatusJson" alt="" coords="606,385,863,412"/><area shape="rect" id="node30" href="../../db/d38/iot__device_8h.html#abd5cb5c76cc2f079b0fc629706596671" title="getDataType" alt="" coords="433,465,537,492"/><area shape="rect" id="node31" href="../../db/d38/iot__device_8h.html#a1c0257deafcf5f0c2cdc4cc132a0514c" title="getCommandType" alt="" coords="415,516,555,543"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaf6c31012b13805b13765d8b4fe82f526"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool iot_sendCommand </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d38/iot__device_8h.html#ab998a158fc458cb8f09b1928c8f3e7ac">IOT_DEVICE_HANDLE</a>&#160;</td>
          <td class="paramname"><em>deviceHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../db/d38/iot__device_8h.html#ac218d65b187da224b6e15f6215351d8e">IOT_COMMAND</a> *&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>message_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends a command to IoT Hub (i.e. </p>
<p>InitiateBlobTransfer, etc). This is a non-blocking, non-batched call.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">deviceHandle</td><td>A handle to the device connection. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">command</td><td>A command entity (refer to <a class="el" href="../../d9/d32/structiot__command.html" title="Structure containing a command to be sent to the cloud (i.e. ">iot_command</a>). Note: the caller is responsible for freeing the IOT_COMMAND structure. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">message_size</td><td>If a valid pointer, returns the size of the message that was sent, for I/O statistics.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool True if command was successfully sent else False. </dd></dl>

<p>Definition at line <a class="el" href="../../d3/d53/iot__device_8c_source.html#l00358">358</a> of file <a class="el" href="../../d3/d53/iot__device_8c_source.html">iot_device.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/da4/group__message__handling__apis_gaf6c31012b13805b13765d8b4fe82f526_cgraph.png" border="0" usemap="#d5/da4/group__message__handling__apis_gaf6c31012b13805b13765d8b4fe82f526_cgraph" alt=""/></div>
<map name="d5/da4/group__message__handling__apis_gaf6c31012b13805b13765d8b4fe82f526_cgraph" id="d5/da4/group__message__handling__apis_gaf6c31012b13805b13765d8b4fe82f526_cgraph">
<area shape="rect" id="node2" href="../../db/d38/iot__device_8h.html#a0403205a70b39d5e559730cc8c17ab86" title="Returns the IOT_DEVICE_CONNECTION associated with an IOT_DEVICE_HANDLE. " alt="" coords="257,301,373,328"/><area shape="rect" id="node3" href="../../db/d38/iot__device_8h.html#a1a01656d15dc77a04e64c9c07c88d3a3" title="Creates an IoT Hub message, either by allocating memory for it (PX Red) or choosing the next availabl..." alt="" coords="255,352,375,379"/><area shape="rect" id="node29" href="../../db/d38/iot__device_8h.html#a234e4f6f4306ed2dbd3484148faff785" title="Set Iot Hub message properties, such as message type and (optionally) parent device. " alt="" coords="232,469,397,496"/><area shape="rect" id="node32" href="../../db/d38/iot__device_8h.html#a22b51caecdf56b82c3674ece92a40e88" title="Callback routine to process confirmation (or failure) of an outbound message (sent Device&#45;to&#45;Cloud)..." alt="" coords="197,403,432,445"/><area shape="rect" id="node4" href="../../db/d38/iot__device_8h.html#ac1964130f48b78c48eb92afa5fc92736" title="For PXGreen, gets the next available message buffer. " alt="" coords="487,233,617,260"/><area shape="rect" id="node5" href="../../db/d38/iot__device_8h.html#a6f9d3843c2d1316092405fcc618e0bfe" title="serializeData" alt="" coords="498,284,606,311"/><area shape="rect" id="node25" href="../../db/d38/iot__device_8h.html#a5e8629233d0adaa0b30c935558f9f46c" title="Deletes or marks unused an IoT Hub message, freeing any allocated resources. " alt="" coords="480,411,624,437"/><area shape="rect" id="node26" href="../../db/d38/iot__device_8h.html#a8f946e3afc48831f091af8259018320b" title="serializeCommand" alt="" coords="480,360,624,387"/><area shape="rect" id="node6" href="../../db/d38/iot__device_8h.html#adc62f945def2a99c296d39f596b02758" title="serializeDeviceTreeJson" alt="" coords="713,335,889,361"/><area shape="rect" id="node11" href="../../db/d38/iot__device_8h.html#a87a4f9d48debc02652afa3f51b4c7675" title="serializeDevicesRealtimeJson" alt="" coords="694,233,909,260"/><area shape="rect" id="node16" href="../../db/d38/iot__device_8h.html#ac5b57ac3f1e6b80367180667dabb1454" title="serializeChannelRealtimesJson" alt="" coords="690,183,913,209"/><area shape="rect" id="node18" href="../../db/d38/iot__device_8h.html#a3bafbf9dbe312633e6cced33ddd1ee0b" title="serializeTrendsJson" alt="" coords="728,284,875,311"/><area shape="rect" id="node20" href="../../db/d38/iot__device_8h.html#a0f707f88aa54e54cf90431b123c0259f" title="serializeAlarmsJson" alt="" coords="726,132,877,159"/><area shape="rect" id="node7" href="../../db/d38/iot__device_8h.html#a783d5ab7847e154c74374bcc19dc6710" title="allocateSerializedBuffer" alt="" coords="998,309,1175,336"/><area shape="rect" id="node8" href="../../db/d38/iot__device_8h.html#af1f05f9e48d52e80e018d0dff434a938" title="serializeDeviceJson" alt="" coords="1012,435,1161,461"/><area shape="rect" id="node9" href="../../db/d38/iot__device_8h.html#acf57b71f1285d7bdda5e7ee7e106a5ba" title="checkSerializedBufferSize" alt="" coords="1243,397,1434,424"/><area shape="rect" id="node10" href="../../db/d38/iot__device_8h.html#a5173731f1b948708dbf37f99bee9bbea" title="addStringField" alt="" coords="1281,259,1396,285"/><area shape="rect" id="node12" href="../../db/d38/iot__device_8h.html#a4173c00f1aac45bd903b4290d847e420" title="serializeDeviceRealtimeJson" alt="" coords="983,208,1190,235"/><area shape="rect" id="node13" href="../../db/d38/iot__device_8h.html#adba3c4a4960f88b22eac95f7c05f54ad" title="addLongNumericField" alt="" coords="1257,208,1420,235"/><area shape="rect" id="node14" href="../../db/d38/iot__device_8h.html#a07d8b97dd7461e57a15470f6e5930d23" title="addIntNumericField" alt="" coords="1265,309,1413,336"/><area shape="rect" id="node15" href="../../db/d38/iot__device_8h.html#a6fa06f2810d77a2b8b277338ffda053c" title="addBooleanField" alt="" coords="1274,157,1403,184"/><area shape="rect" id="node17" href="../../db/d38/iot__device_8h.html#a0488e971d6f1ee3c859f46a8194b8702" title="serializeChannelRealtimeJson" alt="" coords="979,157,1194,184"/><area shape="rect" id="node19" href="../../db/d38/iot__device_8h.html#ac3f701ba3e7e11e8e17d7eedd25ada2d" title="serializeTrendJson" alt="" coords="1017,259,1156,285"/><area shape="rect" id="node21" href="../../db/d38/iot__device_8h.html#a77ce3c7f979e71b39874ae265c2f3226" title="serializeAlarmJson" alt="" coords="1015,107,1158,133"/><area shape="rect" id="node22" href="../../db/d38/iot__device_8h.html#a5fd36a937796d85e5ef49258ae05e3ed" title="addULongNumericField" alt="" coords="1253,5,1425,32"/><area shape="rect" id="node23" href="../../db/d38/iot__device_8h.html#a8b660424d1cb9d1b48480d71120738c5" title="addUIntNumericField" alt="" coords="1259,56,1418,83"/><area shape="rect" id="node24" href="../../db/d38/iot__device_8h.html#a9a9866958c2d6dd26e080a357a049c28" title="addOpenBraceStringField" alt="" coords="1246,107,1431,133"/><area shape="rect" id="node27" href="../../db/d38/iot__device_8h.html#aebc0d73f1a54fffb19f041ef5a858266" title="serializeTransferImageJson" alt="" coords="703,485,900,512"/><area shape="rect" id="node28" href="../../db/d38/iot__device_8h.html#aab77a0c8e1df0becf42a7873cbe0d490" title="serializeDeviceCommandStatusJson" alt="" coords="673,385,930,412"/><area shape="rect" id="node30" href="../../db/d38/iot__device_8h.html#abd5cb5c76cc2f079b0fc629706596671" title="getDataType" alt="" coords="500,465,604,492"/><area shape="rect" id="node31" href="../../db/d38/iot__device_8h.html#a1c0257deafcf5f0c2cdc4cc132a0514c" title="getCommandType" alt="" coords="482,516,622,543"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/da4/group__message__handling__apis_gaf6c31012b13805b13765d8b4fe82f526_icgraph.png" border="0" usemap="#d5/da4/group__message__handling__apis_gaf6c31012b13805b13765d8b4fe82f526_icgraph" alt=""/></div>
<map name="d5/da4/group__message__handling__apis_gaf6c31012b13805b13765d8b4fe82f526_icgraph" id="d5/da4/group__message__handling__apis_gaf6c31012b13805b13765d8b4fe82f526_icgraph">
<area shape="rect" id="node2" href="../../d5/da4/group__message__handling__apis.html#gaa4f2b5d3bb5def4020d6b3e3f19003ec" title="Sends a device command status update to IoT Hub. " alt="" coords="198,5,442,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga6c02a1a3859f49453ecf83a12a503cdb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long iot_sendCustomMessage </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d38/iot__device_8h.html#ab998a158fc458cb8f09b1928c8f3e7ac">IOT_DEVICE_HANDLE</a>&#160;</td>
          <td class="paramname"><em>deviceHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>properties</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>num_properties</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends a custom message to the IoT Hub (i.e., one created by the product). </p>
<p>This is a non-blocking call.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">deviceHandle</td><td>A handle to the device connection. </td></tr>
    <tr><td class="paramname">payload</td><td>The message payload as a JSON object (ie, already serialized). For PXGreen, the caller should free the payload upon the return, if it was allocated, since it has been duplicated in the internal IotMessage created for Azure code to handle. For PXRed, it will always be freed internally. </td></tr>
    <tr><td class="paramname">properties</td><td>An array of key-values pairs for properties of the message, to be used in the topic path when sending. Each pair takes two places in this array; the first is the key, the second the associated value. Well known PX White properties include: 'a' - the message name, eg 'trends' 'e' - the encoding, eg 'json' 'p' - the UUID for a child device (not the publisher) 'r' - the routing path for this message 'j' - a Job UUID, for commands </td></tr>
    <tr><td class="paramname">num_properties</td><td>How many key-value property pairs are included in the properties array (So the number of array entries is twice this number) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>On success, returns the messageId; on failure, returns 0. </dd></dl>

<p>Definition at line <a class="el" href="../../d3/d53/iot__device_8c_source.html#l00282">282</a> of file <a class="el" href="../../d3/d53/iot__device_8c_source.html">iot_device.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/da4/group__message__handling__apis_ga6c02a1a3859f49453ecf83a12a503cdb_cgraph.png" border="0" usemap="#d5/da4/group__message__handling__apis_ga6c02a1a3859f49453ecf83a12a503cdb_cgraph" alt=""/></div>
<map name="d5/da4/group__message__handling__apis_ga6c02a1a3859f49453ecf83a12a503cdb_cgraph" id="d5/da4/group__message__handling__apis_ga6c02a1a3859f49453ecf83a12a503cdb_cgraph">
<area shape="rect" id="node2" href="../../db/d38/iot__device_8h.html#a0403205a70b39d5e559730cc8c17ab86" title="Returns the IOT_DEVICE_CONNECTION associated with an IOT_DEVICE_HANDLE. " alt="" coords="297,5,413,32"/><area shape="rect" id="node3" href="../../db/d38/iot__device_8h.html#a5fdec127fb171c12b0dd032f12914fb0" title="Creates an IoT Hub message by allocating memory for it, and copying in the serialized message content..." alt="" coords="269,56,440,83"/><area shape="rect" id="node5" href="../../db/d38/iot__device_8h.html#a4e3bb0e04b311f73e2f39662a94263ea" title="Set Custom Iot Hub message properties from the given array of properties. " alt="" coords="247,107,462,133"/><area shape="rect" id="node6" href="../../db/d38/iot__device_8h.html#a22b51caecdf56b82c3674ece92a40e88" title="Callback routine to process confirmation (or failure) of an outbound message (sent Device&#45;to&#45;Cloud)..." alt="" coords="237,158,472,199"/><area shape="rect" id="node4" href="../../db/d38/iot__device_8h.html#a5e8629233d0adaa0b30c935558f9f46c" title="Deletes or marks unused an IoT Hub message, freeing any allocated resources. " alt="" coords="520,111,664,137"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaa4f2b5d3bb5def4020d6b3e3f19003ec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool iot_updateDeviceCommandStatus </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d38/iot__device_8h.html#ab998a158fc458cb8f09b1928c8f3e7ac">IOT_DEVICE_HANDLE</a>&#160;</td>
          <td class="paramname"><em>deviceHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>commandID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>deviceUUID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../db/d38/iot__device_8h.html#a9b2c08a2dbddb16c997e7ca82796555d">IOT_COMMAND_STATUS</a>&#160;</td>
          <td class="paramname"><em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>description</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>message_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends a device command status update to IoT Hub. </p>
<p>This is a non-blocking, non-batched call.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">deviceHandle</td><td>A handle to the device connection. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">commandID</td><td>A command instance id. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">deviceUUID</td><td>A device UUID in the form: 00000000-0000-0000-0000-000000000000. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">task</td><td>The name of the task either the a main task (i.e. UpdateFirmware, Reboot) or a subtask (i.e. ImageTransfer). </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">status</td><td>The status of the step refer to iot_command_status). </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">description</td><td>A free form text description (optional). </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">message_size</td><td>If a valid pointer, returns the size of the message that was sent, for I/O statistics.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>bool True if status was successfully sent else False. </dd></dl>

<p>Definition at line <a class="el" href="../../d3/d53/iot__device_8c_source.html#l00436">436</a> of file <a class="el" href="../../d3/d53/iot__device_8c_source.html">iot_device.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/da4/group__message__handling__apis_gaa4f2b5d3bb5def4020d6b3e3f19003ec_cgraph.png" border="0" usemap="#d5/da4/group__message__handling__apis_gaa4f2b5d3bb5def4020d6b3e3f19003ec_cgraph" alt=""/></div>
<map name="d5/da4/group__message__handling__apis_gaa4f2b5d3bb5def4020d6b3e3f19003ec_cgraph" id="d5/da4/group__message__handling__apis_gaa4f2b5d3bb5def4020d6b3e3f19003ec_cgraph">
<area shape="rect" id="node2" href="../../db/d38/iot__device_8h.html#a0403205a70b39d5e559730cc8c17ab86" title="Returns the IOT_DEVICE_CONNECTION associated with an IOT_DEVICE_HANDLE. " alt="" coords="550,62,666,89"/><area shape="rect" id="node3" href="../../d5/da4/group__message__handling__apis.html#gaf6c31012b13805b13765d8b4fe82f526" title="Sends a command to IoT Hub (i.e. " alt="" coords="299,113,443,140"/><area shape="rect" id="node4" href="../../db/d38/iot__device_8h.html#a1a01656d15dc77a04e64c9c07c88d3a3" title="Creates an IoT Hub message, either by allocating memory for it (PX Red) or choosing the next availabl..." alt="" coords="548,189,668,216"/><area shape="rect" id="node30" href="../../db/d38/iot__device_8h.html#a234e4f6f4306ed2dbd3484148faff785" title="Set Iot Hub message properties, such as message type and (optionally) parent device. " alt="" coords="525,113,691,140"/><area shape="rect" id="node33" href="../../db/d38/iot__device_8h.html#a22b51caecdf56b82c3674ece92a40e88" title="Callback routine to process confirmation (or failure) of an outbound message (sent Device&#45;to&#45;Cloud)..." alt="" coords="491,262,725,303"/><area shape="rect" id="node5" href="../../db/d38/iot__device_8h.html#ac1964130f48b78c48eb92afa5fc92736" title="For PXGreen, gets the next available message buffer. " alt="" coords="780,189,911,216"/><area shape="rect" id="node6" href="../../db/d38/iot__device_8h.html#a6f9d3843c2d1316092405fcc618e0bfe" title="serializeData" alt="" coords="791,240,899,266"/><area shape="rect" id="node26" href="../../db/d38/iot__device_8h.html#a5e8629233d0adaa0b30c935558f9f46c" title="Deletes or marks unused an IoT Hub message, freeing any allocated resources. " alt="" coords="773,290,917,317"/><area shape="rect" id="node27" href="../../db/d38/iot__device_8h.html#a8f946e3afc48831f091af8259018320b" title="serializeCommand" alt="" coords="773,138,917,165"/><area shape="rect" id="node7" href="../../db/d38/iot__device_8h.html#adc62f945def2a99c296d39f596b02758" title="serializeDeviceTreeJson" alt="" coords="1007,189,1183,216"/><area shape="rect" id="node12" href="../../db/d38/iot__device_8h.html#a87a4f9d48debc02652afa3f51b4c7675" title="serializeDevicesRealtimeJson" alt="" coords="987,341,1202,368"/><area shape="rect" id="node17" href="../../db/d38/iot__device_8h.html#ac5b57ac3f1e6b80367180667dabb1454" title="serializeChannelRealtimesJson" alt="" coords="983,290,1206,317"/><area shape="rect" id="node19" href="../../db/d38/iot__device_8h.html#a3bafbf9dbe312633e6cced33ddd1ee0b" title="serializeTrendsJson" alt="" coords="1021,240,1168,266"/><area shape="rect" id="node21" href="../../db/d38/iot__device_8h.html#a0f707f88aa54e54cf90431b123c0259f" title="serializeAlarmsJson" alt="" coords="1019,392,1170,418"/><area shape="rect" id="node8" href="../../db/d38/iot__device_8h.html#a783d5ab7847e154c74374bcc19dc6710" title="allocateSerializedBuffer" alt="" coords="1291,290,1469,317"/><area shape="rect" id="node9" href="../../db/d38/iot__device_8h.html#af1f05f9e48d52e80e018d0dff434a938" title="serializeDeviceJson" alt="" coords="1305,88,1455,114"/><area shape="rect" id="node10" href="../../db/d38/iot__device_8h.html#acf57b71f1285d7bdda5e7ee7e106a5ba" title="checkSerializedBufferSize" alt="" coords="1537,113,1727,140"/><area shape="rect" id="node11" href="../../db/d38/iot__device_8h.html#a5173731f1b948708dbf37f99bee9bbea" title="addStringField" alt="" coords="1575,189,1689,216"/><area shape="rect" id="node13" href="../../db/d38/iot__device_8h.html#a4173c00f1aac45bd903b4290d847e420" title="serializeDeviceRealtimeJson" alt="" coords="1277,392,1483,418"/><area shape="rect" id="node14" href="../../db/d38/iot__device_8h.html#adba3c4a4960f88b22eac95f7c05f54ad" title="addLongNumericField" alt="" coords="1551,290,1713,317"/><area shape="rect" id="node15" href="../../db/d38/iot__device_8h.html#a07d8b97dd7461e57a15470f6e5930d23" title="addIntNumericField" alt="" coords="1558,341,1706,368"/><area shape="rect" id="node16" href="../../db/d38/iot__device_8h.html#a6fa06f2810d77a2b8b277338ffda053c" title="addBooleanField" alt="" coords="1567,392,1697,418"/><area shape="rect" id="node18" href="../../db/d38/iot__device_8h.html#a0488e971d6f1ee3c859f46a8194b8702" title="serializeChannelRealtimeJson" alt="" coords="1273,341,1487,368"/><area shape="rect" id="node20" href="../../db/d38/iot__device_8h.html#ac3f701ba3e7e11e8e17d7eedd25ada2d" title="serializeTrendJson" alt="" coords="1311,189,1449,216"/><area shape="rect" id="node22" href="../../db/d38/iot__device_8h.html#a77ce3c7f979e71b39874ae265c2f3226" title="serializeAlarmJson" alt="" coords="1309,442,1451,469"/><area shape="rect" id="node23" href="../../db/d38/iot__device_8h.html#a5fd36a937796d85e5ef49258ae05e3ed" title="addULongNumericField" alt="" coords="1546,544,1718,570"/><area shape="rect" id="node24" href="../../db/d38/iot__device_8h.html#a8b660424d1cb9d1b48480d71120738c5" title="addUIntNumericField" alt="" coords="1553,442,1711,469"/><area shape="rect" id="node25" href="../../db/d38/iot__device_8h.html#a9a9866958c2d6dd26e080a357a049c28" title="addOpenBraceStringField" alt="" coords="1539,493,1725,520"/><area shape="rect" id="node28" href="../../db/d38/iot__device_8h.html#aebc0d73f1a54fffb19f041ef5a858266" title="serializeTransferImageJson" alt="" coords="996,138,1193,165"/><area shape="rect" id="node29" href="../../db/d38/iot__device_8h.html#aab77a0c8e1df0becf42a7873cbe0d490" title="serializeDeviceCommandStatusJson" alt="" coords="966,50,1223,77"/><area shape="rect" id="node31" href="../../db/d38/iot__device_8h.html#abd5cb5c76cc2f079b0fc629706596671" title="getDataType" alt="" coords="793,37,897,64"/><area shape="rect" id="node32" href="../../db/d38/iot__device_8h.html#a1c0257deafcf5f0c2cdc4cc132a0514c" title="getCommandType" alt="" coords="775,88,915,114"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gab37cf27483eb40a83de29b7c2e63c5f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool iot_set_enable_batching </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d38/iot__device_8h.html#ab998a158fc458cb8f09b1928c8f3e7ac">IOT_DEVICE_HANDLE</a>&#160;</td>
          <td class="paramname"><em>deviceHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>enable</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>doWorkIntervalSeconds</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Setter for the connection's wantBatching flag and doWorkIntervalSeconds value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">deviceHandle</td><td>A handle to the device connection. </td></tr>
    <tr><td class="paramname">enable</td><td>Set to true to enable batching, false to disable it. </td></tr>
    <tr><td class="paramname">doWorkIntervalSeconds</td><td>Value to use for the DoWork (batching) interval, in seconds. Ignored when disabling batching. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true If succeed in setting this. </dd>
<dd>
false If fail to set, including the MQTT case where batching is not enabled. </dd></dl>

<p>Definition at line <a class="el" href="../../d6/d10/iot__device__common_8c_source.html#l00962">962</a> of file <a class="el" href="../../d6/d10/iot__device__common_8c_source.html">iot_device_common.c</a>.</p>

</div>
</div>
<a class="anchor" id="gac18d69ba56c2b7b2a5aaf9b545898d9e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void iot_do_send_immediate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d38/iot__device_8h.html#ab998a158fc458cb8f09b1928c8f3e7ac">IOT_DEVICE_HANDLE</a>&#160;</td>
          <td class="paramname"><em>deviceHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the connection's sendImmediately flag to trigger publishing of all batched messages. </p>
<p>Calling this will trigger a DoWork cycle for an immediate send of all batched messages, and resets the DoWork interval timer. The sendImmediately flag will be cleared automatically when the publishing happens, so this method can be called again later as needed.</p>
<p>This might be useful for events which need to be communicated immediately, or when it is time to send all trend data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">deviceHandle</td><td>A handle to the device connection. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d6/d10/iot__device__common_8c_source.html#l00958">958</a> of file <a class="el" href="../../d6/d10/iot__device__common_8c_source.html">iot_device_common.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga9c38874a7c24c72c45e82601c4e9f099"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool iot_getCommandParameter </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve location and size of a device command parameter by name. </p>
<p>Example: "params":{"tag1":"value1", "tag2":"value2"}</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">params</td><td>Device command parameters in JSON format. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">tag</td><td>The tag to extract the location and size for. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">offset</td><td>The offset of the parameter. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">length</td><td>The length of the parameter. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on parsing success, False if failed and offset and length are invalid. </dd></dl>

<p>Definition at line <a class="el" href="../../d1/dd4/iot__serialization_8c_source.html#l01967">1967</a> of file <a class="el" href="../../d1/dd4/iot__serialization_8c_source.html">iot_serialization.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/da4/group__message__handling__apis_ga9c38874a7c24c72c45e82601c4e9f099_cgraph.png" border="0" usemap="#d5/da4/group__message__handling__apis_ga9c38874a7c24c72c45e82601c4e9f099_cgraph" alt=""/></div>
<map name="d5/da4/group__message__handling__apis_ga9c38874a7c24c72c45e82601c4e9f099_cgraph" id="d5/da4/group__message__handling__apis_ga9c38874a7c24c72c45e82601c4e9f099_cgraph">
<area shape="rect" id="node2" href="../../d5/da4/group__message__handling__apis.html#ga8e16b7dd16600a83e535fd0d10769e44" title="Retrieve the number of tokens in a json string. " alt="" coords="256,5,427,32"/><area shape="rect" id="node3" href="../../d9/d66/iot__json__parser_8h.html#a8d4a8b3ce5c3d600feea38615b5f9aa6" title="Initializes the given JSON parser structure. " alt="" coords="300,56,383,83"/><area shape="rect" id="node4" href="../../d9/d66/iot__json__parser_8h.html#a774f985a9750a10c7e88304e30191e03" title="Run JSON parser. " alt="" coords="293,107,390,133"/><area shape="rect" id="node9" href="../../d9/d66/iot__json__parser_8h.html#a03247c935b62f6e95978538be5a6d4fe" title="Tests if a JSON tag is equal to a search string. " alt="" coords="309,157,374,184"/><area shape="rect" id="node5" href="../../d9/d66/iot__json__parser_8h.html#a01be804f97b4f95b725cc1768fe35f2b" title="Allocates and initializes a fresh unused token from the token pull (array), one beyond the last initi..." alt="" coords="685,107,821,133"/><area shape="rect" id="node6" href="../../da/d44/iot__json__parser_8c.html#a568f184e45bb9718270088e1e05a4264" title="Fills next token with JSON string. " alt="" coords="485,157,627,184"/><area shape="rect" id="node8" href="../../da/d44/iot__json__parser_8c.html#a4d1f29464811e2bbf5506fbe5c7ee9de" title="Fills next available token with JSON primitive. " alt="" coords="475,107,637,133"/><area shape="rect" id="node7" href="../../da/d44/iot__json__parser_8c.html#a20b875e37a2a5c88888c6d80068715be" title="Fills token type and boundaries. " alt="" coords="693,157,814,184"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga5dc7d4401ec6028418ccf4a14ecfcc11"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool iot_getCommandParameterToken </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve location and size of a device command parameter by token index. </p>
<p>Example: "params":{"tag1":"value1", "tag2":"value2"}</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">params</td><td>Device command parameters in JSON format. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">index</td><td>The index of the token to extract the location and size for. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">offset</td><td>The offset of the parameter. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">length</td><td>The length of the parameter. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on parsing success, False if failed and offset and length are invalid. </dd></dl>

<p>Definition at line <a class="el" href="../../d1/dd4/iot__serialization_8c_source.html#l02010">2010</a> of file <a class="el" href="../../d1/dd4/iot__serialization_8c_source.html">iot_serialization.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/da4/group__message__handling__apis_ga5dc7d4401ec6028418ccf4a14ecfcc11_cgraph.png" border="0" usemap="#d5/da4/group__message__handling__apis_ga5dc7d4401ec6028418ccf4a14ecfcc11_cgraph" alt=""/></div>
<map name="d5/da4/group__message__handling__apis_ga5dc7d4401ec6028418ccf4a14ecfcc11_cgraph" id="d5/da4/group__message__handling__apis_ga5dc7d4401ec6028418ccf4a14ecfcc11_cgraph">
<area shape="rect" id="node2" href="../../d5/da4/group__message__handling__apis.html#ga8e16b7dd16600a83e535fd0d10769e44" title="Retrieve the number of tokens in a json string. " alt="" coords="293,5,464,32"/><area shape="rect" id="node3" href="../../d9/d66/iot__json__parser_8h.html#a8d4a8b3ce5c3d600feea38615b5f9aa6" title="Initializes the given JSON parser structure. " alt="" coords="337,56,420,83"/><area shape="rect" id="node4" href="../../d9/d66/iot__json__parser_8h.html#ac7680f11b0c438828a495fb018bca578" title="Initializes an array of tokens structures. " alt="" coords="321,107,436,133"/><area shape="rect" id="node5" href="../../d9/d66/iot__json__parser_8h.html#a774f985a9750a10c7e88304e30191e03" title="Run JSON parser. " alt="" coords="330,157,427,184"/><area shape="rect" id="node6" href="../../d9/d66/iot__json__parser_8h.html#a01be804f97b4f95b725cc1768fe35f2b" title="Allocates and initializes a fresh unused token from the token pull (array), one beyond the last initi..." alt="" coords="723,157,859,184"/><area shape="rect" id="node7" href="../../da/d44/iot__json__parser_8c.html#a568f184e45bb9718270088e1e05a4264" title="Fills next token with JSON string. " alt="" coords="523,208,664,235"/><area shape="rect" id="node9" href="../../da/d44/iot__json__parser_8c.html#a4d1f29464811e2bbf5506fbe5c7ee9de" title="Fills next available token with JSON primitive. " alt="" coords="512,157,675,184"/><area shape="rect" id="node8" href="../../da/d44/iot__json__parser_8c.html#a20b875e37a2a5c88888c6d80068715be" title="Fills token type and boundaries. " alt="" coords="730,208,851,235"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gac218a5acf0f72e77d352bdb235d38cd4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool iot_getCommandParameterTokenCount </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the number of tokens in a device command parameter. </p>
<p>Example: "params":{"tag1":"value1", "tag2":"value2"}</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">params</td><td>Device command parameters in JSON format. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">count</td><td>The number of tokens. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on parsing success, False if failed and count is invalid. </dd></dl>

<p>Definition at line <a class="el" href="../../d1/dd4/iot__serialization_8c_source.html#l02053">2053</a> of file <a class="el" href="../../d1/dd4/iot__serialization_8c_source.html">iot_serialization.c</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/da4/group__message__handling__apis_gac218a5acf0f72e77d352bdb235d38cd4_cgraph.png" border="0" usemap="#d5/da4/group__message__handling__apis_gac218a5acf0f72e77d352bdb235d38cd4_cgraph" alt=""/></div>
<map name="d5/da4/group__message__handling__apis_gac218a5acf0f72e77d352bdb235d38cd4_cgraph" id="d5/da4/group__message__handling__apis_gac218a5acf0f72e77d352bdb235d38cd4_cgraph">
<area shape="rect" id="node2" href="../../d5/da4/group__message__handling__apis.html#ga8e16b7dd16600a83e535fd0d10769e44" title="Retrieve the number of tokens in a json string. " alt="" coords="293,5,464,32"/><area shape="rect" id="node3" href="../../d9/d66/iot__json__parser_8h.html#a8d4a8b3ce5c3d600feea38615b5f9aa6" title="Initializes the given JSON parser structure. " alt="" coords="337,56,420,83"/><area shape="rect" id="node4" href="../../d9/d66/iot__json__parser_8h.html#a774f985a9750a10c7e88304e30191e03" title="Run JSON parser. " alt="" coords="330,107,427,133"/><area shape="rect" id="node5" href="../../d9/d66/iot__json__parser_8h.html#a01be804f97b4f95b725cc1768fe35f2b" title="Allocates and initializes a fresh unused token from the token pull (array), one beyond the last initi..." alt="" coords="723,107,859,133"/><area shape="rect" id="node6" href="../../da/d44/iot__json__parser_8c.html#a568f184e45bb9718270088e1e05a4264" title="Fills next token with JSON string. " alt="" coords="523,157,664,184"/><area shape="rect" id="node8" href="../../da/d44/iot__json__parser_8c.html#a4d1f29464811e2bbf5506fbe5c7ee9de" title="Fills next available token with JSON primitive. " alt="" coords="512,107,675,133"/><area shape="rect" id="node7" href="../../da/d44/iot__json__parser_8c.html#a20b875e37a2a5c88888c6d80068715be" title="Fills token type and boundaries. " alt="" coords="730,157,851,184"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga8e16b7dd16600a83e535fd0d10769e44"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int iot_getJsonTokenCount </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>json</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the number of tokens in a json string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">json</td><td>Json string to search. </td></tr>
    <tr><td class="paramname">len</td><td>The length of the json string. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of JSON tokens counted. </dd></dl>

<p>Definition at line <a class="el" href="../../d1/dd4/iot__serialization_8c_source.html#l01872">1872</a> of file <a class="el" href="../../d1/dd4/iot__serialization_8c_source.html">iot_serialization.c</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/da4/group__message__handling__apis_ga8e16b7dd16600a83e535fd0d10769e44_icgraph.png" border="0" usemap="#d5/da4/group__message__handling__apis_ga8e16b7dd16600a83e535fd0d10769e44_icgraph" alt=""/></div>
<map name="d5/da4/group__message__handling__apis_ga8e16b7dd16600a83e535fd0d10769e44_icgraph" id="d5/da4/group__message__handling__apis_ga8e16b7dd16600a83e535fd0d10769e44_icgraph">
<area shape="rect" id="node2" href="../../d1/dd4/iot__serialization_8c.html#af559794637a3c0e6a4654b59a05bc669" title="deserializeCommand" alt="" coords="264,5,424,32"/><area shape="rect" id="node5" href="../../d5/da4/group__message__handling__apis.html#ga9c38874a7c24c72c45e82601c4e9f099" title="Retrieve location and size of a device command parameter by name. " alt="" coords="243,56,445,83"/><area shape="rect" id="node6" href="../../d5/da4/group__message__handling__apis.html#ga5dc7d4401ec6028418ccf4a14ecfcc11" title="Retrieve location and size of a device command parameter by token index. " alt="" coords="225,107,463,133"/><area shape="rect" id="node7" href="../../d5/da4/group__message__handling__apis.html#gac218a5acf0f72e77d352bdb235d38cd4" title="Retrieve the number of tokens in a device command parameter. " alt="" coords="225,158,463,199"/><area shape="rect" id="node3" href="../../d6/d10/iot__device__common_8c.html#a731f145a725ced7338a094cdd34f8a65" title="Callback routine to process inbound (Azure Cloud&#45;to&#45;Device) device commands, internal to the SDK..." alt="" coords="513,5,778,32"/><area shape="rect" id="node4" href="../../d6/dce/group__connection__status__apis.html#ga46c73bec3f14cba2453d334b2dabf459" title="Opens a connection with IoT Hub. " alt="" coords="827,5,906,32"/></map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri May 7 2021 20:26:07 for libetn_iot_sdk by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
