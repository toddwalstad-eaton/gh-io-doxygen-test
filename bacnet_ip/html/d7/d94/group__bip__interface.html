<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>bacnet_ip: &#39;C&#39; functions to interface to bacnet-stack for BACnet/IP (network)</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">bacnet_ip
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d7/d94/group__bip__interface.html','../../');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">'C' functions to interface to bacnet-stack for BACnet/IP (network)<div class="ingroups"><a class="el" href="../../d6/d51/group__bac__stack__interface.html">'C' functions to interface to the BACnet library, bacnet-stack.</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>and BVLC (BACnet Virtual Link Control) services.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for 'C' functions to interface to bacnet-stack for BACnet/IP (network):</div>
<div class="dyncontent">
<center><table><tr><td><img src="../../d7/d94/group__bip__interface.png" border="0" alt="" usemap="#d7_2d94_2group____bip____interface"/>
<map name="d7_2d94_2group____bip____interface" id="d7_2d94_2group____bip____interface">
<area shape="rect" id="node2" href="../../d6/d51/group__bac__stack__interface.html" title="Consist of three areas: " alt="" coords="6,5,189,61"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gafd95a0bfb0c464bcffdcf6c6476a0859"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d94/group__bip__interface.html#gafd95a0bfb0c464bcffdcf6c6476a0859">bip_send_pdu</a> (BACNET_ADDRESS *dest, BACNET_NPDU_DATA *npdu_data, uint8_t *pdu, unsigned pdu_len)</td></tr>
<tr class="memdesc:gafd95a0bfb0c464bcffdcf6c6476a0859"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to send a packet out the BACnet/IP socket (Annex J).  <a href="#gafd95a0bfb0c464bcffdcf6c6476a0859">More...</a><br/></td></tr>
<tr class="separator:gafd95a0bfb0c464bcffdcf6c6476a0859"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0baed8575113fdd10924e4604cdf5ed3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d94/group__bip__interface.html#ga0baed8575113fdd10924e4604cdf5ed3">eaton_handler_who_has</a> (uint8_t *service_request, uint16_t service_len, BACNET_ADDRESS *src)</td></tr>
<tr class="memdesc:ga0baed8575113fdd10924e4604cdf5ed3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Our (pre-) handler for Who-Has requests.  <a href="#ga0baed8575113fdd10924e4604cdf5ed3">More...</a><br/></td></tr>
<tr class="separator:ga0baed8575113fdd10924e4604cdf5ed3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8be3a0662a9073ed60d6e8cacde64a08"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d94/group__bip__interface.html#ga8be3a0662a9073ed60d6e8cacde64a08">bvlc_encode_header</a> (uint8_t *pdu, uint16_t pdu_size, uint8_t message_type, uint16_t length)</td></tr>
<tr class="memdesc:ga8be3a0662a9073ed60d6e8cacde64a08"><td class="mdescLeft">&#160;</td><td class="mdescRight">Encode the BVLC header.  <a href="#ga8be3a0662a9073ed60d6e8cacde64a08">More...</a><br/></td></tr>
<tr class="separator:ga8be3a0662a9073ed60d6e8cacde64a08"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga98ec5b34574c0c432dea2b5d3f5c08f4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d94/group__bip__interface.html#ga98ec5b34574c0c432dea2b5d3f5c08f4">bvlc_encode_register_foreign_device</a> (uint8_t *pdu, uint16_t pdu_size, uint16_t ttl_seconds)</td></tr>
<tr class="memdesc:ga98ec5b34574c0c432dea2b5d3f5c08f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">J.2.6 Register-Foreign-Device: encode.  <a href="#ga98ec5b34574c0c432dea2b5d3f5c08f4">More...</a><br/></td></tr>
<tr class="separator:ga98ec5b34574c0c432dea2b5d3f5c08f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gacf4d82c08beac50cdfa09b5cbbf5bde1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d94/group__bip__interface.html#gacf4d82c08beac50cdfa09b5cbbf5bde1">bvlc_send_pdu</a> (BACNET_ADDRESS *dest, BACNET_NPDU_DATA *, uint8_t *pdu, unsigned pdu_len)</td></tr>
<tr class="memdesc:gacf4d82c08beac50cdfa09b5cbbf5bde1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to add BVLC support to PDU data and then send a packet out the BACnet/IP socket (Annex J).  <a href="#gacf4d82c08beac50cdfa09b5cbbf5bde1">More...</a><br/></td></tr>
<tr class="separator:gacf4d82c08beac50cdfa09b5cbbf5bde1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga51d8943ac2b970c0e048a4023869f643"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d94/group__bip__interface.html#ga51d8943ac2b970c0e048a4023869f643">bvlc_get_function_code</a> (void)</td></tr>
<tr class="memdesc:ga51d8943ac2b970c0e048a4023869f643"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current BVLL Function Code we are processing.  <a href="#ga51d8943ac2b970c0e048a4023869f643">More...</a><br/></td></tr>
<tr class="separator:ga51d8943ac2b970c0e048a4023869f643"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga10ed2cf58c386eefc63eda8f29ba699c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d94/group__bip__interface.html#ga10ed2cf58c386eefc63eda8f29ba699c">debug_printf</a> (const char *format,...)</td></tr>
<tr class="memdesc:ga10ed2cf58c386eefc63eda8f29ba699c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Provide our override of the bacnet-stack's debug print function.  <a href="#ga10ed2cf58c386eefc63eda8f29ba699c">More...</a><br/></td></tr>
<tr class="separator:ga10ed2cf58c386eefc63eda8f29ba699c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>and BVLC (BACnet Virtual Link Control) services. </p>
<p>In our application, we have not included these files in the bacnet-stack library: bvlc.c, bip.c, or bip-init.c</p>
<p>because we want to hijack their functions and replace them with functions that better interface to our ASIO framework and to our OOB settings. (Some of these functions are found in <a class="el" href="../../da/db0/bacnet__ip__settings_8cpp.html" title="Implementation of class to manage BACnet/IP settings and &quot;C&quot; interface functions to get and set the n...">bacnet_ip_settings.cpp</a> because they need the OOB data found there.) </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gafd95a0bfb0c464bcffdcf6c6476a0859"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bip_send_pdu </td>
          <td>(</td>
          <td class="paramtype">BACNET_ADDRESS *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BACNET_NPDU_DATA *&#160;</td>
          <td class="paramname"><em>npdu_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pdu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>pdu_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to send a packet out the BACnet/IP socket (Annex J). </p>
<p>This function should not actually be called; instead, <a class="el" href="../../d7/d94/group__bip__interface.html#gacf4d82c08beac50cdfa09b5cbbf5bde1" title="Function to add BVLC support to PDU data and then send a packet out the BACnet/IP socket (Annex J)...">bvlc_send_pdu()</a> should be called; consequently, we just redirect the call to that function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dest</td><td>Destination address (may encode an IP address and port #). </td></tr>
    <tr><td class="paramname">npdu_data</td><td>The NPDU header (Network) information (not used for B/IP). </td></tr>
    <tr><td class="paramname">pdu</td><td>Buffer of data to be sent - may be null (why?). </td></tr>
    <tr><td class="paramname">pdu_len</td><td>Number of bytes in the pdu buffer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes sent on success, negative number on failure. </dd></dl>

<p>Definition at line <a class="el" href="../../dc/d96/bacnet__ip__handler_8cpp_source.html#l01052">1052</a> of file <a class="el" href="../../dc/d96/bacnet__ip__handler_8cpp_source.html">bacnet_ip_handler.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d7/d94/group__bip__interface_gafd95a0bfb0c464bcffdcf6c6476a0859_cgraph.png" border="0" usemap="#d7/d94/group__bip__interface_gafd95a0bfb0c464bcffdcf6c6476a0859_cgraph" alt=""/></div>
<map name="d7/d94/group__bip__interface_gafd95a0bfb0c464bcffdcf6c6476a0859_cgraph" id="d7/d94/group__bip__interface_gafd95a0bfb0c464bcffdcf6c6476a0859_cgraph">
<area shape="rect" id="node2" href="../../d7/d94/group__bip__interface.html#gacf4d82c08beac50cdfa09b5cbbf5bde1" title="Function to add BVLC support to PDU data and then send a packet out the BACnet/IP socket (Annex J)..." alt="" coords="166,100,285,127"/><area shape="rect" id="node3" href="../../d0/d58/classCBacnetIpHandler.html#a151ba4bf21f21396507001987bb82bff" title="The common send function for BVLC functions, using BACnet/IP. " alt="" coords="334,93,509,134"/><area shape="rect" id="node4" href="../../d0/d58/classCBacnetIpHandler.html#a656388fdc68188b1e657f10877a10f9e" title="Send a buffer as a unicast BACnet/IP packet to the given destination address. " alt="" coords="573,27,752,69"/><area shape="rect" id="node7" href="../../d0/d58/classCBacnetIpHandler.html#a54fa5f3a188b958a1f50eb861bda7e01" title="Send a BVLC message (BVLC header + PDU data) to the BBMD. " alt="" coords="575,93,750,134"/><area shape="rect" id="node8" href="../../d0/d58/classCBacnetIpHandler.html#a9de2a4857ee9c38956a9526e506c7a15" title="Broadcast a BACnet/IP packet. " alt="" coords="557,158,768,199"/><area shape="rect" id="node5" href="../../d7/d94/group__bip__interface.html#ga51d8943ac2b970c0e048a4023869f643" title="Returns the current BVLL Function Code we are processing. " alt="" coords="818,5,993,32"/><area shape="rect" id="node6" href="../../d0/d58/classCBacnetIpHandler.html#a88d9352fc35880e6f0f22eac0c64c3be" title="Send a buffer as a unicast BACnet/IP packet specifically to the given destination address..." alt="" coords="816,57,995,98"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga0baed8575113fdd10924e4604cdf5ed3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void eaton_handler_who_has </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>service_request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>service_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BACNET_ADDRESS *&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Our (pre-) handler for Who-Has requests. </p>
<p>Initially used this to change to unicast I-Have responses, but got slapped down by BTL certification tests because the protocol requires the less useful broadcast responses. So no we don't change this to unicast. Our handler here used to intercept the Who-Has request and set the unicast flag in our UDP Listener, so that the result is unicast back. (But not now; just keeping the comments.) Then we call into the library to use the normal Who-Has handler.</p>
<p>For the gateway case, will be called multiple times to check the gateway (root Device) and each virtual routed Device against the range, if given, and respond if it matches. Note: we also use handler_who_has() here instead of handler_who_has_for_routing(), because the apdu_handler loops through all devices and calls this function, and handler_who_has_for_routing() also looped through all devices (if a DNET global or local broadcast) and sent many more than one I-Have per device.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">service_request</td><td>The received message to be handled. </td></tr>
    <tr><td class="paramname">service_len</td><td>Length of the service_request message. </td></tr>
    <tr><td class="paramname">src</td><td>The BACNET_ADDRESS of the message's source. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../dc/d96/bacnet__ip__handler_8cpp_source.html#l01079">1079</a> of file <a class="el" href="../../dc/d96/bacnet__ip__handler_8cpp_source.html">bacnet_ip_handler.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d7/d94/group__bip__interface_ga0baed8575113fdd10924e4604cdf5ed3_icgraph.png" border="0" usemap="#d7/d94/group__bip__interface_ga0baed8575113fdd10924e4604cdf5ed3_icgraph" alt=""/></div>
<map name="d7/d94/group__bip__interface_ga0baed8575113fdd10924e4604cdf5ed3_icgraph" id="d7/d94/group__bip__interface_ga0baed8575113fdd10924e4604cdf5ed3_icgraph">
<area shape="rect" id="node2" href="../../d0/d58/classCBacnetIpHandler.html#a64101e782a5defbbb73b68e0758400db" title="Initialize the service configuration for the bacnet&#45;stack functions. " alt="" coords="232,5,400,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga8be3a0662a9073ed60d6e8cacde64a08"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bvlc_encode_header </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pdu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>pdu_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>message_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Encode the BVLC header. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pdu</td><td>- buffer to store the encoding </td></tr>
    <tr><td class="paramname">pdu_size</td><td>- size of the buffer to store encoding </td></tr>
    <tr><td class="paramname">message_type</td><td>- BVLL Messages </td></tr>
    <tr><td class="paramname">length</td><td>- number of bytes for this message type</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of bytes encoded </dd></dl>

<p>Definition at line <a class="el" href="../../dc/d96/bacnet__ip__handler_8cpp_source.html#l01119">1119</a> of file <a class="el" href="../../dc/d96/bacnet__ip__handler_8cpp_source.html">bacnet_ip_handler.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d7/d94/group__bip__interface_ga8be3a0662a9073ed60d6e8cacde64a08_icgraph.png" border="0" usemap="#d7/d94/group__bip__interface_ga8be3a0662a9073ed60d6e8cacde64a08_icgraph" alt=""/></div>
<map name="d7/d94/group__bip__interface_ga8be3a0662a9073ed60d6e8cacde64a08_icgraph" id="d7/d94/group__bip__interface_ga8be3a0662a9073ed60d6e8cacde64a08_icgraph">
<area shape="rect" id="node2" href="../../d7/d94/group__bip__interface.html#ga98ec5b34574c0c432dea2b5d3f5c08f4" title="J.2.6 Register&#45;Foreign&#45;Device: encode. " alt="" coords="208,34,368,75"/><area shape="rect" id="node3" href="../../d0/d58/classCBacnetIpHandler.html#a2949d8cf1b78dff83c10cc708ae55c1a" title="Register as a Foreign Device with the designated BBMD. " alt="" coords="416,34,613,75"/><area shape="rect" id="node4" href="../../d0/d58/classCBacnetIpHandler.html#a64101e782a5defbbb73b68e0758400db" title="Initialize the service configuration for the bacnet&#45;stack functions. " alt="" coords="677,5,845,46"/><area shape="rect" id="node5" href="../../d0/d58/classCBacnetIpHandler.html#a21f0eab1241ddb158f52ee0ab65e4303" title="Timeout callback invoked when the ASIO timer for BBMD registration expires. " alt="" coords="662,71,861,97"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga98ec5b34574c0c432dea2b5d3f5c08f4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bvlc_encode_register_foreign_device </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pdu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>pdu_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>ttl_seconds</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>J.2.6 Register-Foreign-Device: encode. </p>
<p>This message allows a foreign device, as defined in Clause J.5.1, to register with a BBMD for the purpose of receiving broadcast messages.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pdu</td><td>- buffer to store the encoding </td></tr>
    <tr><td class="paramname">pdu_size</td><td>- size of the buffer to store encoding </td></tr>
    <tr><td class="paramname">ttl_seconds</td><td>- Time-to-Live T, in seconds</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of bytes encoded</dd></dl>
<p>BVLC Type: 1-octet X'81' BVLL for BACnet/IP BVLC Function: 1-octet X'05' Register-Foreign-Device BVLC Length: 2-octets X'0006' Length of the BVLL message Time-to-Live: 2-octets T Time-to-Live T, in seconds </p>

<p>Definition at line <a class="el" href="../../dc/d96/bacnet__ip__handler_8cpp_source.html#l01155">1155</a> of file <a class="el" href="../../dc/d96/bacnet__ip__handler_8cpp_source.html">bacnet_ip_handler.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d7/d94/group__bip__interface_ga98ec5b34574c0c432dea2b5d3f5c08f4_cgraph.png" border="0" usemap="#d7/d94/group__bip__interface_ga98ec5b34574c0c432dea2b5d3f5c08f4_cgraph" alt=""/></div>
<map name="d7/d94/group__bip__interface_ga98ec5b34574c0c432dea2b5d3f5c08f4_cgraph" id="d7/d94/group__bip__interface_ga98ec5b34574c0c432dea2b5d3f5c08f4_cgraph">
<area shape="rect" id="node2" href="../../d7/d94/group__bip__interface.html#ga8be3a0662a9073ed60d6e8cacde64a08" title="Encode the BVLC header. " alt="" coords="213,12,368,39"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d7/d94/group__bip__interface_ga98ec5b34574c0c432dea2b5d3f5c08f4_icgraph.png" border="0" usemap="#d7/d94/group__bip__interface_ga98ec5b34574c0c432dea2b5d3f5c08f4_icgraph" alt=""/></div>
<map name="d7/d94/group__bip__interface_ga98ec5b34574c0c432dea2b5d3f5c08f4_icgraph" id="d7/d94/group__bip__interface_ga98ec5b34574c0c432dea2b5d3f5c08f4_icgraph">
<area shape="rect" id="node2" href="../../d0/d58/classCBacnetIpHandler.html#a2949d8cf1b78dff83c10cc708ae55c1a" title="Register as a Foreign Device with the designated BBMD. " alt="" coords="213,34,411,75"/><area shape="rect" id="node3" href="../../d0/d58/classCBacnetIpHandler.html#a64101e782a5defbbb73b68e0758400db" title="Initialize the service configuration for the bacnet&#45;stack functions. " alt="" coords="475,5,643,46"/><area shape="rect" id="node4" href="../../d0/d58/classCBacnetIpHandler.html#a21f0eab1241ddb158f52ee0ab65e4303" title="Timeout callback invoked when the ASIO timer for BBMD registration expires. " alt="" coords="459,71,658,97"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gacf4d82c08beac50cdfa09b5cbbf5bde1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int bvlc_send_pdu </td>
          <td>(</td>
          <td class="paramtype">BACNET_ADDRESS *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BACNET_NPDU_DATA *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>pdu</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>pdu_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to add BVLC support to PDU data and then send a packet out the BACnet/IP socket (Annex J). </p>
<p>This interface function actually hands the BLVC encoding duties off to the <a class="el" href="../../d0/d58/classCBacnetIpHandler.html#a151ba4bf21f21396507001987bb82bff" title="The common send function for BVLC functions, using BACnet/IP. ">CBacnetIpHandler::bvlc_send_mpdu()</a> function, since the class has a better sense of BBMDs, broadcasts, etc.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dest</td><td>Destination address (may encode an IP address and port #). </td></tr>
    <tr><td class="paramname">npdu_data</td><td>The NPDU header (Network) information (not used for B/IP). </td></tr>
    <tr><td class="paramname">pdu</td><td>Buffer of data to be sent - may be null (why?). </td></tr>
    <tr><td class="paramname">pdu_len</td><td>Number of bytes in the pdu buffer. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes sent on success, negative number on failure. </dd></dl>

<p>Definition at line <a class="el" href="../../dc/d96/bacnet__ip__handler_8cpp_source.html#l01190">1190</a> of file <a class="el" href="../../dc/d96/bacnet__ip__handler_8cpp_source.html">bacnet_ip_handler.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d7/d94/group__bip__interface_gacf4d82c08beac50cdfa09b5cbbf5bde1_cgraph.png" border="0" usemap="#d7/d94/group__bip__interface_gacf4d82c08beac50cdfa09b5cbbf5bde1_cgraph" alt=""/></div>
<map name="d7/d94/group__bip__interface_gacf4d82c08beac50cdfa09b5cbbf5bde1_cgraph" id="d7/d94/group__bip__interface_gacf4d82c08beac50cdfa09b5cbbf5bde1_cgraph">
<area shape="rect" id="node2" href="../../d0/d58/classCBacnetIpHandler.html#a151ba4bf21f21396507001987bb82bff" title="The common send function for BVLC functions, using BACnet/IP. " alt="" coords="174,93,349,134"/><area shape="rect" id="node3" href="../../d0/d58/classCBacnetIpHandler.html#a656388fdc68188b1e657f10877a10f9e" title="Send a buffer as a unicast BACnet/IP packet to the given destination address. " alt="" coords="413,27,592,69"/><area shape="rect" id="node6" href="../../d0/d58/classCBacnetIpHandler.html#a54fa5f3a188b958a1f50eb861bda7e01" title="Send a BVLC message (BVLC header + PDU data) to the BBMD. " alt="" coords="415,93,590,134"/><area shape="rect" id="node7" href="../../d0/d58/classCBacnetIpHandler.html#a9de2a4857ee9c38956a9526e506c7a15" title="Broadcast a BACnet/IP packet. " alt="" coords="397,158,608,199"/><area shape="rect" id="node4" href="../../d7/d94/group__bip__interface.html#ga51d8943ac2b970c0e048a4023869f643" title="Returns the current BVLL Function Code we are processing. " alt="" coords="658,5,833,32"/><area shape="rect" id="node5" href="../../d0/d58/classCBacnetIpHandler.html#a88d9352fc35880e6f0f22eac0c64c3be" title="Send a buffer as a unicast BACnet/IP packet specifically to the given destination address..." alt="" coords="656,57,835,98"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d7/d94/group__bip__interface_gacf4d82c08beac50cdfa09b5cbbf5bde1_icgraph.png" border="0" usemap="#d7/d94/group__bip__interface_gacf4d82c08beac50cdfa09b5cbbf5bde1_icgraph" alt=""/></div>
<map name="d7/d94/group__bip__interface_gacf4d82c08beac50cdfa09b5cbbf5bde1_icgraph" id="d7/d94/group__bip__interface_gacf4d82c08beac50cdfa09b5cbbf5bde1_icgraph">
<area shape="rect" id="node2" href="../../d7/d94/group__bip__interface.html#gafd95a0bfb0c464bcffdcf6c6476a0859" title="Function to send a packet out the BACnet/IP socket (Annex J). " alt="" coords="174,5,285,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga51d8943ac2b970c0e048a4023869f643"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t bvlc_get_function_code </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the current BVLL Function Code we are processing. </p>
<p>We have to store this higher layer code for when the lower layers need to know what it is, especially to differentiate between BVLC_ORIGINAL_UNICAST_NPDU and BVLC_ORIGINAL_BROADCAST_NPDU.</p>
<dl class="section return"><dt>Returns</dt><dd>A BVLC_ code, such as BVLC_ORIGINAL_UNICAST_NPDU. </dd></dl>

<p>Definition at line <a class="el" href="../../dc/d96/bacnet__ip__handler_8cpp_source.html#l01218">1218</a> of file <a class="el" href="../../dc/d96/bacnet__ip__handler_8cpp_source.html">bacnet_ip_handler.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d7/d94/group__bip__interface_ga51d8943ac2b970c0e048a4023869f643_icgraph.png" border="0" usemap="#d7/d94/group__bip__interface_ga51d8943ac2b970c0e048a4023869f643_icgraph" alt=""/></div>
<map name="d7/d94/group__bip__interface_ga51d8943ac2b970c0e048a4023869f643_icgraph" id="d7/d94/group__bip__interface_ga51d8943ac2b970c0e048a4023869f643_icgraph">
<area shape="rect" id="node2" href="../../d0/d58/classCBacnetIpHandler.html#a097e74048a899230e73678aeff18064c" title="Try to parse the buffer, when the CIoTransactor calls us. " alt="" coords="905,5,1087,32"/><area shape="rect" id="node3" href="../../d0/d58/classCBacnetIpHandler.html#a656388fdc68188b1e657f10877a10f9e" title="Send a buffer as a unicast BACnet/IP packet to the given destination address. " alt="" coords="229,27,408,69"/><area shape="rect" id="node4" href="../../d0/d58/classCBacnetIpHandler.html#a2b838b79d6d3eab2ab332e7e91cee129" title="Utility function to just encode and send a BVLC result code. " alt="" coords="457,27,631,69"/><area shape="rect" id="node6" href="../../d0/d58/classCBacnetIpHandler.html#a151ba4bf21f21396507001987bb82bff" title="The common send function for BVLC functions, using BACnet/IP. " alt="" coords="457,93,631,134"/><area shape="rect" id="node5" href="../../d0/d58/classCBacnetIpHandler.html#ac25e8ea63490cc6cafdfc99113c6df90" title="Note any BVLC_RESULT code, or NAK the BVLL message in the unsupported cases. " alt="" coords="681,27,855,69"/><area shape="rect" id="node7" href="../../d7/d94/group__bip__interface.html#gacf4d82c08beac50cdfa09b5cbbf5bde1" title="Function to add BVLC support to PDU data and then send a packet out the BACnet/IP socket (Annex J)..." alt="" coords="709,100,827,127"/><area shape="rect" id="node8" href="../../d7/d94/group__bip__interface.html#gafd95a0bfb0c464bcffdcf6c6476a0859" title="Function to send a packet out the BACnet/IP socket (Annex J). " alt="" coords="941,100,1051,127"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga10ed2cf58c386eefc63eda8f29ba699c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void debug_printf </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>format</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Provide our override of the bacnet-stack's debug print function. </p>
<p>We will use our SVR_INFO at level 5 to see this output. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">format</td><td>Variable length argument list </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../dc/d96/bacnet__ip__handler_8cpp_source.html#l01227">1227</a> of file <a class="el" href="../../dc/d96/bacnet__ip__handler_8cpp_source.html">bacnet_ip_handler.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri May 7 2021 20:25:56 for bacnet_ip by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
