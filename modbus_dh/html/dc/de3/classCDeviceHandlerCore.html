<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>ModbusDeviceHandler: CDeviceHandlerCore Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ModbusDeviceHandler
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="../../inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('dc/de3/classCDeviceHandlerCore.html','../../');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../d5/da9/classCDeviceHandlerCore-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CDeviceHandlerCore Class Reference<div class="ingroups"><a class="el" href="../../d0/da8/group__DH__Startup.html">Device Handler startup details.</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>The Device Handler application's Main loop class in the ASIO framework.  
 <a href="../../dc/de3/classCDeviceHandlerCore.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../df/de5/device__handler__core_8hpp_source.html">device_handler_core.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for CDeviceHandlerCore:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d4a/classCDeviceHandlerCore__inherit__graph.png" border="0" usemap="#CDeviceHandlerCore_inherit__map" alt="Inheritance graph"/></div>
<map name="CDeviceHandlerCore_inherit__map" id="CDeviceHandlerCore_inherit__map">
</map>
</div>
<div class="dynheader">
Collaboration diagram for CDeviceHandlerCore:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d89/classCDeviceHandlerCore__coll__graph.png" border="0" usemap="#CDeviceHandlerCore_coll__map" alt="Collaboration graph"/></div>
<map name="CDeviceHandlerCore_coll__map" id="CDeviceHandlerCore_coll__map">
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d99/structCDeviceHandlerCore_1_1init__err.html">init_err</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Exception: initialization error.  <a href="../../d2/d99/structCDeviceHandlerCore_1_1init__err.html#details">More...</a><br/></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ad1d9155fa72ec7a92a235d54a44e5b48"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de3/classCDeviceHandlerCore.html#ad1d9155fa72ec7a92a235d54a44e5b48">CDeviceHandlerCore</a> (const std::shared_ptr&lt; <a class="el" href="../../dc/d9e/classCOptions.html">COptions</a> &gt; &amp;options, const px::proto::PortProtocolTypes protocol_type)</td></tr>
<tr class="memdesc:ad1d9155fa72ec7a92a235d54a44e5b48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#ad1d9155fa72ec7a92a235d54a44e5b48">More...</a><br/></td></tr>
<tr class="separator:ad1d9155fa72ec7a92a235d54a44e5b48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bdb94ad01350a429e14fe488a649cf8"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de3/classCDeviceHandlerCore.html#a3bdb94ad01350a429e14fe488a649cf8">~CDeviceHandlerCore</a> ()</td></tr>
<tr class="memdesc:a3bdb94ad01350a429e14fe488a649cf8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="#a3bdb94ad01350a429e14fe488a649cf8">More...</a><br/></td></tr>
<tr class="separator:a3bdb94ad01350a429e14fe488a649cf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f61bd2758f039bdf6fd36db67a0f7dd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de3/classCDeviceHandlerCore.html#a2f61bd2758f039bdf6fd36db67a0f7dd">config</a> (const std::shared_ptr&lt; <a class="el" href="../../d5/d0c/structICdsHandle.html">ICdsHandle</a> &gt; &amp;cds_handle, const std::shared_ptr&lt; <a class="el" href="../../dc/d9e/classCOptions.html">COptions</a> &gt; &amp;options)</td></tr>
<tr class="memdesc:a2f61bd2758f039bdf6fd36db67a0f7dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function sets up the configuration for the main loop().  <a href="#a2f61bd2758f039bdf6fd36db67a0f7dd">More...</a><br/></td></tr>
<tr class="separator:a2f61bd2758f039bdf6fd36db67a0f7dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe7d7798169a332459eda64d20b8f186"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de3/classCDeviceHandlerCore.html#abe7d7798169a332459eda64d20b8f186">execute</a> ()</td></tr>
<tr class="memdesc:abe7d7798169a332459eda64d20b8f186"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execute the main loop.  <a href="#abe7d7798169a332459eda64d20b8f186">More...</a><br/></td></tr>
<tr class="separator:abe7d7798169a332459eda64d20b8f186"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f2573aba45f2f904536b3bf7ab99731"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de3/classCDeviceHandlerCore.html#a2f2573aba45f2f904536b3bf7ab99731">shutdown</a> ()</td></tr>
<tr class="memdesc:a2f2573aba45f2f904536b3bf7ab99731"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gracefully shut down the main loop, if we ever exit the <a class="el" href="../../d0/da8/group__DH__Startup.html#ga0ddf1224851353fc92bfbff6f499fa97" title="The program entry point, main(). ">main()</a> loop.  <a href="#a2f2573aba45f2f904536b3bf7ab99731">More...</a><br/></td></tr>
<tr class="separator:a2f2573aba45f2f904536b3bf7ab99731"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a448071f45c94498ef0aaf12ad7c28b"><td class="memItemLeft" align="right" valign="top">px::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de3/classCDeviceHandlerCore.html#a9a448071f45c94498ef0aaf12ad7c28b">app_name</a> ()</td></tr>
<tr class="memdesc:a9a448071f45c94498ef0aaf12ad7c28b"><td class="mdescLeft">&#160;</td><td class="mdescRight">provides a unique app name based off a command prefix and appended port number.  <a href="#a9a448071f45c94498ef0aaf12ad7c28b">More...</a><br/></td></tr>
<tr class="separator:a9a448071f45c94498ef0aaf12ad7c28b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:aa6ef5fef76a7237c82c1b668afe03fc2"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de3/classCDeviceHandlerCore.html#aa6ef5fef76a7237c82c1b668afe03fc2">config_process</a> (const std::shared_ptr&lt; <a class="el" href="../../d5/d0c/structICdsHandle.html">ICdsHandle</a> &gt; &amp;cds_handle, const std::shared_ptr&lt; <a class="el" href="../../dc/d9e/classCOptions.html">COptions</a> &gt; &amp;options)</td></tr>
<tr class="memdesc:aa6ef5fef76a7237c82c1b668afe03fc2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure the options for this process itself.  <a href="#aa6ef5fef76a7237c82c1b668afe03fc2">More...</a><br/></td></tr>
<tr class="separator:aa6ef5fef76a7237c82c1b668afe03fc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80f6504b0cde5dd9218aea33c4799880"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de3/classCDeviceHandlerCore.html#a80f6504b0cde5dd9218aea33c4799880">config_log</a> (const std::shared_ptr&lt; <a class="el" href="../../dc/d9e/classCOptions.html">COptions</a> &gt; &amp;options)</td></tr>
<tr class="memdesc:a80f6504b0cde5dd9218aea33c4799880"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure the syslog debugging options and levels for this application and the libpx library subsystems.  <a href="#a80f6504b0cde5dd9218aea33c4799880">More...</a><br/></td></tr>
<tr class="separator:a80f6504b0cde5dd9218aea33c4799880"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a3678f8b48429330e3f00c5bfdf8e5910"><td class="memItemLeft" align="right" valign="top">px::id_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de3/classCDeviceHandlerCore.html#a3678f8b48429330e3f00c5bfdf8e5910">_pxg_id</a></td></tr>
<tr class="memdesc:a3678f8b48429330e3f00c5bfdf8e5910"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ID of the PXG (gateway device, aka the Publisher).  <a href="#a3678f8b48429330e3f00c5bfdf8e5910">More...</a><br/></td></tr>
<tr class="separator:a3678f8b48429330e3f00c5bfdf8e5910"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a9d793bdad4cbef0b046aa1e297b6327f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de3/classCDeviceHandlerCore.html#a9d793bdad4cbef0b046aa1e297b6327f">create_serial_port</a> (const std::shared_ptr&lt; <a class="el" href="../../d5/d0c/structICdsHandle.html">ICdsHandle</a> &gt; &amp;cds_handle, const std::shared_ptr&lt; <a class="el" href="../../dc/d9e/classCOptions.html">COptions</a> &gt; &amp;options)</td></tr>
<tr class="memdesc:a9d793bdad4cbef0b046aa1e297b6327f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetch port configuration and create serial port object and its devices.  <a href="#a9d793bdad4cbef0b046aa1e297b6327f">More...</a><br/></td></tr>
<tr class="separator:a9d793bdad4cbef0b046aa1e297b6327f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a654b27ee11387b0717381d61da0aa1cc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de3/classCDeviceHandlerCore.html#a654b27ee11387b0717381d61da0aa1cc">create_network_port</a> (const std::shared_ptr&lt; <a class="el" href="../../d5/d0c/structICdsHandle.html">ICdsHandle</a> &gt; &amp;cds_handle, const std::shared_ptr&lt; <a class="el" href="../../dc/d9e/classCOptions.html">COptions</a> &gt; &amp;options)</td></tr>
<tr class="memdesc:a654b27ee11387b0717381d61da0aa1cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetch port configuration and create network port object and its devices.  <a href="#a654b27ee11387b0717381d61da0aa1cc">More...</a><br/></td></tr>
<tr class="separator:a654b27ee11387b0717381d61da0aa1cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:af27d7395383b53976091ede9320bd59c"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="../../dc/d9e/classCOptions.html">COptions</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de3/classCDeviceHandlerCore.html#af27d7395383b53976091ede9320bd59c">_options</a></td></tr>
<tr class="memdesc:af27d7395383b53976091ede9320bd59c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global options (from the command-line)  <a href="#af27d7395383b53976091ede9320bd59c">More...</a><br/></td></tr>
<tr class="separator:af27d7395383b53976091ede9320bd59c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a082e1de944f6b77d33f4ea0bce29a4ca"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="../../d5/d0c/structICdsHandle.html">ICdsHandle</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de3/classCDeviceHandlerCore.html#a082e1de944f6b77d33f4ea0bce29a4ca">_cds_handle</a></td></tr>
<tr class="memdesc:a082e1de944f6b77d33f4ea0bce29a4ca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interface to the Main CDS connection.  <a href="#a082e1de944f6b77d33f4ea0bce29a4ca">More...</a><br/></td></tr>
<tr class="separator:a082e1de944f6b77d33f4ea0bce29a4ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a716aa93bd6c40bc5a7e67f278e6d8251"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="../../de/de0/classCAsioCdsHandle.html">CAsioCdsHandle</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de3/classCDeviceHandlerCore.html#a716aa93bd6c40bc5a7e67f278e6d8251">_cds_asio_handler</a></td></tr>
<tr class="memdesc:a716aa93bd6c40bc5a7e67f278e6d8251"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ASIO handler for subscriptions to and submitting to the CDS.  <a href="#a716aa93bd6c40bc5a7e67f278e6d8251">More...</a><br/></td></tr>
<tr class="separator:a716aa93bd6c40bc5a7e67f278e6d8251"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34560fa2fa592b8c02bdb6d25c6dc004"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="../../d1/dd9/classCEdsSettings.html">CEdsSettings</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de3/classCDeviceHandlerCore.html#a34560fa2fa592b8c02bdb6d25c6dc004">_eds_settings</a></td></tr>
<tr class="memdesc:a34560fa2fa592b8c02bdb6d25c6dc004"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the class that manages EDS settings for all Devices.  <a href="#a34560fa2fa592b8c02bdb6d25c6dc004">More...</a><br/></td></tr>
<tr class="separator:a34560fa2fa592b8c02bdb6d25c6dc004"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade7caa85ca764ebf1ecd98b97baef178"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="../../df/d6f/classCSerialPort.html">CSerialPort</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de3/classCDeviceHandlerCore.html#ade7caa85ca764ebf1ecd98b97baef178">_serial_port</a></td></tr>
<tr class="memdesc:ade7caa85ca764ebf1ecd98b97baef178"><td class="mdescLeft">&#160;</td><td class="mdescRight">The results of fetching px::cds::CGetDevice for the root (the PXG, aka Publisher) and its first level subdevices, the Ports.  <a href="#ade7caa85ca764ebf1ecd98b97baef178">More...</a><br/></td></tr>
<tr class="separator:ade7caa85ca764ebf1ecd98b97baef178"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac1ecc7c454614a0b1fc6764bca53efa"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="../../d6/d71/classCModbusTcpPort.html">CModbusTcpPort</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de3/classCDeviceHandlerCore.html#aac1ecc7c454614a0b1fc6764bca53efa">_network_port</a></td></tr>
<tr class="separator:aac1ecc7c454614a0b1fc6764bca53efa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e6d42a96eb7b6122036900a19e00f6b"><td class="memItemLeft" align="right" valign="top">px::proto::PortProtocolTypes&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/de3/classCDeviceHandlerCore.html#a5e6d42a96eb7b6122036900a19e00f6b">_protocol_type</a></td></tr>
<tr class="separator:a5e6d42a96eb7b6122036900a19e00f6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The Device Handler application's Main loop class in the ASIO framework. </p>
<p>This class is used to handle overall program set-up/shut-down, initialize semi-global objects, and perform the main processing loop.</p>
<p>It implements the functionality defined in the base CServerCore class, and adds application-specific functions and data structures for the DH. </p>

<p>Definition at line <a class="el" href="../../df/de5/device__handler__core_8hpp_source.html#l00033">33</a> of file <a class="el" href="../../df/de5/device__handler__core_8hpp_source.html">device_handler_core.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ad1d9155fa72ec7a92a235d54a44e5b48"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CDeviceHandlerCore::CDeviceHandlerCore </td>
          <td>(</td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="../../dc/d9e/classCOptions.html">COptions</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const px::proto::PortProtocolTypes&#160;</td>
          <td class="paramname"><em>protocol_type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<p>This constructor takes the command-line arguments, daemonizes the server (unless that is not wanted), and prepares the server for normal operation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">options</td><td>The already parsed options from the command line. </td></tr>
    <tr><td class="paramname">protocol_type</td><td>The protocol type for the owning Port device, which applies to all devices polled by this Device Handler instance.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d2/d99/structCDeviceHandlerCore_1_1init__err.html" title="Exception: initialization error. ">init_err</a></td><td>There was a problem initializing the main loop object. This can happen for any number of reasons; more specific information is printed at lower levels, and this error is propagated back to indicate that the caller should exit. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../db/d58/device__handler__core_8cpp_source.html#l00042">42</a> of file <a class="el" href="../../db/d58/device__handler__core_8cpp_source.html">device_handler_core.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a3bdb94ad01350a429e14fe488a649cf8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CDeviceHandlerCore::~CDeviceHandlerCore </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor. </p>

<p>Definition at line <a class="el" href="../../db/d58/device__handler__core_8cpp_source.html#l00054">54</a> of file <a class="el" href="../../db/d58/device__handler__core_8cpp_source.html">device_handler_core.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a2f61bd2758f039bdf6fd36db67a0f7dd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CDeviceHandlerCore::config </td>
          <td>(</td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="../../d5/d0c/structICdsHandle.html">ICdsHandle</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>cds_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="../../dc/d9e/classCOptions.html">COptions</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function sets up the configuration for the main loop(). </p>
<p>It:</p>
<ul>
<li>gets the port device information from the CDS and reads their persistent Out-of-Band (OOB) serial port configuration</li>
<li>gets the device list for each Port from the CDS, with the device configurations, and adds these to the serial port's device list.</li>
</ul>
<p>Split from <a class="el" href="../../dc/de3/classCDeviceHandlerCore.html" title="The Device Handler application&#39;s Main loop class in the ASIO framework. ">CDeviceHandlerCore</a> constructor to facilitate Unit Tests.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cds_handle</td><td>Interface to the Main CDS connection </td></tr>
    <tr><td class="paramname">options</td><td>The parsed options, from which this function gets</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="../../d2/d99/structCDeviceHandlerCore_1_1init__err.html" title="Exception: initialization error. ">init_err</a></td><td>If there was a problem initializing the main loop object. This can happen for any number of reasons; more specific information is printed at lower levels, and this error is propagated back to indicate that the caller should exit. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../db/d58/device__handler__core_8cpp_source.html#l00062">62</a> of file <a class="el" href="../../db/d58/device__handler__core_8cpp_source.html">device_handler_core.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/de3/classCDeviceHandlerCore_a2f61bd2758f039bdf6fd36db67a0f7dd_cgraph.png" border="0" usemap="#dc/de3/classCDeviceHandlerCore_a2f61bd2758f039bdf6fd36db67a0f7dd_cgraph" alt=""/></div>
<map name="dc/de3/classCDeviceHandlerCore_a2f61bd2758f039bdf6fd36db67a0f7dd_cgraph" id="dc/de3/classCDeviceHandlerCore_a2f61bd2758f039bdf6fd36db67a0f7dd_cgraph">
<area shape="rect" id="node2" href="../../dc/de3/classCDeviceHandlerCore.html#a9a448071f45c94498ef0aaf12ad7c28b" title="provides a unique app name based off a command prefix and appended port number. " alt="" coords="221,5,379,46"/><area shape="rect" id="node3" href="../../d2/d7f/classCWaveformService.html#a233e6c355c103f19ea72e416def690f8" title="Setter to configure the waveform export path. " alt="" coords="213,70,387,111"/><area shape="rect" id="node4" href="../../d2/d7f/classCWaveformService.html#ad014506631150056f5ff3165dff1cfe9" title="Setter to configure the path for the waveform state data. " alt="" coords="213,135,387,177"/><area shape="rect" id="node6" href="../../d2/d7f/classCWaveformService.html#a22d54cd96a743ba1a25a7f8350dcb62d" title="Setter to configure the waveform log file capacity. " alt="" coords="213,201,387,242"/><area shape="rect" id="node7" href="../../de/d8a/classCDataBlock.html#a36ea7d05341ecfc4ecd6ec8c02ef0d3e" title="Setter for _polling_algorithm. " alt="" coords="211,266,389,307"/><area shape="rect" id="node8" href="../../d8/dc8/classCIdAllocator.html#af5c83511968f7f494e8d5e411a33f76f" title="Initialize our transient ID area with the high value; subsequent calls to get() will decrement from h..." alt="" coords="235,332,365,359"/><area shape="rect" id="node9" href="../../dc/de3/classCDeviceHandlerCore.html#a9d793bdad4cbef0b046aa1e297b6327f" title="Fetch port configuration and create serial port object and its devices. " alt="" coords="221,434,379,475"/><area shape="rect" id="node16" href="../../dc/de3/classCDeviceHandlerCore.html#a654b27ee11387b0717381d61da0aa1cc" title="Fetch port configuration and create network port object and its devices. " alt="" coords="218,499,382,541"/><area shape="rect" id="node15" href="../../d5/df1/structgeneric__err.html#ae3bee2d13a4c011702e5a9ab4650bc95" title="Implement the virtual function to provide the error&#39;s text. " alt="" coords="450,383,585,409"/><area shape="rect" id="node5" href="../../d3/dd8/classCWaveformState.html#a6f114912f60efab4c7f93bfa5491f108" title="Change storage path. " alt="" coords="437,135,597,177"/><area shape="rect" id="node10" href="../../d4/d89/classCDeviceService.html#a1b69bbf799546fdf546d5f4abc7727ff" title="Member Functions. " alt="" coords="439,434,595,475"/><area shape="rect" id="node14" href="../../dc/de3/classCDeviceHandlerCore.html#aa6ef5fef76a7237c82c1b668afe03fc2" title="Configure the options for this process itself. " alt="" coords="439,499,596,541"/><area shape="rect" id="node11" href="../../dd/d97/classCOobService.html#ae2360b913b6057681fe9ffade5779245" title="Calculate given port&#39;s tag for querying its serial port settings out&#45;of&#45;band info. " alt="" coords="671,441,820,482"/><area shape="rect" id="node12" href="../../dd/d97/classCOobService.html#ab5a3e795bde668e11313709d8006c6f9" title="Member Functions. " alt="" coords="655,375,835,417"/><area shape="rect" id="node13" href="../../dc/d4a/classCUtil.html#ab23b89e75ee52ed0e45e7a188ce3386f" title="CUtil::get_formatted_name" alt="" coords="646,508,845,535"/><area shape="rect" id="node17" href="../../d4/d89/classCDeviceService.html#af99c19cc1643b0c6da156aa46f656c8a" title="Find a Network Port. " alt="" coords="439,565,595,606"/><area shape="rect" id="node18" href="../../dd/d97/classCOobService.html#a2e2adfddff7b666b6997f3e26e75095a" title="Calculate given port&#39;s tag for querying its network port settings out&#45;of&#45;band info. " alt="" coords="662,627,829,669"/><area shape="rect" id="node19" href="../../dd/d97/classCOobService.html#aee7550b9a4277607169cfcbd9a57d201" title="Find network port settings. " alt="" coords="647,562,844,603"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/de3/classCDeviceHandlerCore_a2f61bd2758f039bdf6fd36db67a0f7dd_icgraph.png" border="0" usemap="#dc/de3/classCDeviceHandlerCore_a2f61bd2758f039bdf6fd36db67a0f7dd_icgraph" alt=""/></div>
<map name="dc/de3/classCDeviceHandlerCore_a2f61bd2758f039bdf6fd36db67a0f7dd_icgraph" id="dc/de3/classCDeviceHandlerCore_a2f61bd2758f039bdf6fd36db67a0f7dd_icgraph">
<area shape="rect" id="node2" href="../../d0/da8/group__DH__Startup.html#ga0ddf1224851353fc92bfbff6f499fa97" title="The program entry point, main(). " alt="" coords="211,12,266,39"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abe7d7798169a332459eda64d20b8f186"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CDeviceHandlerCore::execute </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Execute the main loop. </p>
<p>Implements the virtual method from CServerCore.</p>
<p>This performs the "real" (steady-state) work of the server. This call will block indefinitely, and only return when the server has encountered some sort of non-recoverable error, or has been shut down by a user signal.</p>
<p>The operation is</p>
<ul>
<li>Create the Manager for the ASIO framework</li>
<li>Create IO Actors for the Signal Handling and Watchdog, and add them to ASIO</li>
<li>Create an Actor to manage the CDS and add it to ASIO</li>
<li>For each configured Port Device:<ul>
<li>Create the appropriate Serial Port Actor</li>
<li>Add the Port's IO Actor to ASIO and Kick it off</li>
</ul>
</li>
<li>Start ASIO running</li>
<li>If the px::asio::CIoManager::run() loop should ever exit,<ul>
<li>Quit the Manager and exit this main loop. </li>
</ul>
</li>
</ul>

<p>Definition at line <a class="el" href="../../db/d58/device__handler__core_8cpp_source.html#l00396">396</a> of file <a class="el" href="../../db/d58/device__handler__core_8cpp_source.html">device_handler_core.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/de3/classCDeviceHandlerCore_abe7d7798169a332459eda64d20b8f186_icgraph.png" border="0" usemap="#dc/de3/classCDeviceHandlerCore_abe7d7798169a332459eda64d20b8f186_icgraph" alt=""/></div>
<map name="dc/de3/classCDeviceHandlerCore_abe7d7798169a332459eda64d20b8f186_icgraph" id="dc/de3/classCDeviceHandlerCore_abe7d7798169a332459eda64d20b8f186_icgraph">
<area shape="rect" id="node2" href="../../d0/da8/group__DH__Startup.html#ga0ddf1224851353fc92bfbff6f499fa97" title="The program entry point, main(). " alt="" coords="211,12,266,39"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2f2573aba45f2f904536b3bf7ab99731"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CDeviceHandlerCore::shutdown </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gracefully shut down the main loop, if we ever exit the <a class="el" href="../../d0/da8/group__DH__Startup.html#ga0ddf1224851353fc92bfbff6f499fa97" title="The program entry point, main(). ">main()</a> loop. </p>
<p>Implements the virtual method from CServerCore. </p>

<p>Definition at line <a class="el" href="../../db/d58/device__handler__core_8cpp_source.html#l00480">480</a> of file <a class="el" href="../../db/d58/device__handler__core_8cpp_source.html">device_handler_core.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/de3/classCDeviceHandlerCore_a2f2573aba45f2f904536b3bf7ab99731_icgraph.png" border="0" usemap="#dc/de3/classCDeviceHandlerCore_a2f2573aba45f2f904536b3bf7ab99731_icgraph" alt=""/></div>
<map name="dc/de3/classCDeviceHandlerCore_a2f2573aba45f2f904536b3bf7ab99731_icgraph" id="dc/de3/classCDeviceHandlerCore_a2f2573aba45f2f904536b3bf7ab99731_icgraph">
<area shape="rect" id="node2" href="../../d0/da8/group__DH__Startup.html#ga0ddf1224851353fc92bfbff6f499fa97" title="The program entry point, main(). " alt="" coords="211,12,266,39"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa6ef5fef76a7237c82c1b668afe03fc2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CDeviceHandlerCore::config_process </td>
          <td>(</td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="../../d5/d0c/structICdsHandle.html">ICdsHandle</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>cds_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="../../dc/d9e/classCOptions.html">COptions</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Configure the options for this process itself. </p>
<ul>
<li>Drop root priveleges for the application. i.e. Set the process' user ID to prevent bind permission issues.</li>
<li>Set the priority level for the thread(s) used by this application. (In the DH case, this is just the main thread.)</li>
<li>Re-login into the CDS to reset CDS privileges for this process.</li>
</ul>
<p>This is a static function and may be invoked anytime after the options have been parsed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cds_handle</td><td>Interface to the Main CDS connection </td></tr>
    <tr><td class="paramname">options</td><td>The parsed options, from which this function gets the uid and process thread priorities. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../db/d58/device__handler__core_8cpp_source.html#l00147">147</a> of file <a class="el" href="../../db/d58/device__handler__core_8cpp_source.html">device_handler_core.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/de3/classCDeviceHandlerCore_aa6ef5fef76a7237c82c1b668afe03fc2_icgraph.png" border="0" usemap="#dc/de3/classCDeviceHandlerCore_aa6ef5fef76a7237c82c1b668afe03fc2_icgraph" alt=""/></div>
<map name="dc/de3/classCDeviceHandlerCore_aa6ef5fef76a7237c82c1b668afe03fc2_icgraph" id="dc/de3/classCDeviceHandlerCore_aa6ef5fef76a7237c82c1b668afe03fc2_icgraph">
<area shape="rect" id="node2" href="../../dc/de3/classCDeviceHandlerCore.html#a9d793bdad4cbef0b046aa1e297b6327f" title="Fetch port configuration and create serial port object and its devices. " alt="" coords="215,5,372,46"/><area shape="rect" id="node5" href="../../dc/de3/classCDeviceHandlerCore.html#a654b27ee11387b0717381d61da0aa1cc" title="Fetch port configuration and create network port object and its devices. " alt="" coords="211,70,375,111"/><area shape="rect" id="node3" href="../../dc/de3/classCDeviceHandlerCore.html#a2f61bd2758f039bdf6fd36db67a0f7dd" title="This function sets up the configuration for the main loop(). " alt="" coords="424,38,581,79"/><area shape="rect" id="node4" href="../../d0/da8/group__DH__Startup.html#ga0ddf1224851353fc92bfbff6f499fa97" title="The program entry point, main(). " alt="" coords="630,45,685,72"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a80f6504b0cde5dd9218aea33c4799880"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CDeviceHandlerCore::config_log </td>
          <td>(</td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="../../dc/d9e/classCOptions.html">COptions</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>options</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Configure the syslog debugging options and levels for this application and the libpx library subsystems. </p>
<p>Normally outputs to the system's syslog, unless the -Ns option is requested. (Except for DEBUG builds, when this option is turned off.) If not daemonized, will also output to stderr (for development debugging).</p>
<p>This is a static function and may be invoked anytime after the options have been parsed.</p>
<p>The global syslog members may be set or changed: _svr_verb_array[], _libpx_verb_array[], _thr_local_syslog (aka SYSLOG_PTR)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">options</td><td>The parsed options, from which this function gets the requested default and subsystem verbosities. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../db/d58/device__handler__core_8cpp_source.html#l00193">193</a> of file <a class="el" href="../../db/d58/device__handler__core_8cpp_source.html">device_handler_core.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/de3/classCDeviceHandlerCore_a80f6504b0cde5dd9218aea33c4799880_icgraph.png" border="0" usemap="#dc/de3/classCDeviceHandlerCore_a80f6504b0cde5dd9218aea33c4799880_icgraph" alt=""/></div>
<map name="dc/de3/classCDeviceHandlerCore_a80f6504b0cde5dd9218aea33c4799880_icgraph" id="dc/de3/classCDeviceHandlerCore_a80f6504b0cde5dd9218aea33c4799880_icgraph">
<area shape="rect" id="node2" href="../../d0/da8/group__DH__Startup.html#ga0ddf1224851353fc92bfbff6f499fa97" title="The program entry point, main(). " alt="" coords="211,12,266,39"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9a448071f45c94498ef0aaf12ad7c28b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">px::string CDeviceHandlerCore::app_name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>provides a unique app name based off a command prefix and appended port number. </p>

<p>Definition at line <a class="el" href="../../db/d58/device__handler__core_8cpp_source.html#l00030">30</a> of file <a class="el" href="../../db/d58/device__handler__core_8cpp_source.html">device_handler_core.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/de3/classCDeviceHandlerCore_a9a448071f45c94498ef0aaf12ad7c28b_icgraph.png" border="0" usemap="#dc/de3/classCDeviceHandlerCore_a9a448071f45c94498ef0aaf12ad7c28b_icgraph" alt=""/></div>
<map name="dc/de3/classCDeviceHandlerCore_a9a448071f45c94498ef0aaf12ad7c28b_icgraph" id="dc/de3/classCDeviceHandlerCore_a9a448071f45c94498ef0aaf12ad7c28b_icgraph">
<area shape="rect" id="node2" href="../../dc/de3/classCDeviceHandlerCore.html#a2f61bd2758f039bdf6fd36db67a0f7dd" title="This function sets up the configuration for the main loop(). " alt="" coords="211,5,368,46"/><area shape="rect" id="node3" href="../../d0/da8/group__DH__Startup.html#ga0ddf1224851353fc92bfbff6f499fa97" title="The program entry point, main(). " alt="" coords="417,12,471,39"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9d793bdad4cbef0b046aa1e297b6327f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CDeviceHandlerCore::create_serial_port </td>
          <td>(</td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="../../d5/d0c/structICdsHandle.html">ICdsHandle</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>cds_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="../../dc/d9e/classCOptions.html">COptions</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fetch port configuration and create serial port object and its devices. </p>
<ul>
<li>For all the Ports, using <a class="el" href="../../d4/d89/classCDeviceService.html#a1b69bbf799546fdf546d5f4abc7727ff" title="Member Functions. ">CDeviceService::find_serial_port()</a><ul>
<li>gets the device information from the CDS</li>
<li>reads their persistent Out-of-Band (OOB) serial port configuration</li>
</ul>
</li>
<li>For each Port<ul>
<li>Creates the <a class="el" href="../../df/d6f/classCSerialPort.html" title="CSerialPort class. ">CSerialPort</a> instance from the configuration data</li>
<li>Drop root priveleges</li>
<li>Calls initialize_devices() to get the device list for each Port from the CDS and add those devices to the Port's map of devices.</li>
</ul>
</li>
</ul>
<p>The Ports must have been already provided to the CDS, and configured.</p>
<p>Note that the ASIO framework hasn't been activated yet, so there is no communication through the serial port yet.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cds_handle</td><td>Interface to the Main CDS connection </td></tr>
    <tr><td class="paramname">options</td><td>The parsed options, from which this function gets the requested default and subsystem verbosities. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../db/d58/device__handler__core_8cpp_source.html#l00256">256</a> of file <a class="el" href="../../db/d58/device__handler__core_8cpp_source.html">device_handler_core.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/de3/classCDeviceHandlerCore_a9d793bdad4cbef0b046aa1e297b6327f_cgraph.png" border="0" usemap="#dc/de3/classCDeviceHandlerCore_a9d793bdad4cbef0b046aa1e297b6327f_cgraph" alt=""/></div>
<map name="dc/de3/classCDeviceHandlerCore_a9d793bdad4cbef0b046aa1e297b6327f_cgraph" id="dc/de3/classCDeviceHandlerCore_a9d793bdad4cbef0b046aa1e297b6327f_cgraph">
<area shape="rect" id="node2" href="../../d4/d89/classCDeviceService.html#a1b69bbf799546fdf546d5f4abc7727ff" title="Member Functions. " alt="" coords="211,70,367,111"/><area shape="rect" id="node6" href="../../dc/de3/classCDeviceHandlerCore.html#aa6ef5fef76a7237c82c1b668afe03fc2" title="Configure the options for this process itself. " alt="" coords="211,135,368,177"/><area shape="rect" id="node7" href="../../d5/df1/structgeneric__err.html#ae3bee2d13a4c011702e5a9ab4650bc95" title="Implement the virtual function to provide the error&#39;s text. " alt="" coords="222,201,357,228"/><area shape="rect" id="node3" href="../../dd/d97/classCOobService.html#ae2360b913b6057681fe9ffade5779245" title="Calculate given port&#39;s tag for querying its serial port settings out&#45;of&#45;band info. " alt="" coords="441,5,591,46"/><area shape="rect" id="node4" href="../../dd/d97/classCOobService.html#ab5a3e795bde668e11313709d8006c6f9" title="Member Functions. " alt="" coords="426,70,606,111"/><area shape="rect" id="node5" href="../../dc/d4a/classCUtil.html#ab23b89e75ee52ed0e45e7a188ce3386f" title="CUtil::get_formatted_name" alt="" coords="417,136,615,163"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/de3/classCDeviceHandlerCore_a9d793bdad4cbef0b046aa1e297b6327f_icgraph.png" border="0" usemap="#dc/de3/classCDeviceHandlerCore_a9d793bdad4cbef0b046aa1e297b6327f_icgraph" alt=""/></div>
<map name="dc/de3/classCDeviceHandlerCore_a9d793bdad4cbef0b046aa1e297b6327f_icgraph" id="dc/de3/classCDeviceHandlerCore_a9d793bdad4cbef0b046aa1e297b6327f_icgraph">
<area shape="rect" id="node2" href="../../dc/de3/classCDeviceHandlerCore.html#a2f61bd2758f039bdf6fd36db67a0f7dd" title="This function sets up the configuration for the main loop(). " alt="" coords="211,5,368,46"/><area shape="rect" id="node3" href="../../d0/da8/group__DH__Startup.html#ga0ddf1224851353fc92bfbff6f499fa97" title="The program entry point, main(). " alt="" coords="417,12,471,39"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a654b27ee11387b0717381d61da0aa1cc"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool CDeviceHandlerCore::create_network_port </td>
          <td>(</td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="../../d5/d0c/structICdsHandle.html">ICdsHandle</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>cds_handle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::shared_ptr&lt; <a class="el" href="../../dc/d9e/classCOptions.html">COptions</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>options</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Fetch port configuration and create network port object and its devices. </p>
<ul>
<li>For all the Ports, using <a class="el" href="../../d4/d89/classCDeviceService.html#af99c19cc1643b0c6da156aa46f656c8a" title="Find a Network Port. ">CDeviceService::find_network_port()</a><ul>
<li>gets the device information from the CDS</li>
<li>reads their persistent Out-of-Band (OOB) serial port configuration</li>
</ul>
</li>
<li>For each Port<ul>
<li>Creates the CNetworkPort instance from the configuration data</li>
<li>Drop root priveleges</li>
</ul>
</li>
</ul>
<p>The Ports must have been already provided to the CDS, and configured.</p>
<p>Note that the ASIO framework hasn't been activated yet, so there is no communication through the network port yet.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cds_handle</td><td>Interface to the Main CDS connection </td></tr>
    <tr><td class="paramname">options</td><td>The parsed options, from which this function gets the requested default and subsystem verbosities. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../db/d58/device__handler__core_8cpp_source.html#l00338">338</a> of file <a class="el" href="../../db/d58/device__handler__core_8cpp_source.html">device_handler_core.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/de3/classCDeviceHandlerCore_a654b27ee11387b0717381d61da0aa1cc_cgraph.png" border="0" usemap="#dc/de3/classCDeviceHandlerCore_a654b27ee11387b0717381d61da0aa1cc_cgraph" alt=""/></div>
<map name="dc/de3/classCDeviceHandlerCore_a654b27ee11387b0717381d61da0aa1cc_cgraph" id="dc/de3/classCDeviceHandlerCore_a654b27ee11387b0717381d61da0aa1cc_cgraph">
<area shape="rect" id="node2" href="../../d4/d89/classCDeviceService.html#af99c19cc1643b0c6da156aa46f656c8a" title="Find a Network Port. " alt="" coords="219,70,375,111"/><area shape="rect" id="node6" href="../../dc/de3/classCDeviceHandlerCore.html#aa6ef5fef76a7237c82c1b668afe03fc2" title="Configure the options for this process itself. " alt="" coords="219,135,376,177"/><area shape="rect" id="node7" href="../../d5/df1/structgeneric__err.html#ae3bee2d13a4c011702e5a9ab4650bc95" title="Implement the virtual function to provide the error&#39;s text. " alt="" coords="230,201,365,228"/><area shape="rect" id="node3" href="../../dd/d97/classCOobService.html#a2e2adfddff7b666b6997f3e26e75095a" title="Calculate given port&#39;s tag for querying its network port settings out&#45;of&#45;band info. " alt="" coords="441,5,607,46"/><area shape="rect" id="node4" href="../../dd/d97/classCOobService.html#aee7550b9a4277607169cfcbd9a57d201" title="Find network port settings. " alt="" coords="425,70,623,111"/><area shape="rect" id="node5" href="../../dc/d4a/classCUtil.html#ab23b89e75ee52ed0e45e7a188ce3386f" title="CUtil::get_formatted_name" alt="" coords="425,136,623,163"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/de3/classCDeviceHandlerCore_a654b27ee11387b0717381d61da0aa1cc_icgraph.png" border="0" usemap="#dc/de3/classCDeviceHandlerCore_a654b27ee11387b0717381d61da0aa1cc_icgraph" alt=""/></div>
<map name="dc/de3/classCDeviceHandlerCore_a654b27ee11387b0717381d61da0aa1cc_icgraph" id="dc/de3/classCDeviceHandlerCore_a654b27ee11387b0717381d61da0aa1cc_icgraph">
<area shape="rect" id="node2" href="../../dc/de3/classCDeviceHandlerCore.html#a2f61bd2758f039bdf6fd36db67a0f7dd" title="This function sets up the configuration for the main loop(). " alt="" coords="219,5,376,46"/><area shape="rect" id="node3" href="../../d0/da8/group__DH__Startup.html#ga0ddf1224851353fc92bfbff6f499fa97" title="The program entry point, main(). " alt="" coords="425,12,479,39"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a3678f8b48429330e3f00c5bfdf8e5910"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">px::id_t CDeviceHandlerCore::_pxg_id</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The ID of the PXG (gateway device, aka the Publisher). </p>

<p>Definition at line <a class="el" href="../../df/de5/device__handler__core_8hpp_source.html#l00167">167</a> of file <a class="el" href="../../df/de5/device__handler__core_8hpp_source.html">device_handler_core.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="af27d7395383b53976091ede9320bd59c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="../../dc/d9e/classCOptions.html">COptions</a>&gt; CDeviceHandlerCore::_options</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Global options (from the command-line) </p>

<p>Definition at line <a class="el" href="../../df/de5/device__handler__core_8hpp_source.html#l00228">228</a> of file <a class="el" href="../../df/de5/device__handler__core_8hpp_source.html">device_handler_core.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a082e1de944f6b77d33f4ea0bce29a4ca"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="../../d5/d0c/structICdsHandle.html">ICdsHandle</a>&gt; CDeviceHandlerCore::_cds_handle</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Interface to the Main CDS connection. </p>

<p>Definition at line <a class="el" href="../../df/de5/device__handler__core_8hpp_source.html#l00233">233</a> of file <a class="el" href="../../df/de5/device__handler__core_8hpp_source.html">device_handler_core.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a716aa93bd6c40bc5a7e67f278e6d8251"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="../../de/de0/classCAsioCdsHandle.html">CAsioCdsHandle</a>&gt; CDeviceHandlerCore::_cds_asio_handler</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The ASIO handler for subscriptions to and submitting to the CDS. </p>

<p>Definition at line <a class="el" href="../../df/de5/device__handler__core_8hpp_source.html#l00238">238</a> of file <a class="el" href="../../df/de5/device__handler__core_8hpp_source.html">device_handler_core.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a34560fa2fa592b8c02bdb6d25c6dc004"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="../../d1/dd9/classCEdsSettings.html">CEdsSettings</a>&gt; CDeviceHandlerCore::_eds_settings</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Holds the class that manages EDS settings for all Devices. </p>

<p>Definition at line <a class="el" href="../../df/de5/device__handler__core_8hpp_source.html#l00242">242</a> of file <a class="el" href="../../df/de5/device__handler__core_8hpp_source.html">device_handler_core.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ade7caa85ca764ebf1ecd98b97baef178"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="../../df/d6f/classCSerialPort.html">CSerialPort</a>&gt; CDeviceHandlerCore::_serial_port</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The results of fetching px::cds::CGetDevice for the root (the PXG, aka Publisher) and its first level subdevices, the Ports. </p>
<p>The PXG is the one device in the list without a parent. </p>

<p>Definition at line <a class="el" href="../../df/de5/device__handler__core_8hpp_source.html#l00248">248</a> of file <a class="el" href="../../df/de5/device__handler__core_8hpp_source.html">device_handler_core.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="aac1ecc7c454614a0b1fc6764bca53efa"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="../../d6/d71/classCModbusTcpPort.html">CModbusTcpPort</a>&gt; CDeviceHandlerCore::_network_port</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/de5/device__handler__core_8hpp_source.html#l00250">250</a> of file <a class="el" href="../../df/de5/device__handler__core_8hpp_source.html">device_handler_core.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a5e6d42a96eb7b6122036900a19e00f6b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">px::proto::PortProtocolTypes CDeviceHandlerCore::_protocol_type</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/de5/device__handler__core_8hpp_source.html#l00252">252</a> of file <a class="el" href="../../df/de5/device__handler__core_8hpp_source.html">device_handler_core.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/src/product-ref1/px-toolkit/etn_source/modbus_device_handler/include/<a class="el" href="../../df/de5/device__handler__core_8hpp_source.html">device_handler_core.hpp</a></li>
<li>/src/product-ref1/px-toolkit/etn_source/modbus_device_handler/source/<a class="el" href="../../db/d58/device__handler__core_8cpp_source.html">device_handler_core.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dc/de3/classCDeviceHandlerCore.html">CDeviceHandlerCore</a></li>
    <li class="footer">Generated on Fri May 7 2021 20:25:20 for ModbusDeviceHandler by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
