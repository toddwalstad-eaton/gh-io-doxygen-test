<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>ModbusDeviceHandler: CEqValueHandler Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ModbusDeviceHandler
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="../../inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d3/d17/classCEqValueHandler.html','../../');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../d0/d1d/classCEqValueHandler-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CEqValueHandler Class Reference<div class="ingroups"><a class="el" href="../../da/d30/group__Parameters.html">Channel and Internal Parameter details for the device_handler.</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>The Device Handler's implementation of "Translatable" object using CPxValue.  
 <a href="../../d3/d17/classCEqValueHandler.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../d9/d31/eq__value__handler_8hpp_source.html">eq_value_handler.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for CEqValueHandler:</div>
<div class="dyncontent">
<div class="center"><img src="../../dd/def/classCEqValueHandler__inherit__graph.png" border="0" usemap="#CEqValueHandler_inherit__map" alt="Inheritance graph"/></div>
<map name="CEqValueHandler_inherit__map" id="CEqValueHandler_inherit__map">
</map>
</div>
<div class="dynheader">
Collaboration diagram for CEqValueHandler:</div>
<div class="dyncontent">
<div class="center"><img src="../../de/d3b/classCEqValueHandler__coll__graph.png" border="0" usemap="#CEqValueHandler_coll__map" alt="Collaboration graph"/></div>
<map name="CEqValueHandler_coll__map" id="CEqValueHandler_coll__map">
<area shape="rect" id="node3" href="../../d2/d76/classCDevice.html" title="Abstract &quot;Device&quot; class. " alt="" coords="1503,757,1708,1509"/><area shape="rect" id="node4" href="../../d8/d81/structIDataBlockObserver.html" title="Data Block Observer Defines an interface for objects that can be notified on block completion (eg..." alt="" coords="3020,334,3263,602"/><area shape="rect" id="node7" title="STL class. " alt="" coords="507,163,659,255"/><area shape="rect" id="node9" title="STL class. " alt="" coords="1352,171,1480,248"/><area shape="rect" id="node11" title="STL class. " alt="" coords="1819,171,1928,248"/><area shape="rect" id="node14" title="STL class. " alt="" coords="2070,429,2156,507"/><area shape="rect" id="node16" title="STL class. " alt="" coords="2044,6,2183,98"/><area shape="rect" id="node19" title="STL class. " alt="" coords="2311,171,2468,248"/><area shape="rect" id="node24" title="STL class. " alt="" coords="2634,171,2763,248"/><area shape="rect" id="node27" title="STL class. " alt="" coords="2809,163,2996,255"/></map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7de5f03b3b62d19e26d192167f2a0b1c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d17/classCEqValueHandler.html#a7de5f03b3b62d19e26d192167f2a0b1c">CEqValueHandler</a> (<a class="el" href="../../d2/d76/classCDevice.html">CDevice</a> &amp;owner)</td></tr>
<tr class="memdesc:a7de5f03b3b62d19e26d192167f2a0b1c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default Ctor.  <a href="#a7de5f03b3b62d19e26d192167f2a0b1c">More...</a><br/></td></tr>
<tr class="separator:a7de5f03b3b62d19e26d192167f2a0b1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7cdf3fd26f526aa7afa67b2dc75e681"><td class="memItemLeft" align="right" valign="top">value_type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d17/classCEqValueHandler.html#ad7cdf3fd26f526aa7afa67b2dc75e681">get</a> (const px::string &amp;name)</td></tr>
<tr class="memdesc:ad7cdf3fd26f526aa7afa67b2dc75e681"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implementation of the getter for a variable in an equation.  <a href="#ad7cdf3fd26f526aa7afa67b2dc75e681">More...</a><br/></td></tr>
<tr class="separator:ad7cdf3fd26f526aa7afa67b2dc75e681"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bca6f0f6cd650c527f4e62bdac5e2c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d17/classCEqValueHandler.html#a7bca6f0f6cd650c527f4e62bdac5e2c9">set</a> (const px::string &amp;name, value_type val)</td></tr>
<tr class="memdesc:a7bca6f0f6cd650c527f4e62bdac5e2c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Implementation of the setter for a variable in the equation (normally the LHS target, but not limited to that).  <a href="#a7bca6f0f6cd650c527f4e62bdac5e2c9">More...</a><br/></td></tr>
<tr class="separator:a7bca6f0f6cd650c527f4e62bdac5e2c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a008f6575c9e282ca987443c56e2cd6e0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d17/classCEqValueHandler.html#a008f6575c9e282ca987443c56e2cd6e0">preset_param_name</a> (const px::string &amp;param_name)</td></tr>
<tr class="memdesc:a008f6575c9e282ca987443c56e2cd6e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Presets the name of the parameter whose equation is about to be evaluated.  <a href="#a008f6575c9e282ca987443c56e2cd6e0">More...</a><br/></td></tr>
<tr class="separator:a008f6575c9e282ca987443c56e2cd6e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a88372bc4c84f3559e6e56566509edd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d17/classCEqValueHandler.html#a7a88372bc4c84f3559e6e56566509edd">initialize_param_variables</a> (const px::string &amp;param_name, const std::unordered_set&lt; px::string &gt; &amp;variable_names)</td></tr>
<tr class="memdesc:a7a88372bc4c84f3559e6e56566509edd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a parameter's name and the list of variables identified in its equation, create entries in this handler's map for this channel's variables.  <a href="#a7a88372bc4c84f3559e6e56566509edd">More...</a><br/></td></tr>
<tr class="separator:a7a88372bc4c84f3559e6e56566509edd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf927288aad67c4434dfbb77a2168601"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d17/classCEqValueHandler.html#acf927288aad67c4434dfbb77a2168601">reassess_params</a> ()</td></tr>
<tr class="memdesc:acf927288aad67c4434dfbb77a2168601"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check that each entry in our map has a valid ID and type.  <a href="#acf927288aad67c4434dfbb77a2168601">More...</a><br/></td></tr>
<tr class="separator:acf927288aad67c4434dfbb77a2168601"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfb453074a3890ea4e5502f04bcc192a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d17/classCEqValueHandler.html#abfb453074a3890ea4e5502f04bcc192a">change_id</a> (px::id_t old_id, const px::id_t new_id)</td></tr>
<tr class="memdesc:abfb453074a3890ea4e5502f04bcc192a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update channel/parameter/block etc.  <a href="#abfb453074a3890ea4e5502f04bcc192a">More...</a><br/></td></tr>
<tr class="separator:abfb453074a3890ea4e5502f04bcc192a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5deab5f15259b08cbfa2096a6f52bb8f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d17/classCEqValueHandler.html#a5deab5f15259b08cbfa2096a6f52bb8f">remove_param_name</a> (const px::string &amp;param_name)</td></tr>
<tr class="memdesc:a5deab5f15259b08cbfa2096a6f52bb8f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a parameter's name, remove it from the lookup_map.  <a href="#a5deab5f15259b08cbfa2096a6f52bb8f">More...</a><br/></td></tr>
<tr class="separator:a5deab5f15259b08cbfa2096a6f52bb8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a5bbdee3fe21d9f37e9ae5119d6161947"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; px::string, <br class="typebreak"/>
<a class="el" href="../../d9/d31/eq__value__handler_8hpp.html#a6e8d1b429c6e66e11874b1e87c26a9ce">eq_val_info_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d17/classCEqValueHandler.html#a5bbdee3fe21d9f37e9ae5119d6161947">lookup_map</a></td></tr>
<tr class="memdesc:a5bbdee3fe21d9f37e9ae5119d6161947"><td class="mdescLeft">&#160;</td><td class="mdescRight">The map of equation variable names to their parameter lookup information.  <a href="#a5bbdee3fe21d9f37e9ae5119d6161947">More...</a><br/></td></tr>
<tr class="separator:a5bbdee3fe21d9f37e9ae5119d6161947"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a0f48c7d8cb01bc8a0a1fec1bfa4b2ba0"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; px::string, <br class="typebreak"/>
<a class="el" href="../../d9/d31/eq__value__handler_8hpp.html#a6e8d1b429c6e66e11874b1e87c26a9ce">eq_val_info_t</a> &gt;::iterator&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d17/classCEqValueHandler.html#a0f48c7d8cb01bc8a0a1fec1bfa4b2ba0">map_lookup</a> (const px::string &amp;name)</td></tr>
<tr class="memdesc:a0f48c7d8cb01bc8a0a1fec1bfa4b2ba0"><td class="mdescLeft">&#160;</td><td class="mdescRight">QLF to find the named parameter in our map.  <a href="#a0f48c7d8cb01bc8a0a1fec1bfa4b2ba0">More...</a><br/></td></tr>
<tr class="separator:a0f48c7d8cb01bc8a0a1fec1bfa4b2ba0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aff0798fc26527db1fc68b307c3b97c2b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d76/classCDevice.html">CDevice</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d17/classCEqValueHandler.html#aff0798fc26527db1fc68b307c3b97c2b">_owner</a></td></tr>
<tr class="memdesc:aff0798fc26527db1fc68b307c3b97c2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hold a reference to the device that owns us.  <a href="#aff0798fc26527db1fc68b307c3b97c2b">More...</a><br/></td></tr>
<tr class="separator:aff0798fc26527db1fc68b307c3b97c2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6d251eaed44e17b62de1bf75dd9155b"><td class="memItemLeft" align="right" valign="top">px::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d17/classCEqValueHandler.html#af6d251eaed44e17b62de1bf75dd9155b">_param_name</a></td></tr>
<tr class="memdesc:af6d251eaed44e17b62de1bf75dd9155b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the name of the Channel or Internal Parameter whose equation is about to be evaluated.  <a href="#af6d251eaed44e17b62de1bf75dd9155b">More...</a><br/></td></tr>
<tr class="separator:af6d251eaed44e17b62de1bf75dd9155b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The Device Handler's implementation of "Translatable" object using CPxValue. </p>
<p>The genetics of this class are:</p>
<ul>
<li>px::eq::CPxValue (for px::CValue type) supports the operations on the value This is "value_type" for this class</li>
<li><a class="el" href="../../d6/dc1/classCTranslator.html">CTranslator</a> layers on the get/set base operations, using templating, for CPxValue</li>
<li>This class inherits all that and provides a an implementation that "handles" real values for Device Handler Channels and Internal Parameters.</li>
</ul>
<p>For this class to work correctly, we assume that the order of operations is</p>
<ol type="1">
<li>Call set_device_owner() during initialization</li>
<li>For each Channel or Internal Parameter in the EDS during EDS parsing<ol type="a">
<li>Initialize the equation (parse and store) using the trivial px::eq::CValueHandler's initialize_equation()</li>
<li>Call <a class="el" href="../../d3/d17/classCEqValueHandler.html#a7a88372bc4c84f3559e6e56566509edd" title="Given a parameter&#39;s name and the list of variables identified in its equation, create entries in this...">initialize_param_variables()</a> with the list of variable names returned by initialize_equation(). This will make sure the expected DataBlocks, Channels, and Internal Parameters are entered into our map. Note: It is possible that the map entries may be made for parameters when we don't yet know their ID or even type.</li>
</ol>
</li>
<li>Call <a class="el" href="../../d3/d17/classCEqValueHandler.html#acf927288aad67c4434dfbb77a2168601" title="Check that each entry in our map has a valid ID and type. ">reassess_params()</a> to make sure that each map entry has a valid ID and type.</li>
<li>For each Channel or Internal Parameter during Data Block updating,<ol type="a">
<li>Preset the parameter name with <a class="el" href="../../d3/d17/classCEqValueHandler.html#a008f6575c9e282ca987443c56e2cd6e0" title="Presets the name of the parameter whose equation is about to be evaluated. ">preset_param_name()</a></li>
<li>Call equation-&gt;evaluate() with this handler, which will invoke our <a class="el" href="../../d3/d17/classCEqValueHandler.html#ad7cdf3fd26f526aa7afa67b2dc75e681" title="Implementation of the getter for a variable in an equation. ">get()</a> and <a class="el" href="../../d3/d17/classCEqValueHandler.html#a7bca6f0f6cd650c527f4e62bdac5e2c9" title="Implementation of the setter for a variable in the equation (normally the LHS target, but not limited to that). ">set()</a> functions </li>
</ol>
</li>
</ol>

<p>Definition at line <a class="el" href="../../d9/d31/eq__value__handler_8hpp_source.html#l00078">78</a> of file <a class="el" href="../../d9/d31/eq__value__handler_8hpp_source.html">eq_value_handler.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a7de5f03b3b62d19e26d192167f2a0b1c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CEqValueHandler::CEqValueHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d76/classCDevice.html">CDevice</a> &amp;&#160;</td>
          <td class="paramname"><em>owner</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default Ctor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">owner</td><td>Reference to the device that owns this handler. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d9/d31/eq__value__handler_8hpp_source.html#l00085">85</a> of file <a class="el" href="../../d9/d31/eq__value__handler_8hpp_source.html">eq_value_handler.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ad7cdf3fd26f526aa7afa67b2dc75e681"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">px::eq::CTranslator&lt; px::eq::CPxValue &gt;::value_type CEqValueHandler::get </td>
          <td>(</td>
          <td class="paramtype">const px::string &amp;&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Implementation of the getter for a variable in an equation. </p>
<p>Note that "Y" will be renamed to the preset _param_name.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The name of the variable as found in the equation expression by equation parsing. If the variable contains array indexing, that will be part of this name; eg, "xBlock3[2][0..3]"</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">px::eq::not_found</td><td>(derived from <a class="el" href="../../d5/df1/structgeneric__err.html" title="Exception class used to indicate a generic error. ">generic_err</a>) thrown if the requested variable/value is not available for some reason.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The "translatable" value associated with this name </dd></dl>

<p>Definition at line <a class="el" href="../../d4/dfe/eq__value__handler_8cpp_source.html#l00014">14</a> of file <a class="el" href="../../d4/dfe/eq__value__handler_8cpp_source.html">eq_value_handler.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/d17/classCEqValueHandler_ad7cdf3fd26f526aa7afa67b2dc75e681_cgraph.png" border="0" usemap="#d3/d17/classCEqValueHandler_ad7cdf3fd26f526aa7afa67b2dc75e681_cgraph" alt=""/></div>
<map name="d3/d17/classCEqValueHandler_ad7cdf3fd26f526aa7afa67b2dc75e681_cgraph" id="d3/d17/classCEqValueHandler_ad7cdf3fd26f526aa7afa67b2dc75e681_cgraph">
<area shape="rect" id="node2" href="../../d3/d17/classCEqValueHandler.html#a0f48c7d8cb01bc8a0a1fec1bfa4b2ba0" title="QLF to find the named parameter in our map. " alt="" coords="216,5,387,46"/><area shape="rect" id="node3" href="../../d2/d76/classCDevice.html#acace33b057a3e2de57af44f990eca5ef" title="Return current CValue given block ID and translator array index. " alt="" coords="228,135,375,177"/><area shape="rect" id="node7" href="../../d2/d76/classCDevice.html#ad900bffadb42c2749f127f3d0a806140" title="Return current CValue given block ID, translator array index, bit position, and count. " alt="" coords="216,70,387,111"/><area shape="rect" id="node8" href="../../d2/d76/classCDevice.html#a486d83946508c37417397d98ea69df0c" title="Getter to lookup the Channel or Internal Parameter by its ID and return (a copy of) its Value..." alt="" coords="224,201,379,242"/><area shape="rect" id="node4" href="../../d2/d76/classCDevice.html#abac1fe55b006dfb7cf69e1b52cfa0f0e" title="Getter for one DataBlock, from its ID. " alt="" coords="441,128,612,155"/><area shape="rect" id="node5" href="../../d2/d76/classCDevice.html#ab231a1465890affb24529dfe50f6a441" title="Get the parent Port and Device ID tag string (eg, &quot;(p2:d64)&quot; ) for this Device. " alt="" coords="435,179,619,205"/><area shape="rect" id="node6" href="../../d2/d76/classCDevice.html#a5e083835cb8c682687a4c693f76650ee" title="Tells us if this is a subdevice, and can return its instance number. " alt="" coords="443,77,611,104"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7bca6f0f6cd650c527f4e62bdac5e2c9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CEqValueHandler::set </td>
          <td>(</td>
          <td class="paramtype">const px::string &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">value_type&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Implementation of the setter for a variable in the equation (normally the LHS target, but not limited to that). </p>
<p>Note that "Y" will be renamed to the preset _param_name.</p>
<p>This function does not call the CDS to update Channels; the calling function must be responsible for that.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The name of the variable as found in the equation expression by equation parsing. Is commonly "Y" for the LHS target. </td></tr>
    <tr><td class="paramname">val</td><td>The value to assign to this variable, in the translatable dressing.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">px::eq::not_found</td><td>(derived from <a class="el" href="../../d5/df1/structgeneric__err.html" title="Exception class used to indicate a generic error. ">generic_err</a>) thrown if the requested variable being assigned to is unknown or unavailable for some reason. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d4/dfe/eq__value__handler_8cpp_source.html#l00068">68</a> of file <a class="el" href="../../d4/dfe/eq__value__handler_8cpp_source.html">eq_value_handler.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/d17/classCEqValueHandler_a7bca6f0f6cd650c527f4e62bdac5e2c9_cgraph.png" border="0" usemap="#d3/d17/classCEqValueHandler_a7bca6f0f6cd650c527f4e62bdac5e2c9_cgraph" alt=""/></div>
<map name="d3/d17/classCEqValueHandler_a7bca6f0f6cd650c527f4e62bdac5e2c9_cgraph" id="d3/d17/classCEqValueHandler_a7bca6f0f6cd650c527f4e62bdac5e2c9_cgraph">
<area shape="rect" id="node2" href="../../d3/d17/classCEqValueHandler.html#a0f48c7d8cb01bc8a0a1fec1bfa4b2ba0" title="QLF to find the named parameter in our map. " alt="" coords="216,5,387,46"/><area shape="rect" id="node3" href="../../d2/d76/classCDevice.html#ab1872d7ca33aa38e50ea84203bd06f28" title="Setter to lookup the Channel or Internal Parameter by its ID and set the new given Value..." alt="" coords="225,70,378,111"/><area shape="rect" id="node4" href="../../d2/d76/classCDevice.html#ab231a1465890affb24529dfe50f6a441" title="Get the parent Port and Device ID tag string (eg, &quot;(p2:d64)&quot; ) for this Device. " alt="" coords="435,77,619,104"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a008f6575c9e282ca987443c56e2cd6e0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CEqValueHandler::preset_param_name </td>
          <td>(</td>
          <td class="paramtype">const px::string &amp;&#160;</td>
          <td class="paramname"><em>param_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Presets the name of the parameter whose equation is about to be evaluated. </p>
<p>This is necessary because the <a class="el" href="../../d3/d17/classCEqValueHandler.html#a7bca6f0f6cd650c527f4e62bdac5e2c9" title="Implementation of the setter for a variable in the equation (normally the LHS target, but not limited to that). ">set()</a> function for the LHS of the equation will almost always be for "Y", and because this handler applies to all parameters, we have to give it this "hint" about what parameter "Y" will mean when <a class="el" href="../../d3/d17/classCEqValueHandler.html#a7bca6f0f6cd650c527f4e62bdac5e2c9" title="Implementation of the setter for a variable in the equation (normally the LHS target, but not limited to that). ">set()</a> is invoked.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">param_name</td><td>The name of the Channel or Internal Parameter whose equation is about to be evaluated. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d9/d31/eq__value__handler_8hpp_source.html#l00190">190</a> of file <a class="el" href="../../d9/d31/eq__value__handler_8hpp_source.html">eq_value_handler.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a7a88372bc4c84f3559e6e56566509edd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CEqValueHandler::initialize_param_variables </td>
          <td>(</td>
          <td class="paramtype">const px::string &amp;&#160;</td>
          <td class="paramname"><em>param_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::unordered_set&lt; px::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>variable_names</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given a parameter's name and the list of variables identified in its equation, create entries in this handler's map for this channel's variables. </p>
<p>Note that xBlock expressions like xBlock3[2][0..3] will be provided in that full form and an entry with that "name" will be added to the map.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">param_name</td><td>The name of the parameter; we will replace "Y" in the variable_names list with this proper name. </td></tr>
    <tr><td class="paramname">variable_names</td><td>The list of one of more names of variable terms found in the equation when it was parsed. One of those is normally "Y" for the result; we will use param_name instead for that term. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if all terms map to Channels, Internal Parameters, or Data Blocks found in the Device's maps. </dd></dl>

<p>Definition at line <a class="el" href="../../d4/dfe/eq__value__handler_8cpp_source.html#l00144">144</a> of file <a class="el" href="../../d4/dfe/eq__value__handler_8cpp_source.html">eq_value_handler.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/d17/classCEqValueHandler_a7a88372bc4c84f3559e6e56566509edd_cgraph.png" border="0" usemap="#d3/d17/classCEqValueHandler_a7a88372bc4c84f3559e6e56566509edd_cgraph" alt=""/></div>
<map name="d3/d17/classCEqValueHandler_a7a88372bc4c84f3559e6e56566509edd_cgraph" id="d3/d17/classCEqValueHandler_a7a88372bc4c84f3559e6e56566509edd_cgraph">
<area shape="rect" id="node2" href="../../d2/d76/classCDevice.html#ad0783774160105570e1e603739587d6f" title="Do a reverse lookup of an object (any of our ID&#39;d types), given its name. " alt="" coords="253,31,448,57"/><area shape="rect" id="node5" href="../../df/d2c/classCParam.html#acc84df2e41c78a746f93c219d7653854" title="Parse the data block information from the expression. " alt="" coords="275,82,427,123"/><area shape="rect" id="node3" href="../../d2/d76/classCDevice.html#ab231a1465890affb24529dfe50f6a441" title="Get the parent Port and Device ID tag string (eg, &quot;(p2:d64)&quot; ) for this Device. " alt="" coords="733,5,917,32"/><area shape="rect" id="node4" href="../../d2/d76/classCDevice.html#a1d10d2d6c59281c8d482206838643681" title="Do a reverse lookup of an xBlock, given its name. " alt="" coords="496,31,685,57"/><area shape="rect" id="node6" href="../../df/d2c/classCParam.html#af2afa9599bc58b2b650e78270469f037" title="Parse the numeric value or range inside the brackets. " alt="" coords="499,82,682,123"/><area shape="rect" id="node7" href="../../d2/d76/classCDevice.html#abea6f7065a039b545669d96f00247929" title="Do a reverse lookup of an xBlock, given its name. " alt="" coords="513,147,669,189"/><area shape="rect" id="node8" href="../../d2/d76/classCDevice.html#a5e083835cb8c682687a4c693f76650ee" title="Tells us if this is a subdevice, and can return its instance number. " alt="" coords="741,155,909,181"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="acf927288aad67c4434dfbb77a2168601"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CEqValueHandler::reassess_params </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check that each entry in our map has a valid ID and type. </p>
<p>If the device doesn't know about an entry, remove it from our map. By the end of this, then, all map entries should reference valid DataBlocks, Channels, and Internal Parameters. </p>

<p>Definition at line <a class="el" href="../../d4/dfe/eq__value__handler_8cpp_source.html#l00204">204</a> of file <a class="el" href="../../d4/dfe/eq__value__handler_8cpp_source.html">eq_value_handler.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/d17/classCEqValueHandler_acf927288aad67c4434dfbb77a2168601_cgraph.png" border="0" usemap="#d3/d17/classCEqValueHandler_acf927288aad67c4434dfbb77a2168601_cgraph" alt=""/></div>
<map name="d3/d17/classCEqValueHandler_acf927288aad67c4434dfbb77a2168601_cgraph" id="d3/d17/classCEqValueHandler_acf927288aad67c4434dfbb77a2168601_cgraph">
<area shape="rect" id="node2" href="../../d2/d76/classCDevice.html#ad0783774160105570e1e603739587d6f" title="Do a reverse lookup of an object (any of our ID&#39;d types), given its name. " alt="" coords="253,12,448,39"/><area shape="rect" id="node3" href="../../d2/d76/classCDevice.html#ab231a1465890affb24529dfe50f6a441" title="Get the parent Port and Device ID tag string (eg, &quot;(p2:d64)&quot; ) for this Device. " alt="" coords="733,12,917,39"/><area shape="rect" id="node4" href="../../d2/d76/classCDevice.html#a1d10d2d6c59281c8d482206838643681" title="Do a reverse lookup of an xBlock, given its name. " alt="" coords="496,37,685,64"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="abfb453074a3890ea4e5502f04bcc192a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CEqValueHandler::change_id </td>
          <td>(</td>
          <td class="paramtype">px::id_t&#160;</td>
          <td class="paramname"><em>old_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const px::id_t&#160;</td>
          <td class="paramname"><em>new_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update channel/parameter/block etc. </p>
<p>ID from old to new </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">old_id</td><td>Previous ID </td></tr>
    <tr><td class="paramname">new_id</td><td>New ID </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d4/dfe/eq__value__handler_8cpp_source.html#l00232">232</a> of file <a class="el" href="../../d4/dfe/eq__value__handler_8cpp_source.html">eq_value_handler.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a5deab5f15259b08cbfa2096a6f52bb8f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CEqValueHandler::remove_param_name </td>
          <td>(</td>
          <td class="paramtype">const px::string &amp;&#160;</td>
          <td class="paramname"><em>param_name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given a parameter's name, remove it from the lookup_map. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">param_name</td><td>The name of the Channel or Internal Parameter to be removed. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d4/dfe/eq__value__handler_8cpp_source.html#l00245">245</a> of file <a class="el" href="../../d4/dfe/eq__value__handler_8cpp_source.html">eq_value_handler.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a0f48c7d8cb01bc8a0a1fec1bfa4b2ba0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt; px::string, <a class="el" href="../../d9/d31/eq__value__handler_8hpp.html#a6e8d1b429c6e66e11874b1e87c26a9ce">eq_val_info_t</a> &gt;::iterator CEqValueHandler::map_lookup </td>
          <td>(</td>
          <td class="paramtype">const px::string &amp;&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>QLF to find the named parameter in our map. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The name of the variable to lookup. If it is "Y", the preset _param_name will be used instead.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>iterator that points to this parameter's map entry.</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">px::eq::not_found</td><td>(derived from <a class="el" href="../../d5/df1/structgeneric__err.html" title="Exception class used to indicate a generic error. ">generic_err</a>) thrown if the requested variable is unknown or unavailable for some reason. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d4/dfe/eq__value__handler_8cpp_source.html#l00107">107</a> of file <a class="el" href="../../d4/dfe/eq__value__handler_8cpp_source.html">eq_value_handler.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/d17/classCEqValueHandler_a0f48c7d8cb01bc8a0a1fec1bfa4b2ba0_icgraph.png" border="0" usemap="#d3/d17/classCEqValueHandler_a0f48c7d8cb01bc8a0a1fec1bfa4b2ba0_icgraph" alt=""/></div>
<map name="d3/d17/classCEqValueHandler_a0f48c7d8cb01bc8a0a1fec1bfa4b2ba0_icgraph" id="d3/d17/classCEqValueHandler_a0f48c7d8cb01bc8a0a1fec1bfa4b2ba0_icgraph">
<area shape="rect" id="node2" href="../../d3/d17/classCEqValueHandler.html#ad7cdf3fd26f526aa7afa67b2dc75e681" title="Implementation of the getter for a variable in an equation. " alt="" coords="224,5,387,32"/><area shape="rect" id="node3" href="../../d3/d17/classCEqValueHandler.html#a7bca6f0f6cd650c527f4e62bdac5e2c9" title="Implementation of the setter for a variable in the equation (normally the LHS target, but not limited to that). " alt="" coords="224,56,387,83"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a5bbdee3fe21d9f37e9ae5119d6161947"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;px::string, <a class="el" href="../../d9/d31/eq__value__handler_8hpp.html#a6e8d1b429c6e66e11874b1e87c26a9ce">eq_val_info_t</a>&gt; CEqValueHandler::lookup_map</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The map of equation variable names to their parameter lookup information. </p>

<p>Definition at line <a class="el" href="../../d9/d31/eq__value__handler_8hpp_source.html#l00165">165</a> of file <a class="el" href="../../d9/d31/eq__value__handler_8hpp_source.html">eq_value_handler.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="aff0798fc26527db1fc68b307c3b97c2b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d76/classCDevice.html">CDevice</a>&amp; CEqValueHandler::_owner</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Hold a reference to the device that owns us. </p>

<p>Definition at line <a class="el" href="../../d9/d31/eq__value__handler_8hpp_source.html#l00182">182</a> of file <a class="el" href="../../d9/d31/eq__value__handler_8hpp_source.html">eq_value_handler.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="af6d251eaed44e17b62de1bf75dd9155b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">px::string CEqValueHandler::_param_name</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Holds the name of the Channel or Internal Parameter whose equation is about to be evaluated. </p>

<p>Definition at line <a class="el" href="../../d9/d31/eq__value__handler_8hpp_source.html#l00186">186</a> of file <a class="el" href="../../d9/d31/eq__value__handler_8hpp_source.html">eq_value_handler.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/src/product-ref1/px-toolkit/etn_source/modbus_device_handler/include/channel/<a class="el" href="../../d9/d31/eq__value__handler_8hpp_source.html">eq_value_handler.hpp</a></li>
<li>/src/product-ref1/px-toolkit/etn_source/modbus_device_handler/source/channel/<a class="el" href="../../d4/dfe/eq__value__handler_8cpp_source.html">eq_value_handler.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d3/d17/classCEqValueHandler.html">CEqValueHandler</a></li>
    <li class="footer">Generated on Fri May 7 2021 20:25:20 for ModbusDeviceHandler by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
