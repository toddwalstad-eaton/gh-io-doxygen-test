<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>cds_ng: CDataStore Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">cds_ng
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classCDataStore.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classCDataStore-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CDataStore Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Top-level class containing all internal data.  
 <a href="classCDataStore.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="datastore_8hpp_source.html">datastore.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for CDataStore:</div>
<div class="dyncontent">
<div class="center"><img src="classCDataStore__coll__graph.png" border="0" usemap="#CDataStore_coll__map" alt="Collaboration graph"/></div>
<map name="CDataStore_coll__map" id="CDataStore_coll__map">
<area shape="rect" id="node2" href="classCOpenAlarmsStore.html" title="For open alarms, we need to maintain a few parallel data structures, so to make sure they stay in syn..." alt="" coords="970,200,1115,227"/><area shape="rect" id="node5" title="STL class. " alt="" coords="6,31,189,57"/><area shape="rect" id="node7" title="STL class. " alt="" coords="30,361,165,388"/><area shape="rect" id="node9" title="STL class. " alt="" coords="21,849,173,890"/><area shape="rect" id="node14" title="STL class. " alt="" coords="491,1409,648,1436"/></map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ac5e0ebd06de1104e03bcfd70e829277c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac5e0ebd06de1104e03bcfd70e829277c"></a>
typedef std::unordered_map<br class="typebreak"/>
&lt; uint64_t, px::cds::ClientID &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#ac5e0ebd06de1104e03bcfd70e829277c">sub_map_t</a></td></tr>
<tr class="memdesc:ac5e0ebd06de1104e03bcfd70e829277c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Define a type for a container of subscription ids to a known connection. <br/></td></tr>
<tr class="separator:ac5e0ebd06de1104e03bcfd70e829277c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aea7b00a9fd741f4dd16f7333c3478997"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#aea7b00a9fd741f4dd16f7333c3478997">CDataStore</a> (std::unique_ptr&lt; <a class="el" href="classCOptions.html">COptions</a> &gt; &amp;&amp;opt)</td></tr>
<tr class="memdesc:aea7b00a9fd741f4dd16f7333c3478997"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#aea7b00a9fd741f4dd16f7333c3478997">More...</a><br/></td></tr>
<tr class="separator:aea7b00a9fd741f4dd16f7333c3478997"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35b18abf3cb4704e6139e0eea4e9f920"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a35b18abf3cb4704e6139e0eea4e9f920"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a35b18abf3cb4704e6139e0eea4e9f920">~CDataStore</a> ()</td></tr>
<tr class="memdesc:a35b18abf3cb4704e6139e0eea4e9f920"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor. <br/></td></tr>
<tr class="separator:a35b18abf3cb4704e6139e0eea4e9f920"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af96b836a3d210927a3aed067f4f29d42"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#af96b836a3d210927a3aed067f4f29d42">load</a> ()</td></tr>
<tr class="memdesc:af96b836a3d210927a3aed067f4f29d42"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load data from our persistent databases.  <a href="#af96b836a3d210927a3aed067f4f29d42">More...</a><br/></td></tr>
<tr class="separator:af96b836a3d210927a3aed067f4f29d42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9844576c8158c61860f3451889dcf0d"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="classCThreadHandle.html">CThreadHandle</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#ab9844576c8158c61860f3451889dcf0d">thread_handles</a> () const </td></tr>
<tr class="memdesc:ab9844576c8158c61860f3451889dcf0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a collection of handles to each of the threads owned by the data store.  <a href="#ab9844576c8158c61860f3451889dcf0d">More...</a><br/></td></tr>
<tr class="separator:ab9844576c8158c61860f3451889dcf0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9db661585d83713da08b964f3fad909"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac9db661585d83713da08b964f3fad909"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#ac9db661585d83713da08b964f3fad909">shutdown</a> ()</td></tr>
<tr class="memdesc:ac9db661585d83713da08b964f3fad909"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gracefully shut down the datastore. <br/></td></tr>
<tr class="separator:ac9db661585d83713da08b964f3fad909"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9e5d820403fcccc09ef6075e9913533"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#ab9e5d820403fcccc09ef6075e9913533">fill_out_devices</a> (px::CChannelSelector &amp;sel) const </td></tr>
<tr class="memdesc:ab9e5d820403fcccc09ef6075e9913533"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a ChannelSelector, expand any recursion to produce a list of devices.  <a href="#ab9e5d820403fcccc09ef6075e9913533">More...</a><br/></td></tr>
<tr class="separator:ab9e5d820403fcccc09ef6075e9913533"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a187a70e279c4d40964bc77e0ef85cbf8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a187a70e279c4d40964bc77e0ef85cbf8"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a187a70e279c4d40964bc77e0ef85cbf8">fill_out_channels</a> (px::CChannelSelector &amp;sel, const bool only_trended, const bool fill_datatype, std::unordered_map&lt; uint32_t, px::datatype &gt; &amp;sel_channels) const </td></tr>
<tr class="memdesc:a187a70e279c4d40964bc77e0ef85cbf8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a ChannelSelector, fill out its "channels" member to list all channels to which it applies, as well as the value types (if need to fill in) Not safe to call in background threads. <br/></td></tr>
<tr class="separator:a187a70e279c4d40964bc77e0ef85cbf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe17072e899971b70835d157d7bfd7d3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afe17072e899971b70835d157d7bfd7d3"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#afe17072e899971b70835d157d7bfd7d3">get_trended_channels</a> (std::unordered_set&lt; uint32_t &gt; &amp;trended_channels) const </td></tr>
<tr class="memdesc:afe17072e899971b70835d157d7bfd7d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the complete list of trended channels. <br/></td></tr>
<tr class="separator:afe17072e899971b70835d157d7bfd7d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad803f5625a1b6dc4f18188302d67da02"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#ad803f5625a1b6dc4f18188302d67da02">is_channel_covered</a> (const px::CChannelSelector &amp;sel, px::id_t chan) const </td></tr>
<tr class="memdesc:ad803f5625a1b6dc4f18188302d67da02"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a ChannelSelector and a channel ID, determine if the channel is included in the selector.  <a href="#ad803f5625a1b6dc4f18188302d67da02">More...</a><br/></td></tr>
<tr class="separator:ad803f5625a1b6dc4f18188302d67da02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b563ad14fcb9ca6024268f866a152bb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a7b563ad14fcb9ca6024268f866a152bb">is_device_covered</a> (const px::CChannelSelector &amp;sel, px::id_t dev) const </td></tr>
<tr class="memdesc:a7b563ad14fcb9ca6024268f866a152bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a ChannelSelector and a device ID, determine if the device is included in the selector.  <a href="#a7b563ad14fcb9ca6024268f866a152bb">More...</a><br/></td></tr>
<tr class="separator:a7b563ad14fcb9ca6024268f866a152bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89947a2a75807e12d1b4c6807665d664"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a89947a2a75807e12d1b4c6807665d664">is_device_or_channel_covered</a> (const px::CChannelSelector &amp;sel, px::id_t id) const </td></tr>
<tr class="memdesc:a89947a2a75807e12d1b4c6807665d664"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a ChannelSelector and an ID that might be a device or channel, determine if it is included in the selector.  <a href="#a89947a2a75807e12d1b4c6807665d664">More...</a><br/></td></tr>
<tr class="separator:a89947a2a75807e12d1b4c6807665d664"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acaac434f640ff145e7922608a143f4f3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#acaac434f640ff145e7922608a143f4f3">get_oob</a> (const px::string &amp;tag, px::proto::toolkitStruct &amp;out) const </td></tr>
<tr class="memdesc:acaac434f640ff145e7922608a143f4f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the OOB object with the given tag.  <a href="#acaac434f640ff145e7922608a143f4f3">More...</a><br/></td></tr>
<tr class="separator:acaac434f640ff145e7922608a143f4f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58b4f707eb1f35bcbf9129e834c0911a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a58b4f707eb1f35bcbf9129e834c0911a">set_oob</a> (const px::string &amp;tag, const px::proto::toolkitStruct &amp;<a class="el" href="classCDataStore.html#aadaa120cad52e94ee81814ee1e2bae96">oob</a>)</td></tr>
<tr class="memdesc:a58b4f707eb1f35bcbf9129e834c0911a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the OOB object with the given tag.  <a href="#a58b4f707eb1f35bcbf9129e834c0911a">More...</a><br/></td></tr>
<tr class="separator:a58b4f707eb1f35bcbf9129e834c0911a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b0f669822decb22309a62b0a5768d1d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a3b0f669822decb22309a62b0a5768d1d">clear_oob</a> (const px::string &amp;tag)</td></tr>
<tr class="memdesc:a3b0f669822decb22309a62b0a5768d1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear the OOB object with the given tag.  <a href="#a3b0f669822decb22309a62b0a5768d1d">More...</a><br/></td></tr>
<tr class="separator:a3b0f669822decb22309a62b0a5768d1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a789edb5cdf049d1974038d9cd6849e9f"><td class="memItemLeft" align="right" valign="top">std::unordered_set&lt; px::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a789edb5cdf049d1974038d9cd6849e9f">get_oob_tags</a> (const px::CBitset&lt; px::permissions &gt; &amp;perms) const </td></tr>
<tr class="memdesc:a789edb5cdf049d1974038d9cd6849e9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return list of OOB tags.  <a href="#a789edb5cdf049d1974038d9cd6849e9f">More...</a><br/></td></tr>
<tr class="separator:a789edb5cdf049d1974038d9cd6849e9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a971be932eb2ad2f91a932e5c95bd5084"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a971be932eb2ad2f91a932e5c95bd5084"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a971be932eb2ad2f91a932e5c95bd5084">prune_subscriptions</a> ()</td></tr>
<tr class="memdesc:a971be932eb2ad2f91a932e5c95bd5084"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove any subscriptions from disconnected clients and/or invalid sessions. <br/></td></tr>
<tr class="separator:a971be932eb2ad2f91a932e5c95bd5084"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81250a99b8f3899d7ddd92eb59c29d3d"><td class="memItemLeft" align="right" valign="top">px::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a81250a99b8f3899d7ddd92eb59c29d3d">get_str_val</a> (const px::CAlarmUpdate &amp;alarm)</td></tr>
<tr class="memdesc:a81250a99b8f3899d7ddd92eb59c29d3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the str_val for this alarm.  <a href="#a81250a99b8f3899d7ddd92eb59c29d3d">More...</a><br/></td></tr>
<tr class="separator:a81250a99b8f3899d7ddd92eb59c29d3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:ae4660006fa1f7ce0dbaac7e9505830f2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae4660006fa1f7ce0dbaac7e9505830f2"></a>
std::unique_ptr&lt; <a class="el" href="classCOptions.html">COptions</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#ae4660006fa1f7ce0dbaac7e9505830f2">options</a></td></tr>
<tr class="memdesc:ae4660006fa1f7ce0dbaac7e9505830f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Global options (from the command-line) <br/></td></tr>
<tr class="separator:ae4660006fa1f7ce0dbaac7e9505830f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6951241f2acc2307a967b65556c22781"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6951241f2acc2307a967b65556c22781"></a>
std::map&lt; px::id_t, px::CDevice &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a6951241f2acc2307a967b65556c22781">devices</a></td></tr>
<tr class="memdesc:a6951241f2acc2307a967b65556c22781"><td class="mdescLeft">&#160;</td><td class="mdescRight">In-memory data: Device list. <br/></td></tr>
<tr class="separator:a6951241f2acc2307a967b65556c22781"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaec749149c5d038b39b09939f0d609e5"><td class="memItemLeft" align="right" valign="top">px::id_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#aaec749149c5d038b39b09939f0d609e5">publisher_id</a></td></tr>
<tr class="memdesc:aaec749149c5d038b39b09939f0d609e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Id of the "publisher" entry in the above device list.  <a href="#aaec749149c5d038b39b09939f0d609e5">More...</a><br/></td></tr>
<tr class="separator:aaec749149c5d038b39b09939f0d609e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47862a244b791871bda9afebe014675c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a47862a244b791871bda9afebe014675c"></a>
std::map&lt; px::id_t, px::CChannel &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a47862a244b791871bda9afebe014675c">channels</a></td></tr>
<tr class="memdesc:a47862a244b791871bda9afebe014675c"><td class="mdescLeft">&#160;</td><td class="mdescRight">In-memory data: Channel list. <br/></td></tr>
<tr class="separator:a47862a244b791871bda9afebe014675c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade2681fd84bdb2e4a562d66a626d5990"><td class="memItemLeft" align="right" valign="top">std::unordered_set&lt; px::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#ade2681fd84bdb2e4a562d66a626d5990">volatile_oob_tags</a></td></tr>
<tr class="memdesc:ade2681fd84bdb2e4a562d66a626d5990"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of OOB tags that exist in memory that have never been persisted.  <a href="#ade2681fd84bdb2e4a562d66a626d5990">More...</a><br/></td></tr>
<tr class="separator:ade2681fd84bdb2e4a562d66a626d5990"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1b7a2f22d96785628166b5db25a6b53"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae1b7a2f22d96785628166b5db25a6b53"></a>
px::db::CKeyValueStore *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#ae1b7a2f22d96785628166b5db25a6b53">mcl_db</a></td></tr>
<tr class="memdesc:ae1b7a2f22d96785628166b5db25a6b53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Key-Value-store MCL database handles. <br/></td></tr>
<tr class="separator:ae1b7a2f22d96785628166b5db25a6b53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae11f9069a6ed08d697dbad91954fef5a"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae11f9069a6ed08d697dbad91954fef5a"></a>
px::db::CKeyValueStore *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#ae11f9069a6ed08d697dbad91954fef5a">id_db</a></td></tr>
<tr class="memdesc:ae11f9069a6ed08d697dbad91954fef5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Key-Value-store id database handles TODO: why a separate ID database (JLN) <br/></td></tr>
<tr class="separator:ae11f9069a6ed08d697dbad91954fef5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f3936f038fe599276779ee2998c3bbb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1f3936f038fe599276779ee2998c3bbb"></a>
px::db::CKeyValueStore *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a1f3936f038fe599276779ee2998c3bbb">alarm_db</a></td></tr>
<tr class="memdesc:a1f3936f038fe599276779ee2998c3bbb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Key-Value-store alarm history. <br/></td></tr>
<tr class="separator:a1f3936f038fe599276779ee2998c3bbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49f82ca96c5ccb93d2b608d06974aaed"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a49f82ca96c5ccb93d2b608d06974aaed"></a>
px::db::CKeyValueStore *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a49f82ca96c5ccb93d2b608d06974aaed">alarm_index_db</a></td></tr>
<tr class="memdesc:a49f82ca96c5ccb93d2b608d06974aaed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Key-Value-store alarm index (contains no new info, only info to help in querying the alarm DB by criteria other than global count) <br/></td></tr>
<tr class="separator:a49f82ca96c5ccb93d2b608d06974aaed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a848f214dcf198acf99012da3637ec873"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a848f214dcf198acf99012da3637ec873"></a>
std::shared_ptr&lt; <a class="el" href="classCTrendStore.html">CTrendStore</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a848f214dcf198acf99012da3637ec873">trend_store</a></td></tr>
<tr class="memdesc:a848f214dcf198acf99012da3637ec873"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manages all trends stage and bucket databases. <br/></td></tr>
<tr class="separator:a848f214dcf198acf99012da3637ec873"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6938f4c80766d3e2348d9cdf75c83a91"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6938f4c80766d3e2348d9cdf75c83a91"></a>
<a class="el" href="classCOpenAlarmsStore.html">COpenAlarmsStore</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a6938f4c80766d3e2348d9cdf75c83a91">open_alarms_store</a></td></tr>
<tr class="memdesc:a6938f4c80766d3e2348d9cdf75c83a91"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manages list of open alarms. <br/></td></tr>
<tr class="separator:a6938f4c80766d3e2348d9cdf75c83a91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b259e6049addc09ca1ed0996c822cb5"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9b259e6049addc09ca1ed0996c822cb5"></a>
std::unique_ptr<br class="typebreak"/>
&lt; px::db::CIterator &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a9b259e6049addc09ca1ed0996c822cb5">mcl_iter</a></td></tr>
<tr class="memdesc:a9b259e6049addc09ca1ed0996c822cb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Iterators to the aforementioned databases Delete them before closing the relevant DB (by deleting the CKeyValueStore object) The MCL is read-only so that iterator need only be created once. <br/></td></tr>
<tr class="separator:a9b259e6049addc09ca1ed0996c822cb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f4aa132595d62ad8170bf3b4e4714f1"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a0f4aa132595d62ad8170bf3b4e4714f1">last_used_global_count</a></td></tr>
<tr class="memdesc:a0f4aa132595d62ad8170bf3b4e4714f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Alarm ID and global count cache.  <a href="#a0f4aa132595d62ad8170bf3b4e4714f1">More...</a><br/></td></tr>
<tr class="separator:a0f4aa132595d62ad8170bf3b4e4714f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a005cccfdaf5c57c37f63d8587c68010f"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classCThreadAlarm.html">CThreadAlarm</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a005cccfdaf5c57c37f63d8587c68010f">alarm_thread</a></td></tr>
<tr class="memdesc:a005cccfdaf5c57c37f63d8587c68010f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Alarm log thread interface.  <a href="#a005cccfdaf5c57c37f63d8587c68010f">More...</a><br/></td></tr>
<tr class="separator:a005cccfdaf5c57c37f63d8587c68010f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0879f1b7307eed52db02d11e51b6ca23"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0879f1b7307eed52db02d11e51b6ca23"></a>
std::unique_ptr&lt; <a class="el" href="classCThreadBase.html">CThreadBase</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a0879f1b7307eed52db02d11e51b6ca23">delete_alarms_thread</a></td></tr>
<tr class="memdesc:a0879f1b7307eed52db02d11e51b6ca23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete alarms thread interface. <br/></td></tr>
<tr class="separator:a0879f1b7307eed52db02d11e51b6ca23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8ffd8e0303fb18c99b901b77262c7f6"><td class="memItemLeft" align="right" valign="top">std::unique_ptr<br class="typebreak"/>
&lt; <a class="el" href="classCThreadPersistence.html">CThreadPersistence</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#ab8ffd8e0303fb18c99b901b77262c7f6">persistence_thread</a></td></tr>
<tr class="memdesc:ab8ffd8e0303fb18c99b901b77262c7f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">System log thread interface.  <a href="#ab8ffd8e0303fb18c99b901b77262c7f6">More...</a><br/></td></tr>
<tr class="separator:ab8ffd8e0303fb18c99b901b77262c7f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ad46624d24840f13559b4ca4add2563"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0ad46624d24840f13559b4ca4add2563"></a>
std::unique_ptr&lt; <a class="el" href="classCThreadTrend.html">CThreadTrend</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a0ad46624d24840f13559b4ca4add2563">trend_query_thread</a></td></tr>
<tr class="memdesc:a0ad46624d24840f13559b4ca4add2563"><td class="mdescLeft">&#160;</td><td class="mdescRight">Trends log thread interface. <br/></td></tr>
<tr class="separator:a0ad46624d24840f13559b4ca4add2563"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af06f9da5fed5c680cda10fad0391bbf4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af06f9da5fed5c680cda10fad0391bbf4"></a>
std::unique_ptr<br class="typebreak"/>
&lt; <a class="el" href="classCThreadTrendStage.html">CThreadTrendStage</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#af06f9da5fed5c680cda10fad0391bbf4">trend_stage_thread</a></td></tr>
<tr class="memdesc:af06f9da5fed5c680cda10fad0391bbf4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Trends stage log thread interface. <br/></td></tr>
<tr class="separator:af06f9da5fed5c680cda10fad0391bbf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a48a1343b8fb9dea6125b74630d03c4dd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a48a1343b8fb9dea6125b74630d03c4dd"></a>
std::unique_ptr<br class="typebreak"/>
&lt; <a class="el" href="classCThreadTrendBucket.html">CThreadTrendBucket</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a48a1343b8fb9dea6125b74630d03c4dd">trend_bucket_thread</a></td></tr>
<tr class="memdesc:a48a1343b8fb9dea6125b74630d03c4dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Trends bucket log management thread interface. <br/></td></tr>
<tr class="separator:a48a1343b8fb9dea6125b74630d03c4dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dbf71e378546650915b783762afa0e3"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; <a class="el" href="classCWatchdog.html">CWatchdog</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a6dbf71e378546650915b783762afa0e3">watchdog</a></td></tr>
<tr class="memdesc:a6dbf71e378546650915b783762afa0e3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main watchdog interface object.  <a href="#a6dbf71e378546650915b783762afa0e3">More...</a><br/></td></tr>
<tr class="separator:a6dbf71e378546650915b783762afa0e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c0f45da6cc5a14a2c6a188c648a5030"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0c0f45da6cc5a14a2c6a188c648a5030"></a>
std::shared_ptr&lt; <a class="el" href="classCAuthManager.html">CAuthManager</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a0c0f45da6cc5a14a2c6a188c648a5030">auth_mgr</a></td></tr>
<tr class="memdesc:a0c0f45da6cc5a14a2c6a188c648a5030"><td class="mdescLeft">&#160;</td><td class="mdescRight">Auth manager object - manages usernames and passwords, and their DB. <br/></td></tr>
<tr class="separator:a0c0f45da6cc5a14a2c6a188c648a5030"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd0a46d5c2b89e13027929563b9ee2b9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afd0a46d5c2b89e13027929563b9ee2b9"></a>
std::shared_ptr&lt; <a class="el" href="classCSessManager.html">CSessManager</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#afd0a46d5c2b89e13027929563b9ee2b9">sess_mgr</a></td></tr>
<tr class="memdesc:afd0a46d5c2b89e13027929563b9ee2b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Session manager object - manages user sessions, and their DB. <br/></td></tr>
<tr class="separator:afd0a46d5c2b89e13027929563b9ee2b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a859a6f217a1ccf7b3786b9bfb1a48ae3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a859a6f217a1ccf7b3786b9bfb1a48ae3"></a>
px::CMonoTime&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a859a6f217a1ccf7b3786b9bfb1a48ae3">monotime</a></td></tr>
<tr class="memdesc:a859a6f217a1ccf7b3786b9bfb1a48ae3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current (monotonic) timestamp - this is updated upon return from each blocking call. <br/></td></tr>
<tr class="separator:a859a6f217a1ccf7b3786b9bfb1a48ae3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a484e2fcdc220ec4d7b6689f2e909fc9c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a484e2fcdc220ec4d7b6689f2e909fc9c"></a>
px::CWallTime&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a484e2fcdc220ec4d7b6689f2e909fc9c">realtime</a></td></tr>
<tr class="memdesc:a484e2fcdc220ec4d7b6689f2e909fc9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current clock (real) time - this is updated upon return from each blocking call. <br/></td></tr>
<tr class="separator:a484e2fcdc220ec4d7b6689f2e909fc9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46b5b28db1362644dfdf46433d8ebdbe"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a46b5b28db1362644dfdf46433d8ebdbe"></a>
<a class="el" href="classCDataStore.html#ac5e0ebd06de1104e03bcfd70e829277c">sub_map_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a46b5b28db1362644dfdf46433d8ebdbe">_subscription_map</a></td></tr>
<tr class="memdesc:a46b5b28db1362644dfdf46433d8ebdbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">map of subscription id to client connection id. <br/></td></tr>
<tr class="separator:a46b5b28db1362644dfdf46433d8ebdbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40ac0ab75ee5ba90ff999e74285639d6"><td class="memItemLeft" align="right" valign="top">std::unordered_map&lt; uint64_t, <br class="typebreak"/>
px::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a40ac0ab75ee5ba90ff999e74285639d6">_subscription_sess_map</a></td></tr>
<tr class="memdesc:a40ac0ab75ee5ba90ff999e74285639d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">map of subscription id to client connection session token.  <a href="#a40ac0ab75ee5ba90ff999e74285639d6">More...</a><br/></td></tr>
<tr class="separator:a40ac0ab75ee5ba90ff999e74285639d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26d003c0b24853ecc58a65360b490272"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a26d003c0b24853ecc58a65360b490272"></a>
std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a26d003c0b24853ecc58a65360b490272">_subscription_map_lock</a></td></tr>
<tr class="memdesc:a26d003c0b24853ecc58a65360b490272"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lock to serialize access to these subscription maps. <br/></td></tr>
<tr class="separator:a26d003c0b24853ecc58a65360b490272"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a178174da5005d58d2eada49641949a99"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a178174da5005d58d2eada49641949a99"></a>
px::sub::CSubscriptionManager&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a178174da5005d58d2eada49641949a99">subs</a></td></tr>
<tr class="memdesc:a178174da5005d58d2eada49641949a99"><td class="mdescLeft">&#160;</td><td class="mdescRight">Subscription Manager. <br/></td></tr>
<tr class="separator:a178174da5005d58d2eada49641949a99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada33de2a34387a5114b3eabb2640df47"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ada33de2a34387a5114b3eabb2640df47"></a>
std::shared_ptr<br class="typebreak"/>
&lt; <a class="el" href="classCDeviceCommandsStore.html">CDeviceCommandsStore</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#ada33de2a34387a5114b3eabb2640df47">device_commands_store</a></td></tr>
<tr class="memdesc:ada33de2a34387a5114b3eabb2640df47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Manages device command execution for all devices. <br/></td></tr>
<tr class="separator:ada33de2a34387a5114b3eabb2640df47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afaae70e3e97bfba5dd8d110cdf8e55ee"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afaae70e3e97bfba5dd8d110cdf8e55ee"></a>
std::unordered_map&lt; uint8_t, <br class="typebreak"/>
px::id_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#afaae70e3e97bfba5dd8d110cdf8e55ee">system_channels</a></td></tr>
<tr class="memdesc:afaae70e3e97bfba5dd8d110cdf8e55ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">List of the IDs of the system channels. <br/></td></tr>
<tr class="separator:afaae70e3e97bfba5dd8d110cdf8e55ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a92583911217a1f03792dc5d2b6e603"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1a92583911217a1f03792dc5d2b6e603"></a>
volatile bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a1a92583911217a1f03792dc5d2b6e603">exit_bg_tasks</a></td></tr>
<tr class="memdesc:a1a92583911217a1f03792dc5d2b6e603"><td class="mdescLeft">&#160;</td><td class="mdescRight">When true, long-running background tasks are requested to exit ASAP. <br/></td></tr>
<tr class="separator:a1a92583911217a1f03792dc5d2b6e603"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a487eb20a80340f9c886606fe1806140f"><td class="memItemLeft" align="right" valign="top">std::unique_ptr&lt; CScheduler &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a487eb20a80340f9c886606fe1806140f">bg_sched</a></td></tr>
<tr class="memdesc:a487eb20a80340f9c886606fe1806140f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task scheduler for long-running low-priority background tasks, such as Daily and Minute-based tasks.  <a href="#a487eb20a80340f9c886606fe1806140f">More...</a><br/></td></tr>
<tr class="separator:a487eb20a80340f9c886606fe1806140f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accf7e9a01ae5f6d777c0e1bd01a98006"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="accf7e9a01ae5f6d777c0e1bd01a98006"></a>
std::unique_ptr&lt; CScheduler &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#accf7e9a01ae5f6d777c0e1bd01a98006">trend_export_sched</a></td></tr>
<tr class="memdesc:accf7e9a01ae5f6d777c0e1bd01a98006"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task scheduler for on-request trend exports. <br/></td></tr>
<tr class="separator:accf7e9a01ae5f6d777c0e1bd01a98006"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a88cb996968bdeb197e3d0cae6ff6fd86"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a88cb996968bdeb197e3d0cae6ff6fd86"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a88cb996968bdeb197e3d0cae6ff6fd86">insert_dev_tree</a> (std::set&lt; px::id_t &gt; &amp;devs, px::id_t root) const </td></tr>
<tr class="memdesc:a88cb996968bdeb197e3d0cae6ff6fd86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function: Enumerate one level of sub-devices. <br/></td></tr>
<tr class="separator:a88cb996968bdeb197e3d0cae6ff6fd86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1cc543d53a082cf1f618d4386b4f9ed"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#ac1cc543d53a082cf1f618d4386b4f9ed">setup_system_channels</a> ()</td></tr>
<tr class="memdesc:ac1cc543d53a082cf1f618d4386b4f9ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set up the system channels on the publisher, if they don't already exist.  <a href="#ac1cc543d53a082cf1f618d4386b4f9ed">More...</a><br/></td></tr>
<tr class="separator:ac1cc543d53a082cf1f618d4386b4f9ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aadaa120cad52e94ee81814ee1e2bae96"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aadaa120cad52e94ee81814ee1e2bae96"></a>
std::map&lt; px::string, <br class="typebreak"/>
px::proto::toolkitStruct &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#aadaa120cad52e94ee81814ee1e2bae96">oob</a></td></tr>
<tr class="memdesc:aadaa120cad52e94ee81814ee1e2bae96"><td class="mdescLeft">&#160;</td><td class="mdescRight">In-memory data: Out-of-band data. <br/></td></tr>
<tr class="separator:aadaa120cad52e94ee81814ee1e2bae96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1beecef543f4cc8f37024bae79481abb"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1beecef543f4cc8f37024bae79481abb"></a>
std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classCDataStore.html#a1beecef543f4cc8f37024bae79481abb">oob_lock</a></td></tr>
<tr class="memdesc:a1beecef543f4cc8f37024bae79481abb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lock to serialize access to oob. <br/></td></tr>
<tr class="separator:a1beecef543f4cc8f37024bae79481abb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Top-level class containing all internal data. </p>
<p>This class serves as the bridge that pulls together all of the CDS's internal data structures and threads of execution. A handle to an object of this class can be passed around as an easy way to provide high-level context for the whole CDS. </p>

<p>Definition at line <a class="el" href="datastore_8hpp_source.html#l00060">60</a> of file <a class="el" href="datastore_8hpp_source.html">datastore.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aea7b00a9fd741f4dd16f7333c3478997"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CDataStore::CDataStore </td>
          <td>(</td>
          <td class="paramtype">std::unique_ptr&lt; <a class="el" href="classCOptions.html">COptions</a> &gt; &amp;&amp;&#160;</td>
          <td class="paramname"><em>opt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<p>The data store constructor initializes all of the semi-global data structures that are needed for normal program execution.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">opt</td><td>Command-line options</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">generic_err</td><td>An error occurred when attempting to initialize one of the global data structures. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="datastore_8cpp_source.html#l00055">55</a> of file <a class="el" href="datastore_8cpp_source.html">datastore.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="af96b836a3d210927a3aed067f4f29d42"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CDataStore::load </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load data from our persistent databases. </p>
<p>Throws generic_err() for any problems </p>

<p>Definition at line <a class="el" href="datastore_8cpp_source.html#l00290">290</a> of file <a class="el" href="datastore_8cpp_source.html">datastore.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ab9844576c8158c61860f3451889dcf0d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="classCThreadHandle.html">CThreadHandle</a> &gt; CDataStore::thread_handles </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a collection of handles to each of the threads owned by the data store. </p>
<dl class="section return"><dt>Returns</dt><dd>A list of thread handles </dd></dl>

<p>Definition at line <a class="el" href="datastore_8cpp_source.html#l00150">150</a> of file <a class="el" href="datastore_8cpp_source.html">datastore.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="ab9e5d820403fcccc09ef6075e9913533"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CDataStore::fill_out_devices </td>
          <td>(</td>
          <td class="paramtype">px::CChannelSelector &amp;&#160;</td>
          <td class="paramname"><em>sel</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given a ChannelSelector, expand any recursion to produce a list of devices. </p>
<p>Not safe to call in background threads. </p>

<p>Definition at line <a class="el" href="datastore_8cpp_source.html#l00846">846</a> of file <a class="el" href="datastore_8cpp_source.html">datastore.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCDataStore_ab9e5d820403fcccc09ef6075e9913533_icgraph.png" border="0" usemap="#classCDataStore_ab9e5d820403fcccc09ef6075e9913533_icgraph" alt=""/></div>
<map name="classCDataStore_ab9e5d820403fcccc09ef6075e9913533_icgraph" id="classCDataStore_ab9e5d820403fcccc09ef6075e9913533_icgraph">
<area shape="rect" id="node2" href="classCCommandSetDeviceState.html#a8d37c315cb9171443d01b9292630e366" title="Execute the command in &#39;req&#39;, adding to oplist anything that isn&#39;t done in this function. " alt="" coords="203,5,402,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad803f5625a1b6dc4f18188302d67da02"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CDataStore::is_channel_covered </td>
          <td>(</td>
          <td class="paramtype">const px::CChannelSelector &amp;&#160;</td>
          <td class="paramname"><em>sel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">px::id_t&#160;</td>
          <td class="paramname"><em>chan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given a ChannelSelector and a channel ID, determine if the channel is included in the selector. </p>
<p>A nonexistent channel is considered not included, UNLESS the selector has 'everything'=true, or the nonexistent channel in its list. Not safe to call in background threads (yet). </p>

<p>Definition at line <a class="el" href="datastore_8cpp_source.html#l00988">988</a> of file <a class="el" href="datastore_8cpp_source.html">datastore.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCDataStore_ad803f5625a1b6dc4f18188302d67da02_icgraph.png" border="0" usemap="#classCDataStore_ad803f5625a1b6dc4f18188302d67da02_icgraph" alt=""/></div>
<map name="classCDataStore_ad803f5625a1b6dc4f18188302d67da02_icgraph" id="classCDataStore_ad803f5625a1b6dc4f18188302d67da02_icgraph">
<area shape="rect" id="node2" href="classCDataStore.html#a89947a2a75807e12d1b4c6807665d664" title="Given a ChannelSelector and an ID that might be a device or channel, determine if it is included in t..." alt="" coords="227,5,392,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7b563ad14fcb9ca6024268f866a152bb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CDataStore::is_device_covered </td>
          <td>(</td>
          <td class="paramtype">const px::CChannelSelector &amp;&#160;</td>
          <td class="paramname"><em>sel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">px::id_t&#160;</td>
          <td class="paramname"><em>dev</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given a ChannelSelector and a device ID, determine if the device is included in the selector. </p>
<p>Not safe to call in background threads (yet). </p>

<p>Definition at line <a class="el" href="datastore_8cpp_source.html#l01028">1028</a> of file <a class="el" href="datastore_8cpp_source.html">datastore.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCDataStore_a7b563ad14fcb9ca6024268f866a152bb_icgraph.png" border="0" usemap="#classCDataStore_a7b563ad14fcb9ca6024268f866a152bb_icgraph" alt=""/></div>
<map name="classCDataStore_a7b563ad14fcb9ca6024268f866a152bb_icgraph" id="classCDataStore_a7b563ad14fcb9ca6024268f866a152bb_icgraph">
<area shape="rect" id="node2" href="classCDataStore.html#a89947a2a75807e12d1b4c6807665d664" title="Given a ChannelSelector and an ID that might be a device or channel, determine if it is included in t..." alt="" coords="219,5,384,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a89947a2a75807e12d1b4c6807665d664"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CDataStore::is_device_or_channel_covered </td>
          <td>(</td>
          <td class="paramtype">const px::CChannelSelector &amp;&#160;</td>
          <td class="paramname"><em>sel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">px::id_t&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given a ChannelSelector and an ID that might be a device or channel, determine if it is included in the selector. </p>
<p>Not safe to call in background threads (yet). </p>

<p>Definition at line <a class="el" href="datastore_8cpp_source.html#l00958">958</a> of file <a class="el" href="datastore_8cpp_source.html">datastore.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="acaac434f640ff145e7922608a143f4f3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CDataStore::get_oob </td>
          <td>(</td>
          <td class="paramtype">const px::string &amp;&#160;</td>
          <td class="paramname"><em>tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">px::proto::toolkitStruct &amp;&#160;</td>
          <td class="paramname"><em>out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the OOB object with the given tag. </p>
<p>Returns false if it doesn't exist (and leaves 'out' untouched), returns true if it does exist. Thread-safe, and race-safe with set/clear_oob. </p>

<p>Definition at line <a class="el" href="datastore_8cpp_source.html#l01108">1108</a> of file <a class="el" href="datastore_8cpp_source.html">datastore.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCDataStore_acaac434f640ff145e7922608a143f4f3_icgraph.png" border="0" usemap="#classCDataStore_acaac434f640ff145e7922608a143f4f3_icgraph" alt=""/></div>
<map name="classCDataStore_acaac434f640ff145e7922608a143f4f3_icgraph" id="classCDataStore_acaac434f640ff145e7922608a143f4f3_icgraph">
<area shape="rect" id="node2" href="classCAuthManager.html#a402fd33cfc7bc2ae62474c95b079fbf9" title="Authenticate a user, given plain&#45;text password. " alt="" coords="211,5,419,46"/><area shape="rect" id="node3" href="classCCommandClearOOBData.html#a68e55fa453fc040e3256439460fe5099" title="Execute the command in &#39;req&#39;, adding to oplist anything that isn&#39;t done in this function. " alt="" coords="219,70,411,111"/><area shape="rect" id="node4" href="classCCommandGetFieldValue.html#a40920a6640ee16ddb817b9670f298213" title="Execute the command in &#39;req&#39;, adding to oplist anything that isn&#39;t done in this function. " alt="" coords="221,135,408,177"/><area shape="rect" id="node5" href="classCCommandGetOOBData.html#a4442daaee32ecc8a97da7c85aaf31adc" title="Execute the command in &#39;req&#39;, adding to oplist anything that isn&#39;t done in this function. " alt="" coords="224,201,405,242"/><area shape="rect" id="node6" href="classCCommandSetFieldValue.html#a02d1489b049719cf7061298b98bc6cf2" title="Execute the command in &#39;req&#39;, adding to oplist anything that isn&#39;t done in this function. " alt="" coords="222,266,407,307"/><area shape="rect" id="node7" href="classCCommandSetOOBData.html#a87a306ef533ce6382ecead7a5f4b2ace" title="Execute the command in &#39;req&#39;, adding to oplist anything that isn&#39;t done in this function. " alt="" coords="225,331,404,373"/><area shape="rect" id="node8" href="classCCommandSubscribe.html#a0c3ebde0cd4789833c222d783a07475f" title="Execute the command in &#39;req&#39;, adding to oplist anything that isn&#39;t done in this function. " alt="" coords="230,397,399,438"/><area shape="rect" id="node9" href="classCTrendStore.html#a2c94e65314866abaca128481843649bb" title="Gets the database settings from the oob or default. " alt="" coords="217,462,413,503"/><area shape="rect" id="node10" href="classCTrendStore.html#a96d9c92e871bdf011ddde3f905dad5a6" title="Get the currently&#45;active levelup and rolloff policy (calculated from today based on OOB&#45;stored thresh..." alt="" coords="467,462,651,503"/><area shape="rect" id="node11" href="classCTrendStore.html#ad2047a9303a805c0334733c49008f229" title="Trend bucket database periodic maintenance: level&#45;up, roll&#45;off, and clean&#45;up. " alt="" coords="699,469,906,496"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a58b4f707eb1f35bcbf9129e834c0911a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CDataStore::set_oob </td>
          <td>(</td>
          <td class="paramtype">const px::string &amp;&#160;</td>
          <td class="paramname"><em>tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const px::proto::toolkitStruct &amp;&#160;</td>
          <td class="paramname"><em>oob</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the OOB object with the given tag. </p>
<p>Thread-safe, and race-safe with get/clear_oob. </p>

<p>Definition at line <a class="el" href="datastore_8cpp_source.html#l01121">1121</a> of file <a class="el" href="datastore_8cpp_source.html">datastore.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCDataStore_a58b4f707eb1f35bcbf9129e834c0911a_icgraph.png" border="0" usemap="#classCDataStore_a58b4f707eb1f35bcbf9129e834c0911a_icgraph" alt=""/></div>
<map name="classCDataStore_a58b4f707eb1f35bcbf9129e834c0911a_icgraph" id="classCDataStore_a58b4f707eb1f35bcbf9129e834c0911a_icgraph">
<area shape="rect" id="node2" href="classCCommandSetFieldValue.html#a02d1489b049719cf7061298b98bc6cf2" title="Execute the command in &#39;req&#39;, adding to oplist anything that isn&#39;t done in this function. " alt="" coords="209,5,394,46"/><area shape="rect" id="node3" href="classCCommandSetOOBData.html#a87a306ef533ce6382ecead7a5f4b2ace" title="Execute the command in &#39;req&#39;, adding to oplist anything that isn&#39;t done in this function. " alt="" coords="212,70,391,111"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a3b0f669822decb22309a62b0a5768d1d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CDataStore::clear_oob </td>
          <td>(</td>
          <td class="paramtype">const px::string &amp;&#160;</td>
          <td class="paramname"><em>tag</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear the OOB object with the given tag. </p>
<p>Thread-safe, and race-safe with get/set_oob. </p>

<p>Definition at line <a class="el" href="datastore_8cpp_source.html#l01144">1144</a> of file <a class="el" href="datastore_8cpp_source.html">datastore.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCDataStore_a3b0f669822decb22309a62b0a5768d1d_icgraph.png" border="0" usemap="#classCDataStore_a3b0f669822decb22309a62b0a5768d1d_icgraph" alt=""/></div>
<map name="classCDataStore_a3b0f669822decb22309a62b0a5768d1d_icgraph" id="classCDataStore_a3b0f669822decb22309a62b0a5768d1d_icgraph">
<area shape="rect" id="node2" href="classCCommandClearOOBData.html#a68e55fa453fc040e3256439460fe5099" title="Execute the command in &#39;req&#39;, adding to oplist anything that isn&#39;t done in this function. " alt="" coords="221,5,413,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a789edb5cdf049d1974038d9cd6849e9f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_set&lt; px::string &gt; CDataStore::get_oob_tags </td>
          <td>(</td>
          <td class="paramtype">const px::CBitset&lt; px::permissions &gt; &amp;&#160;</td>
          <td class="paramname"><em>perms</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return list of OOB tags. </p>
<p>Thread-safe. Returns only tags that can be read with the given permissions. </p>

<p>Definition at line <a class="el" href="datastore_8cpp_source.html#l01128">1128</a> of file <a class="el" href="datastore_8cpp_source.html">datastore.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCDataStore_a789edb5cdf049d1974038d9cd6849e9f_icgraph.png" border="0" usemap="#classCDataStore_a789edb5cdf049d1974038d9cd6849e9f_icgraph" alt=""/></div>
<map name="classCDataStore_a789edb5cdf049d1974038d9cd6849e9f_icgraph" id="classCDataStore_a789edb5cdf049d1974038d9cd6849e9f_icgraph">
<area shape="rect" id="node2" href="classCCommandGetOOBTags.html#a768a4c301a5e824ab9e19590a4f5be38" title="Execute the command in &#39;req&#39;, adding to oplist anything that isn&#39;t done in this function. " alt="" coords="245,5,424,46"/><area shape="rect" id="node3" href="classCCommandSubscribe.html#a0c3ebde0cd4789833c222d783a07475f" title="Execute the command in &#39;req&#39;, adding to oplist anything that isn&#39;t done in this function. " alt="" coords="250,70,419,111"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a81250a99b8f3899d7ddd92eb59c29d3d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">px::string CDataStore::get_str_val </td>
          <td>(</td>
          <td class="paramtype">const px::CAlarmUpdate &amp;&#160;</td>
          <td class="paramname"><em>alarm</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the str_val for this alarm. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">alarm</td><td>Alarm update to modify </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>String representation of the alarm value </dd></dl>

<p>Definition at line <a class="el" href="datastore_8cpp_source.html#l01203">1203</a> of file <a class="el" href="datastore_8cpp_source.html">datastore.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCDataStore_a81250a99b8f3899d7ddd92eb59c29d3d_icgraph.png" border="0" usemap="#classCDataStore_a81250a99b8f3899d7ddd92eb59c29d3d_icgraph" alt=""/></div>
<map name="classCDataStore_a81250a99b8f3899d7ddd92eb59c29d3d_icgraph" id="classCDataStore_a81250a99b8f3899d7ddd92eb59c29d3d_icgraph">
<area shape="rect" id="node2" href="classCCommandGetAlarms.html#a55c3fc3a749e5b289494488d6e38cfae" title="Execute the command in &#39;req&#39;, adding to oplist anything that isn&#39;t done in this function. " alt="" coords="239,5,414,46"/><area shape="rect" id="node3" href="classCOpAlarmUpdate.html#acddce68f889bcc546b8d6c819f0c2137" title="Execution method. " alt="" coords="229,71,424,97"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac1cc543d53a082cf1f618d4386b4f9ed"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CDataStore::setup_system_channels </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set up the system channels on the publisher, if they don't already exist. </p>
<p>Fill out the system_channels map. </p>

<p>Definition at line <a class="el" href="datastore_8cpp_source.html#l01062">1062</a> of file <a class="el" href="datastore_8cpp_source.html">datastore.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classCDataStore_ac1cc543d53a082cf1f618d4386b4f9ed_icgraph.png" border="0" usemap="#classCDataStore_ac1cc543d53a082cf1f618d4386b4f9ed_icgraph" alt=""/></div>
<map name="classCDataStore_ac1cc543d53a082cf1f618d4386b4f9ed_icgraph" id="classCDataStore_ac1cc543d53a082cf1f618d4386b4f9ed_icgraph">
<area shape="rect" id="node2" href="classCDataStore.html#af96b836a3d210927a3aed067f4f29d42" title="Load data from our persistent databases. " alt="" coords="249,12,381,39"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="aaec749149c5d038b39b09939f0d609e5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">px::id_t CDataStore::publisher_id</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Id of the "publisher" entry in the above device list. </p>
<p>UINT64_MAX if there is none. </p>

<p>Definition at line <a class="el" href="datastore_8hpp_source.html#l00211">211</a> of file <a class="el" href="datastore_8hpp_source.html">datastore.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ade2681fd84bdb2e4a562d66a626d5990"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_set&lt;px::string&gt; CDataStore::volatile_oob_tags</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>List of OOB tags that exist in memory that have never been persisted. </p>
<p>Needed to implement persist_if_persisted_before behavior. </p>

<p>Definition at line <a class="el" href="datastore_8hpp_source.html#l00223">223</a> of file <a class="el" href="datastore_8hpp_source.html">datastore.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a0f4aa132595d62ad8170bf3b4e4714f1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t CDataStore::last_used_global_count</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Alarm ID and global count cache. </p>
<p>We allocate these from the ID DB in blocks. Gaps may ensue on a reboot but that's OK (and preferable to accidentally re-using an ID, or waiting for a DB sync on every alarm update). </p>

<p>Definition at line <a class="el" href="datastore_8hpp_source.html#l00269">269</a> of file <a class="el" href="datastore_8hpp_source.html">datastore.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a005cccfdaf5c57c37f63d8587c68010f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classCThreadAlarm.html">CThreadAlarm</a>&gt; CDataStore::alarm_thread</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Alarm log thread interface. </p>

<p>Definition at line <a class="el" href="datastore_8hpp_source.html#l00277">277</a> of file <a class="el" href="datastore_8hpp_source.html">datastore.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ab8ffd8e0303fb18c99b901b77262c7f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classCThreadPersistence.html">CThreadPersistence</a>&gt; CDataStore::persistence_thread</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>System log thread interface. </p>
<p>TODO: implement Persistence log thread interface </p>

<p>Definition at line <a class="el" href="datastore_8hpp_source.html#l00292">292</a> of file <a class="el" href="datastore_8hpp_source.html">datastore.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a6dbf71e378546650915b783762afa0e3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;<a class="el" href="classCWatchdog.html">CWatchdog</a>&gt; CDataStore::watchdog</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main watchdog interface object. </p>
<p>Note that this is initialized after the log files, since in the [rare] case of a schema migration, their construction may block for a significant amount of time. </p>

<p>Definition at line <a class="el" href="datastore_8hpp_source.html#l00316">316</a> of file <a class="el" href="datastore_8hpp_source.html">datastore.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a40ac0ab75ee5ba90ff999e74285639d6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;uint64_t, px::string&gt; CDataStore::_subscription_sess_map</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>map of subscription id to client connection session token. </p>
<p>Some client like mercury server has session token, others like bacnet doesn't have session token </p>

<p>Definition at line <a class="el" href="datastore_8hpp_source.html#l00350">350</a> of file <a class="el" href="datastore_8hpp_source.html">datastore.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a487eb20a80340f9c886606fe1806140f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::unique_ptr&lt;CScheduler&gt; CDataStore::bg_sched</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Task scheduler for long-running low-priority background tasks, such as Daily and Minute-based tasks. </p>
<p>The scheduler runs in a separate thread and uses ASIO services to manage its timer, checking every 10s to see if a task is ready to run. </p>

<p>Definition at line <a class="el" href="datastore_8hpp_source.html#l00383">383</a> of file <a class="el" href="datastore_8hpp_source.html">datastore.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="datastore_8hpp_source.html">datastore.hpp</a></li>
<li><a class="el" href="datastore_8cpp_source.html">datastore.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classCDataStore.html">CDataStore</a></li>
    <li class="footer">Generated on Fri May 7 2021 20:24:00 for cds_ng by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
