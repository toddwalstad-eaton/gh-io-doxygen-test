<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>px-red-utils: libetnlnxutils/include/exports/etn_lnx_utils/linux_utils.hpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">px-red-utils
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d4/de6/linux__utils_8hpp_source.html','../../');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">linux_utils.hpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d4/de6/linux__utils_8hpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#ifndef ETN_LINUX_UTIL_HPP</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define ETN_LINUX_UTIL_HPP</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;stdexcept&gt;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;list&gt;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//using namespace toolkit::etn;</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">// Definition of RVK location</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/de5/linux__rootfs__defines_8h.html">linux_rootfs_defines.h</a>&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"></span><span class="comment">//</span></div>
<div class="line"><a name="l00017"></a><span class="lineno"><a class="line" href="../../d7/de9/classOFS.html">   17</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d7/de9/classOFS.html">OFS</a></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;{</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00020"></a><span class="lineno"><a class="line" href="../../d7/de9/classOFS.html#a54947e941b06395b105354655016f441">   20</a></span>&#160;    std::string <a class="code" href="../../d7/de9/classOFS.html#a54947e941b06395b105354655016f441">mount_dir</a>;</div>
<div class="line"><a name="l00021"></a><span class="lineno"><a class="line" href="../../d7/de9/classOFS.html#af6e4e10f96aa79f7b68a7b85b749efc2">   21</a></span>&#160;    std::string <a class="code" href="../../d7/de9/classOFS.html#af6e4e10f96aa79f7b68a7b85b749efc2">lower_dir</a>;</div>
<div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="../../d7/de9/classOFS.html#a10657fc73186d987f84c3124366c7a4f">   22</a></span>&#160;    std::string <a class="code" href="../../d7/de9/classOFS.html#a10657fc73186d987f84c3124366c7a4f">upper_dir</a>;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div>
<div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="../../d7/de9/classOFS.html#a6ff739bb2579caa4041caa6d25c3d773">   24</a></span>&#160;    <a class="code" href="../../d7/de9/classOFS.html#a6ff739bb2579caa4041caa6d25c3d773">OFS</a>( std::string &amp;mntdir, std::string &amp;lowdir, std::string &amp;uppdir )</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;        : <a class="code" href="../../d7/de9/classOFS.html#a54947e941b06395b105354655016f441">mount_dir</a>( mntdir ), <a class="code" href="../../d7/de9/classOFS.html#af6e4e10f96aa79f7b68a7b85b749efc2">lower_dir</a>( lowdir ), <a class="code" href="../../d7/de9/classOFS.html#a10657fc73186d987f84c3124366c7a4f">upper_dir</a>( uppdir )</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    {}</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;};</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="keyword">namespace </span>etn {</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="../../d4/de6/linux__utils_8hpp.html#a30fea96810d8f537139e302bd2b0c7c8">   37</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define ETN_LNX_UTILS_DEBUG_LEVEL   ( 3 )</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#else</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define ETN_LNX_UTILS_DEBUG_LEVEL   ( 0 )</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">// Symbol visibility is normally set to &quot;hidden&quot;, so we need this to explicitly</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">// flag anything which needs to be exported/public in the resulting shared</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">// library.</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#ifndef PUBLIC</span></div>
<div class="line"><a name="l00048"></a><span class="lineno"><a class="line" href="../../d4/de6/linux__utils_8hpp.html#ad17d551e31d1828c68acf40684849b7e">   48</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor"># define PUBLIC         __attribute__ ( ( visibility( &quot;default&quot; ) ) )</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00051"></a><span class="lineno"><a class="line" href="../../d4/de6/linux__utils_8hpp.html#af8257f44b5243be70510412e72917e2f">   51</a></span>&#160;<span class="preprocessor">#define LNX_UTILS_ERR( __VLVL__, ... ) \</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">    CLinuxUtil::log_err( __VLVL__, NULL, __VA_ARGS__ )</span></div>
<div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="../../d4/de6/linux__utils_8hpp.html#ae6a01df7fccdc3ef816829262928693e">   53</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define LNX_UTILS_FERR( __VLVL__, ... ) \</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">    CLinuxUtil::log_err( __VLVL__, __PRETTY_FUNCTION__, __VA_ARGS__ )</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="../../d4/de6/linux__utils_8hpp.html#ab1c8918d0ccc0dfffaab12d97945e182">   56</a></span>&#160;<span class="preprocessor">#define LNX_UTILS_WARN( __VLVL__, ... ) \</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">    CLinuxUtil::log_warn( __VLVL__, NULL, __VA_ARGS__ )</span></div>
<div class="line"><a name="l00058"></a><span class="lineno"><a class="line" href="../../d4/de6/linux__utils_8hpp.html#a49f6670ab9cdb6badbfecc98e69defbc">   58</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define LNX_UTILS_FWARN( __VLVL__, ... ) \</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">    CLinuxUtil::log_warn( __VLVL__, __PRETTY_FUNCTION__, __VA_ARGS__ )</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00061"></a><span class="lineno"><a class="line" href="../../d4/de6/linux__utils_8hpp.html#ace6a5fb5b1c1e035fc7e589ed9d61ce7">   61</a></span>&#160;<span class="preprocessor">#define LNX_UTILS_NOTICE( __VLVL__, ... ) \</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">    CLinuxUtil::log_notice( __VLVL__, NULL, __VA_ARGS__ )</span></div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="../../d4/de6/linux__utils_8hpp.html#af5eec83737e78088778a378b3179b42c">   63</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define LNX_UTILS_FNOTICE( __VLVL__, ... ) \</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">    CLinuxUtil::log_notice( __VLVL__, __PRETTY_FUNCTION__, __VA_ARGS__ )</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00066"></a><span class="lineno"><a class="line" href="../../d4/de6/linux__utils_8hpp.html#a47c830bac1e21839e4447888bf92b1d6">   66</a></span>&#160;<span class="preprocessor">#define LNX_UTILS_INFO( __VLVL__, ... ) \</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">    CLinuxUtil::log_info( __VLVL__, NULL, __VA_ARGS__ )</span></div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="../../d4/de6/linux__utils_8hpp.html#af035af31d5809f3f6ff35c39cc17fd98">   68</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define LNX_UTILS_FINFO( __VLVL__, ... ) \</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">    CLinuxUtil::log_info( __VLVL__, __PRETTY_FUNCTION__, __VA_ARGS__ )</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#ifndef PUSH_FUNC</span></div>
<div class="line"><a name="l00077"></a><span class="lineno"><a class="line" href="../../d4/de6/linux__utils_8hpp.html#a4ad720b52970a7e24787e02246cd2f96">   77</a></span>&#160;<span class="preprocessor"></span><span class="preprocessor">#define PUSH_FUNC do { } while ( 0 )</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="../../d2/db7/classetn_1_1CLinuxUtil.html">   83</a></span>&#160;<span class="keyword">class </span><a class="code" href="../../d2/db7/classetn_1_1CLinuxUtil.html">CLinuxUtil</a></div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;{</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <a class="code" href="../../d4/de6/linux__utils_8hpp.html#ad17d551e31d1828c68acf40684849b7e">PUBLIC</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d2/db7/classetn_1_1CLinuxUtil.html#a48bc8935ae63c24a672c7f3f4cea1857">set_verbosity_level</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> new_level );</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <a class="code" href="../../d4/de6/linux__utils_8hpp.html#ad17d551e31d1828c68acf40684849b7e">PUBLIC</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d2/db7/classetn_1_1CLinuxUtil.html#a57e5aa173426e2f4c1e9e2a2e87fc76e">log_err</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lvl, <span class="keyword">const</span> <span class="keywordtype">char</span> *func,</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                                <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ... );</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <a class="code" href="../../d4/de6/linux__utils_8hpp.html#ad17d551e31d1828c68acf40684849b7e">PUBLIC</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d2/db7/classetn_1_1CLinuxUtil.html#aff173aa7a7e56262b8ea59836bc87524">log_warn</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lvl, <span class="keyword">const</span> <span class="keywordtype">char</span> *func,</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                                 <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ... );</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <a class="code" href="../../d4/de6/linux__utils_8hpp.html#ad17d551e31d1828c68acf40684849b7e">PUBLIC</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d2/db7/classetn_1_1CLinuxUtil.html#a02bfed84d425161964b5e57e1735b648">log_notice</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lvl, <span class="keyword">const</span> <span class="keywordtype">char</span> *func,</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                                   <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ... );</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <a class="code" href="../../d4/de6/linux__utils_8hpp.html#ad17d551e31d1828c68acf40684849b7e">PUBLIC</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d2/db7/classetn_1_1CLinuxUtil.html#ad68f28edca552fcce9ebfbfad1dd5ae3">log_info</a>( <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> lvl, <span class="keyword">const</span> <span class="keywordtype">char</span> *func,</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                                 <span class="keyword">const</span> <span class="keywordtype">char</span> *fmt, ... );</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    <a class="code" href="../../d4/de6/linux__utils_8hpp.html#ad17d551e31d1828c68acf40684849b7e">PUBLIC</a> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="../../d2/db7/classetn_1_1CLinuxUtil.html#ad3a369ba4334d9e6f84c1cbeeac9195a">shell_cmd</a>( <span class="keyword">const</span> <span class="keywordtype">char</span> *label, <span class="keyword">const</span> <span class="keywordtype">char</span> *cmd,</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                                  <span class="keywordtype">int</span> timeout, <span class="keywordtype">bool</span> leave_newline, <span class="keywordtype">int</span> &amp;cmd_status,</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                                  std::vector&lt;std::string&gt; &amp;outlines );</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <a class="code" href="../../d4/de6/linux__utils_8hpp.html#ad17d551e31d1828c68acf40684849b7e">PUBLIC</a> <span class="keyword">static</span> std::string <a class="code" href="../../d2/db7/classetn_1_1CLinuxUtil.html#adb74ac8cfa880801ca6dbb1314037232">get_root_device</a>( <span class="keyword">const</span> std::string &amp;mounts_file );</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <a class="code" href="../../d4/de6/linux__utils_8hpp.html#ad17d551e31d1828c68acf40684849b7e">PUBLIC</a> <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d2/db7/classetn_1_1CLinuxUtil.html#a69c79684162870fe4fad17a11b6384d9">get_active_image_number</a>( <span class="keyword">const</span> std::string &amp;mounts_file,</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                                                        std::string &amp;root_device,</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                                                        std::string &amp;backing_file );</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <a class="code" href="../../d4/de6/linux__utils_8hpp.html#ad17d551e31d1828c68acf40684849b7e">PUBLIC</a> <span class="keyword">static</span> std::vector&lt;std::string&gt; <a class="code" href="../../d2/db7/classetn_1_1CLinuxUtil.html#a2be581f3ea7a80458c707e5994d3baaa">get_rwx_mounts</a>( <span class="keyword">const</span> std::string &amp;mounts_file );</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="comment">// Gets mount path of overlay filesystem from mount file i.e mount dir,upper dir, lower dir</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="comment">// and update to OFS  class data member.</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="comment">// @param mnts objet for list which holds all overlay filesystem mount path</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment"></span>    <a class="code" href="../../d4/de6/linux__utils_8hpp.html#ad17d551e31d1828c68acf40684849b7e">PUBLIC</a> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../d2/db7/classetn_1_1CLinuxUtil.html#a9ff6779860d9bcb0bd321fbf222d9aec">get_overlayfs_mounts</a>( std::list&lt;OFS&gt; &amp;mnts );</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <a class="code" href="../../d4/de6/linux__utils_8hpp.html#ad17d551e31d1828c68acf40684849b7e">PUBLIC</a> <span class="keyword">static</span> std::string <a class="code" href="../../d2/db7/classetn_1_1CLinuxUtil.html#a813b3748e32908b117e6b06617498ac8">read_file_to_string</a>( <span class="keyword">const</span> std::string &amp;filename, <span class="keyword">const</span> <span class="keywordtype">size_t</span> max_size = 4096 );</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <a class="code" href="../../d4/de6/linux__utils_8hpp.html#ad17d551e31d1828c68acf40684849b7e">PUBLIC</a> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="../../d2/db7/classetn_1_1CLinuxUtil.html#a813b3748e32908b117e6b06617498ac8">read_file_to_string</a>( std::string &amp;filedata, <span class="keyword">const</span> std::string &amp;filename, <span class="keyword">const</span> <span class="keywordtype">size_t</span> max_size = 4096 );</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <a class="code" href="../../d4/de6/linux__utils_8hpp.html#ad17d551e31d1828c68acf40684849b7e">PUBLIC</a> <span class="keyword">static</span> std::vector&lt;unsigned char&gt; <a class="code" href="../../d2/db7/classetn_1_1CLinuxUtil.html#aad5fcc3a5f1df4b796ae5e8cafe3d1c9">read_file_to_vec</a>( <span class="keyword">const</span> std::string &amp;filename );</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <a class="code" href="../../d4/de6/linux__utils_8hpp.html#ad17d551e31d1828c68acf40684849b7e">PUBLIC</a> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../d2/db7/classetn_1_1CLinuxUtil.html#afbab8c704d3175960d68273ac1d058e9">get_signing_keys</a>( <span class="keyword">const</span> std::string &amp;fvk_keys_dir,</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                                        <span class="keywordtype">bool</span> &amp;build_is_signed,</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                                        std::string &amp;rvk,</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                                        std::vector&lt;std::pair&lt;std::string, std::string&gt; &gt; &amp;fvks,</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                                        std::string &amp;message, <span class="keyword">const</span> <span class="keywordtype">char</span> *rvk_path = <a class="code" href="../../da/de5/linux__rootfs__defines_8h.html#aaececde60eec04825e51b2072d249149">FILE_RO_ETC_KEYS_RVK</a> );</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    <a class="code" href="../../d4/de6/linux__utils_8hpp.html#ad17d551e31d1828c68acf40684849b7e">PUBLIC</a> <span class="keyword">static</span> std::vector&lt;std::pair&lt;std::string, std::string&gt; &gt; <a class="code" href="../../d2/db7/classetn_1_1CLinuxUtil.html#a75cac62af4d56e5c15845ce5d845c2e0">get_root_keys</a>( <span class="keyword">const</span> std::string &amp;keys_dir );</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <a class="code" href="../../d4/de6/linux__utils_8hpp.html#ad17d551e31d1828c68acf40684849b7e">PUBLIC</a> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="../../d2/db7/classetn_1_1CLinuxUtil.html#ab6bd2de89b4ff40e3545071c5c500a13">sig_is_cms</a>( <span class="keyword">const</span> std::vector&lt;unsigned char&gt; &amp;sig );</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00289"></a><span class="lineno"><a class="line" href="../../d2/db7/classetn_1_1CLinuxUtil.html#a57cd1fd05afd9df5327d638454f3dcd1">  289</a></span>&#160;    <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d2/db7/classetn_1_1CLinuxUtil.html#a57cd1fd05afd9df5327d638454f3dcd1">_verbosity_level</a>;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;};</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;}   <span class="comment">// namespace etn</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="preprocessor">#endif  // end of header</span></div>
<div class="ttc" id="classetn_1_1CLinuxUtil_html_a2be581f3ea7a80458c707e5994d3baaa"><div class="ttname"><a href="../../d2/db7/classetn_1_1CLinuxUtil.html#a2be581f3ea7a80458c707e5994d3baaa">etn::CLinuxUtil::get_rwx_mounts</a></div><div class="ttdeci">static PUBLIC std::vector&lt; std::string &gt; get_rwx_mounts(const std::string &amp;mounts_file)</div><div class="ttdoc">Return list of read/write executable mount points. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d19/linux__utils_8cpp_source.html#l00306">linux_utils.cpp:306</a></div></div>
<div class="ttc" id="classetn_1_1CLinuxUtil_html_afbab8c704d3175960d68273ac1d058e9"><div class="ttname"><a href="../../d2/db7/classetn_1_1CLinuxUtil.html#afbab8c704d3175960d68273ac1d058e9">etn::CLinuxUtil::get_signing_keys</a></div><div class="ttdeci">static PUBLIC int get_signing_keys(const std::string &amp;fvk_keys_dir, bool &amp;build_is_signed, std::string &amp;rvk, std::vector&lt; std::pair&lt; std::string, std::string &gt; &gt; &amp;fvks, std::string &amp;message, const char *rvk_path=FILE_RO_ETC_KEYS_RVK)</div><div class="ttdoc">Get the system RVK and FVK keys. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d19/linux__utils_8cpp_source.html#l00592">linux_utils.cpp:592</a></div></div>
<div class="ttc" id="classetn_1_1CLinuxUtil_html_ab6bd2de89b4ff40e3545071c5c500a13"><div class="ttname"><a href="../../d2/db7/classetn_1_1CLinuxUtil.html#ab6bd2de89b4ff40e3545071c5c500a13">etn::CLinuxUtil::sig_is_cms</a></div><div class="ttdeci">static PUBLIC bool sig_is_cms(const std::vector&lt; unsigned char &gt; &amp;sig)</div><div class="ttdoc">Determine whether the given signature is part of the new multi-level ECC scheme or the old 2-level RS...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d19/linux__utils_8cpp_source.html#l00530">linux_utils.cpp:530</a></div></div>
<div class="ttc" id="classetn_1_1CLinuxUtil_html_ad68f28edca552fcce9ebfbfad1dd5ae3"><div class="ttname"><a href="../../d2/db7/classetn_1_1CLinuxUtil.html#ad68f28edca552fcce9ebfbfad1dd5ae3">etn::CLinuxUtil::log_info</a></div><div class="ttdeci">static PUBLIC void log_info(unsigned int lvl, const char *func, const char *fmt,...)</div><div class="ttdoc">Show information message. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d19/linux__utils_8cpp_source.html#l00105">linux_utils.cpp:105</a></div></div>
<div class="ttc" id="classetn_1_1CLinuxUtil_html_a48bc8935ae63c24a672c7f3f4cea1857"><div class="ttname"><a href="../../d2/db7/classetn_1_1CLinuxUtil.html#a48bc8935ae63c24a672c7f3f4cea1857">etn::CLinuxUtil::set_verbosity_level</a></div><div class="ttdeci">static PUBLIC void set_verbosity_level(unsigned int new_level)</div><div class="ttdoc">Sets the highest level of verbosity to be used for the debug output. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d19/linux__utils_8cpp_source.html#l00030">linux_utils.cpp:30</a></div></div>
<div class="ttc" id="linux__utils_8hpp_html_ad17d551e31d1828c68acf40684849b7e"><div class="ttname"><a href="../../d4/de6/linux__utils_8hpp.html#ad17d551e31d1828c68acf40684849b7e">PUBLIC</a></div><div class="ttdeci">#define PUBLIC</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de6/linux__utils_8hpp_source.html#l00048">linux_utils.hpp:48</a></div></div>
<div class="ttc" id="classetn_1_1CLinuxUtil_html_a57cd1fd05afd9df5327d638454f3dcd1"><div class="ttname"><a href="../../d2/db7/classetn_1_1CLinuxUtil.html#a57cd1fd05afd9df5327d638454f3dcd1">etn::CLinuxUtil::_verbosity_level</a></div><div class="ttdeci">static unsigned int _verbosity_level</div><div class="ttdoc">Internal member for the verbosity level to use and check against. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de6/linux__utils_8hpp_source.html#l00289">linux_utils.hpp:289</a></div></div>
<div class="ttc" id="classOFS_html_a6ff739bb2579caa4041caa6d25c3d773"><div class="ttname"><a href="../../d7/de9/classOFS.html#a6ff739bb2579caa4041caa6d25c3d773">OFS::OFS</a></div><div class="ttdeci">OFS(std::string &amp;mntdir, std::string &amp;lowdir, std::string &amp;uppdir)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de6/linux__utils_8hpp_source.html#l00024">linux_utils.hpp:24</a></div></div>
<div class="ttc" id="classetn_1_1CLinuxUtil_html_a75cac62af4d56e5c15845ce5d845c2e0"><div class="ttname"><a href="../../d2/db7/classetn_1_1CLinuxUtil.html#a75cac62af4d56e5c15845ce5d845c2e0">etn::CLinuxUtil::get_root_keys</a></div><div class="ttdeci">static PUBLIC std::vector&lt; std::pair&lt; std::string, std::string &gt; &gt; get_root_keys(const std::string &amp;keys_dir)</div><div class="ttdoc">Get the root verification keys (new multi-level ECC style). </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d19/linux__utils_8cpp_source.html#l00675">linux_utils.cpp:675</a></div></div>
<div class="ttc" id="linux__rootfs__defines_8h_html_aaececde60eec04825e51b2072d249149"><div class="ttname"><a href="../../da/de5/linux__rootfs__defines_8h.html#aaececde60eec04825e51b2072d249149">FILE_RO_ETC_KEYS_RVK</a></div><div class="ttdeci">#define FILE_RO_ETC_KEYS_RVK</div><div class="ttdef"><b>Definition:</b> <a href="../../da/de5/linux__rootfs__defines_8h_source.html#l00030">linux_rootfs_defines.h:30</a></div></div>
<div class="ttc" id="classOFS_html"><div class="ttname"><a href="../../d7/de9/classOFS.html">OFS</a></div><div class="ttdoc">class holds Overlay filesystem mount dir,uppperdir, lowerdir path </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de6/linux__utils_8hpp_source.html#l00017">linux_utils.hpp:17</a></div></div>
<div class="ttc" id="classOFS_html_af6e4e10f96aa79f7b68a7b85b749efc2"><div class="ttname"><a href="../../d7/de9/classOFS.html#af6e4e10f96aa79f7b68a7b85b749efc2">OFS::lower_dir</a></div><div class="ttdeci">std::string lower_dir</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de6/linux__utils_8hpp_source.html#l00021">linux_utils.hpp:21</a></div></div>
<div class="ttc" id="classetn_1_1CLinuxUtil_html_a02bfed84d425161964b5e57e1735b648"><div class="ttname"><a href="../../d2/db7/classetn_1_1CLinuxUtil.html#a02bfed84d425161964b5e57e1735b648">etn::CLinuxUtil::log_notice</a></div><div class="ttdeci">static PUBLIC void log_notice(unsigned int lvl, const char *func, const char *fmt,...)</div><div class="ttdoc">Show warning message. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d19/linux__utils_8cpp_source.html#l00083">linux_utils.cpp:83</a></div></div>
<div class="ttc" id="classetn_1_1CLinuxUtil_html_aad5fcc3a5f1df4b796ae5e8cafe3d1c9"><div class="ttname"><a href="../../d2/db7/classetn_1_1CLinuxUtil.html#aad5fcc3a5f1df4b796ae5e8cafe3d1c9">etn::CLinuxUtil::read_file_to_vec</a></div><div class="ttdeci">static PUBLIC std::vector&lt; unsigned char &gt; read_file_to_vec(const std::string &amp;filename)</div><div class="ttdoc">Read contents of a file into a vector of unsigned char. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d19/linux__utils_8cpp_source.html#l00457">linux_utils.cpp:457</a></div></div>
<div class="ttc" id="classetn_1_1CLinuxUtil_html_ad3a369ba4334d9e6f84c1cbeeac9195a"><div class="ttname"><a href="../../d2/db7/classetn_1_1CLinuxUtil.html#ad3a369ba4334d9e6f84c1cbeeac9195a">etn::CLinuxUtil::shell_cmd</a></div><div class="ttdeci">static PUBLIC bool shell_cmd(const char *label, const char *cmd, int timeout, bool leave_newline, int &amp;cmd_status, std::vector&lt; std::string &gt; &amp;outlines)</div><div class="ttdoc">Open a shell, run the given command, and return the output and result. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d19/linux__utils_8cpp_source.html#l00127">linux_utils.cpp:127</a></div></div>
<div class="ttc" id="classetn_1_1CLinuxUtil_html_a69c79684162870fe4fad17a11b6384d9"><div class="ttname"><a href="../../d2/db7/classetn_1_1CLinuxUtil.html#a69c79684162870fe4fad17a11b6384d9">etn::CLinuxUtil::get_active_image_number</a></div><div class="ttdeci">static PUBLIC unsigned int get_active_image_number(const std::string &amp;mounts_file, std::string &amp;root_device, std::string &amp;backing_file)</div><div class="ttdoc">Return the image number for the device mounted at root. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d19/linux__utils_8cpp_source.html#l00248">linux_utils.cpp:248</a></div></div>
<div class="ttc" id="linux__rootfs__defines_8h_html"><div class="ttname"><a href="../../da/de5/linux__rootfs__defines_8h.html">linux_rootfs_defines.h</a></div></div>
<div class="ttc" id="classOFS_html_a10657fc73186d987f84c3124366c7a4f"><div class="ttname"><a href="../../d7/de9/classOFS.html#a10657fc73186d987f84c3124366c7a4f">OFS::upper_dir</a></div><div class="ttdeci">std::string upper_dir</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de6/linux__utils_8hpp_source.html#l00022">linux_utils.hpp:22</a></div></div>
<div class="ttc" id="classetn_1_1CLinuxUtil_html"><div class="ttname"><a href="../../d2/db7/classetn_1_1CLinuxUtil.html">etn::CLinuxUtil</a></div><div class="ttdoc">Linux utility functions. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de6/linux__utils_8hpp_source.html#l00083">linux_utils.hpp:83</a></div></div>
<div class="ttc" id="classetn_1_1CLinuxUtil_html_a813b3748e32908b117e6b06617498ac8"><div class="ttname"><a href="../../d2/db7/classetn_1_1CLinuxUtil.html#a813b3748e32908b117e6b06617498ac8">etn::CLinuxUtil::read_file_to_string</a></div><div class="ttdeci">static PUBLIC std::string read_file_to_string(const std::string &amp;filename, const size_t max_size=4096)</div><div class="ttdoc">Read the entire contents of the named file into a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d19/linux__utils_8cpp_source.html#l00390">linux_utils.cpp:390</a></div></div>
<div class="ttc" id="classetn_1_1CLinuxUtil_html_adb74ac8cfa880801ca6dbb1314037232"><div class="ttname"><a href="../../d2/db7/classetn_1_1CLinuxUtil.html#adb74ac8cfa880801ca6dbb1314037232">etn::CLinuxUtil::get_root_device</a></div><div class="ttdeci">static PUBLIC std::string get_root_device(const std::string &amp;mounts_file)</div><div class="ttdoc">Return the device mounted at root. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d19/linux__utils_8cpp_source.html#l00221">linux_utils.cpp:221</a></div></div>
<div class="ttc" id="classetn_1_1CLinuxUtil_html_a9ff6779860d9bcb0bd321fbf222d9aec"><div class="ttname"><a href="../../d2/db7/classetn_1_1CLinuxUtil.html#a9ff6779860d9bcb0bd321fbf222d9aec">etn::CLinuxUtil::get_overlayfs_mounts</a></div><div class="ttdeci">static PUBLIC void get_overlayfs_mounts(std::list&lt; OFS &gt; &amp;mnts)</div><div class="ttdoc">throw &amp;#39;std::runtime_error&amp;#39; exception if mounts_file cannot be opened or cannot be properly parsed ...</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d19/linux__utils_8cpp_source.html#l00341">linux_utils.cpp:341</a></div></div>
<div class="ttc" id="classetn_1_1CLinuxUtil_html_a57e5aa173426e2f4c1e9e2a2e87fc76e"><div class="ttname"><a href="../../d2/db7/classetn_1_1CLinuxUtil.html#a57e5aa173426e2f4c1e9e2a2e87fc76e">etn::CLinuxUtil::log_err</a></div><div class="ttdeci">static PUBLIC void log_err(unsigned int lvl, const char *func, const char *fmt,...)</div><div class="ttdoc">Show error message. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d19/linux__utils_8cpp_source.html#l00038">linux_utils.cpp:38</a></div></div>
<div class="ttc" id="classetn_1_1CLinuxUtil_html_aff173aa7a7e56262b8ea59836bc87524"><div class="ttname"><a href="../../d2/db7/classetn_1_1CLinuxUtil.html#aff173aa7a7e56262b8ea59836bc87524">etn::CLinuxUtil::log_warn</a></div><div class="ttdeci">static PUBLIC void log_warn(unsigned int lvl, const char *func, const char *fmt,...)</div><div class="ttdoc">Show warning message. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d19/linux__utils_8cpp_source.html#l00061">linux_utils.cpp:61</a></div></div>
<div class="ttc" id="classOFS_html_a54947e941b06395b105354655016f441"><div class="ttname"><a href="../../d7/de9/classOFS.html#a54947e941b06395b105354655016f441">OFS::mount_dir</a></div><div class="ttdeci">std::string mount_dir</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/de6/linux__utils_8hpp_source.html#l00020">linux_utils.hpp:20</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_1e3314fe60379d2884d5a3204b793915.html">libetnlnxutils</a></li><li class="navelem"><a class="el" href="../../dir_d09b40ffe0ed93aaa0cc5506b67c5d6c.html">include</a></li><li class="navelem"><a class="el" href="../../dir_214dd574a22a4a9de46e54f6e7d70933.html">exports</a></li><li class="navelem"><a class="el" href="../../dir_895b2d8a3f6badde32040f495c1f0bac.html">etn_lnx_utils</a></li><li class="navelem"><a class="el" href="../../d4/de6/linux__utils_8hpp.html">linux_utils.hpp</a></li>
    <li class="footer">Generated on Fri May 7 2021 20:24:46 for px-red-utils by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
