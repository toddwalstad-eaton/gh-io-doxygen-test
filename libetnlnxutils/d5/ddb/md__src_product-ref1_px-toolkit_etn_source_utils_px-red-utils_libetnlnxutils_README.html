<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>libetnlnxutils: libetnlnxutils Documentation</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libetnlnxutils
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d5/ddb/md__src_product-ref1_px-toolkit_etn_source_utils_px-red-utils_libetnlnxutils_README.html','../../');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">libetnlnxutils Documentation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><code>libetnlnxutils</code> is a library which enables execution of linux commands and shell scripts through CPP code.</p>
<p><code>libetnlnxutils</code> contains a single namespace <code>etn</code>. The library can be can be distingushed into the following parts based on the functionality:</p>
<h2>1. class <code>Exec</code>:</h2>
<p>Functions of <code>Exec</code> class can be used to execute the shell scripts through CPP code. It is inherits the class <code>ExecPrivate</code>.</p>
<p>For example, if a shell script 'introduction.sh' is to be executed. Its contents are: </p>
<blockquote class="doxtable">
<p>$ cat introduction.sh #!/bin/sh echo "$1, who am I talking to?" read varname echo "It's nice to meet you $varname!"</p>
<p></p>
</blockquote>
<p>So the above script requires the greeting such as 'Hello' or 'Good morning' as an argument. And, it requires name (varname) as the stdin input during runtime. Suppose the script is present in path '/usr/bin/' on the device.</p>
<p>To execute the above script using <code>libetnlnxutils</code>, there are two ways:</p>
<h4>a. Using the constructor:</h4>
<p><em>Constructors:</em></p>
<ul>
<li><code>Exec(const std::vector&lt;std::string&gt; arg, const std::string &amp; input = "", uint32_t timeout = 0);</code></li>
<li><code>Exec(const std::vector&lt;std::string&gt; arg, uint32_t timeout = 0);</code></li>
</ul>
<p><em>Usage:</em></p>
<ul>
<li><code><a class="el" href="../../d1/dca/classetn_1_1Exec.html" title="Linux exec functions to run linux commands/shell scripts from cpp code. ">etn::Exec</a> object( { "/usr/bin/introduction.sh", "Hello" }, "Jon Doe", 3);</code></li>
<li><code><a class="el" href="../../d1/dca/classetn_1_1Exec.html" title="Linux exec functions to run linux commands/shell scripts from cpp code. ">etn::Exec</a> object( { "/usr/bin/introduction.sh", "Hello" }, 3);</code></li>
</ul>
<p>Here,</p>
<ul>
<li>The first argument is a vector of the shell script path and the arguments required to be passed to the script.</li>
<li>The second argument is the stdin input required by the script during run time (optional argument).</li>
<li>The third argument is the timeout or time to wait for the script to execute before killing it forcefully.</li>
</ul>
<p>You can refer the <code>px-red-certmgr</code> module for more examples on usage.</p>
<h4>b. Using the function:</h4>
<p><em>Function definition:</em> <code>int exec(const std::vector&lt;std::string&gt; arg, const std::string &amp; input, uint32_t timeout, std::stringstream * stdout, std::stringstream * stderr);</code></p>
<p><em>Usage:</em> <code>std::stringstream out, err;</code> <code>int rv = <a class="el" href="../../d9/d84/namespaceetn.html#a91de208035602e94da1eb3f118796793" title="Executes the linux command through code and get the output and error if any. ">etn::exec</a>( { "/usr/bin/introduction.sh", "Hello" }, "Jon Doe", 3, &amp;out, &amp;err);</code></p>
<p>Here, The first three arguments are same as those with the constructor.</p>
<ul>
<li>Vector of the shell script path and the arguments required to be passed to the script.</li>
<li>Stdin input required by the script during run time.</li>
<li>Timeout or time to wait for the script to execute before killing it forcefully.</li>
<li>The additional arguments 'out' and 'err' are output arguments which store the stdout and stderr messages output by the script during or after execution.</li>
<li>The return value of the function is the integer value of status of the script whether success or failure.</li>
</ul>
<p>You can refer the <code>px-red-time-change-notifier</code> module for more examples on usage.</p>
<h2>2. class <code>CLinuxUtil</code>:</h2>
<p>Functions of this class can be used to execute a command line in shell but through CPP code. A single shell command or multiple commands in a single line can be executed using this class. Functions from this class also provide logging support during the execution of the commands.</p>
<p>For example, command line to be executed is: <code>cdscmd -gd &amp;&amp; cdscmd -gu</code></p>
<p>Above command(s) can be executed as: <em>Function definition:</em> <code>bool shell_cmd(const char* label, const char* cmd, bool leave_newline, int&amp; cmd_status, std::vector&lt;std::string&gt;&amp; outlines)</code></p>
<p><em>Usage:</em> <code>bool rv = shell_cmd("cds data", "cdscmd -gd &amp;&amp; cdscmd -gu", true, status, outlines);</code></p>
<p>Here,</p>
<ul>
<li>The first argument is a label or tag describing the command line.</li>
<li>The second argument is the actual command(s) to be executed.</li>
<li>The third argument is a flag indicating whether to strip the new line character at the end of the output.</li>
<li>The fourth argument is the integer value of the command status whether success or failure.</li>
<li>The last argument is the combined stdout and stderr output of the command(s).</li>
<li>The return value of the function is a boolean flag indicating success or failure.</li>
</ul>
<p>You can refer <code>px-toolkit/etn_source/iot_agent</code> for more examples on usage. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri May 7 2021 20:24:49 for libetnlnxutils by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
