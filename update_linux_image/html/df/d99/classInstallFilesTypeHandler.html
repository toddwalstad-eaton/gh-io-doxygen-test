<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>update_linux_image: InstallFilesTypeHandler Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">update_linux_image
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="../../inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('df/d99/classInstallFilesTypeHandler.html','../../');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="../../d0/df6/classInstallFilesTypeHandler-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">InstallFilesTypeHandler Class Reference<div class="ingroups"><a class="el" href="../../d2/da4/group__LinuxImage__implementation.html">The classes that specifically implement the LinuxImage update.</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Derived Class to manage the "update" steps for the InstallFiles image_type.  
 <a href="../../df/d99/classInstallFilesTypeHandler.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../d2/d78/linux__image__type__handler_8hpp_source.html">linux_image_type_handler.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for InstallFilesTypeHandler:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/df4/classInstallFilesTypeHandler__inherit__graph.png" border="0" usemap="#InstallFilesTypeHandler_inherit__map" alt="Inheritance graph"/></div>
<map name="InstallFilesTypeHandler_inherit__map" id="InstallFilesTypeHandler_inherit__map">
</map>
</div>
<div class="dynheader">
Collaboration diagram for InstallFilesTypeHandler:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/d6c/classInstallFilesTypeHandler__coll__graph.png" border="0" usemap="#InstallFilesTypeHandler_coll__map" alt="Collaboration graph"/></div>
<map name="InstallFilesTypeHandler_coll__map" id="InstallFilesTypeHandler_coll__map">
<area shape="rect" id="node3" href="../../d9/d85/classCFwLnxUtil.html" title="Class to support Linux Image Updates. " alt="" coords="174,518,364,815"/><area shape="rect" id="node6" title="STL class. " alt="" coords="185,163,337,255"/><area shape="rect" id="node7" title="STL class. " alt="" coords="374,348,460,425"/><area shape="rect" id="node9" title="STL class. " alt="" coords="361,6,500,98"/></map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4df7a373a990d51b2ae223ca382e5785"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d99/classInstallFilesTypeHandler.html#a4df7a373a990d51b2ae223ca382e5785">InstallFilesTypeHandler</a> (std::shared_ptr&lt; px::asio::CCdsSyncIO &gt; cds_handler, const struct img_upd_options &amp;<a class="el" href="../../df/d0a/main_8cpp.html#afe752e69b031b538f56175e2114599dc">g_options</a>, ImageResultsOob &amp;iroob, <a class="el" href="../../d9/d85/classCFwLnxUtil.html">CFwLnxUtil</a> &amp;fw_util)</td></tr>
<tr class="memdesc:a4df7a373a990d51b2ae223ca382e5785"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#a4df7a373a990d51b2ae223ca382e5785">More...</a><br/></td></tr>
<tr class="separator:a4df7a373a990d51b2ae223ca382e5785"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e0c024cd6510a323b05b85b84e6c9d1"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d99/classInstallFilesTypeHandler.html#a1e0c024cd6510a323b05b85b84e6c9d1">~InstallFilesTypeHandler</a> ()</td></tr>
<tr class="memdesc:a1e0c024cd6510a323b05b85b84e6c9d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor, with default implementation.  <a href="#a1e0c024cd6510a323b05b85b84e6c9d1">More...</a><br/></td></tr>
<tr class="separator:a1e0c024cd6510a323b05b85b84e6c9d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8117c625ed179e393e2edf9d8224aaf"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d99/classInstallFilesTypeHandler.html#ab8117c625ed179e393e2edf9d8224aaf">prelim_check_steps</a> (px::id_t dev_id, const CFwUtil::image_update_params_t &amp;update_params)</td></tr>
<tr class="memdesc:ab8117c625ed179e393e2edf9d8224aaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to do the preliminary validity checks and step count for this image type for the indicated device.  <a href="#ab8117c625ed179e393e2edf9d8224aaf">More...</a><br/></td></tr>
<tr class="separator:ab8117c625ed179e393e2edf9d8224aaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba7cb45f928780a1b61c239490544d9c"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d99/classInstallFilesTypeHandler.html#aba7cb45f928780a1b61c239490544d9c">do_update_steps</a> (px::id_t dev_id, const CFwUtil::image_update_params_t &amp;update_params)</td></tr>
<tr class="memdesc:aba7cb45f928780a1b61c239490544d9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to do the update steps for the given type_file_list for the indicated device (publisher).  <a href="#aba7cb45f928780a1b61c239490544d9c">More...</a><br/></td></tr>
<tr class="separator:aba7cb45f928780a1b61c239490544d9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:afc265ffe08e6964ad4bba1a6e5c3a30e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d85/classCFwLnxUtil.html">CFwLnxUtil</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d99/classInstallFilesTypeHandler.html#afc265ffe08e6964ad4bba1a6e5c3a30e">_fw_util</a></td></tr>
<tr class="memdesc:afc265ffe08e6964ad4bba1a6e5c3a30e"><td class="mdescLeft">&#160;</td><td class="mdescRight">A reference to the <a class="el" href="../../d9/d85/classCFwLnxUtil.html" title="Class to support Linux Image Updates. ">CFwLnxUtil</a> instance, which holds data and utility functions for the linux update.  <a href="#afc265ffe08e6964ad4bba1a6e5c3a30e">More...</a><br/></td></tr>
<tr class="separator:afc265ffe08e6964ad4bba1a6e5c3a30e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Derived Class to manage the "update" steps for the InstallFiles image_type. </p>
<p>There are two phases here:</p>
<ul>
<li>the preliminary path check plus step count determination (adds 1 to the total step count)</li>
<li>copying the listed files in their given order </li>
</ul>

<p>Definition at line <a class="el" href="../../d2/d78/linux__image__type__handler_8hpp_source.html#l00090">90</a> of file <a class="el" href="../../d2/d78/linux__image__type__handler_8hpp_source.html">linux_image_type_handler.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a4df7a373a990d51b2ae223ca382e5785"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">InstallFilesTypeHandler::InstallFilesTypeHandler </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; px::asio::CCdsSyncIO &gt;&#160;</td>
          <td class="paramname"><em>cds_handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct img_upd_options &amp;&#160;</td>
          <td class="paramname"><em>g_options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ImageResultsOob &amp;&#160;</td>
          <td class="paramname"><em>iroob</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d85/classCFwLnxUtil.html">CFwLnxUtil</a> &amp;&#160;</td>
          <td class="paramname"><em>fw_util</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cds_handler</td><td>Pointer to the synchronous CdsHandler we need for doing OOB work. </td></tr>
    <tr><td class="paramname">g_options</td><td>Reference to the global command line options. </td></tr>
    <tr><td class="paramname">app_name</td><td>The name given to the Image Update app this library is linked to. (This library class must be told what it is.) </td></tr>
    <tr><td class="paramname">iroob</td><td>A reference to the ImageResultsOob instance, so status can be updated. </td></tr>
    <tr><td class="paramname">fw_util</td><td>A reference to the <a class="el" href="../../d9/d85/classCFwLnxUtil.html" title="Class to support Linux Image Updates. ">CFwLnxUtil</a> instance, which provides utility functions. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d8/de5/linux__image__type__handler_8cpp_source.html#l00197">197</a> of file <a class="el" href="../../d8/de5/linux__image__type__handler_8cpp_source.html">linux_image_type_handler.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a1e0c024cd6510a323b05b85b84e6c9d1"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">InstallFilesTypeHandler::~InstallFilesTypeHandler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destructor, with default implementation. </p>

<p>Definition at line <a class="el" href="../../d8/de5/linux__image__type__handler_8cpp_source.html#l00205">205</a> of file <a class="el" href="../../d8/de5/linux__image__type__handler_8cpp_source.html">linux_image_type_handler.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ab8117c625ed179e393e2edf9d8224aaf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool InstallFilesTypeHandler::prelim_check_steps </td>
          <td>(</td>
          <td class="paramtype">px::id_t&#160;</td>
          <td class="paramname"><em>dev_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const CFwUtil::image_update_params_t &amp;&#160;</td>
          <td class="paramname"><em>update_params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Method to do the preliminary validity checks and step count for this image type for the indicated device. </p>
<p>Just a simple process; no new_version is checked (or thus refused), but we do check that the target path given in product_arg is writable by this user. If the checks succeed, the total step count in the ImageResultsOob should be increased by just one, since file copies are a pretty quick step.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev_id</td><td>The targeted device's CDS ID. We do validate that this is for the publisher device. </td></tr>
    <tr><td class="paramname">update_params</td><td>The entry from the ImageList file for this image type. Will use the product_arg to determine validity. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if no problems seen to do the indicated update, else False if a fatal error is detected and the update must not proceed. </dd></dl>

<p>Definition at line <a class="el" href="../../d8/de5/linux__image__type__handler_8cpp_source.html#l00211">211</a> of file <a class="el" href="../../d8/de5/linux__image__type__handler_8cpp_source.html">linux_image_type_handler.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../df/d99/classInstallFilesTypeHandler_ab8117c625ed179e393e2edf9d8224aaf_icgraph.png" border="0" usemap="#df/d99/classInstallFilesTypeHandler_ab8117c625ed179e393e2edf9d8224aaf_icgraph" alt=""/></div>
<map name="df/d99/classInstallFilesTypeHandler_ab8117c625ed179e393e2edf9d8224aaf_icgraph" id="df/d99/classInstallFilesTypeHandler_ab8117c625ed179e393e2edf9d8224aaf_icgraph">
<area shape="rect" id="node2" href="../../df/d0a/main_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="227,12,282,39"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aba7cb45f928780a1b61c239490544d9c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool InstallFilesTypeHandler::do_update_steps </td>
          <td>(</td>
          <td class="paramtype">px::id_t&#160;</td>
          <td class="paramname"><em>dev_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const CFwUtil::image_update_params_t &amp;&#160;</td>
          <td class="paramname"><em>update_params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Method to do the update steps for the given type_file_list for the indicated device (publisher). </p>
<p>Each of the listed files should be updated as indicated by its type, which ought normally to be of the 'copy' or 'script' type. The ImageResultsOob should be updated for one step, but the ImageResultsOob will NOT have a "success" or "failure" entry for this type when done.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev_id</td><td>The targeted device's CDS ID. </td></tr>
    <tr><td class="paramname">update_params</td><td>The entry from the ImageList file for this image type. Will use the type_file_list and process for all files listed there in the given order. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if no problems doing update steps (the expected result), else False if a problem is encountered that means that this device was not updated for this image type. Whether the rest of the update is canceled for a failure here is up to the calling image update app. </dd></dl>

<p>Definition at line <a class="el" href="../../d8/de5/linux__image__type__handler_8cpp_source.html#l00251">251</a> of file <a class="el" href="../../d8/de5/linux__image__type__handler_8cpp_source.html">linux_image_type_handler.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../df/d99/classInstallFilesTypeHandler_aba7cb45f928780a1b61c239490544d9c_icgraph.png" border="0" usemap="#df/d99/classInstallFilesTypeHandler_aba7cb45f928780a1b61c239490544d9c_icgraph" alt=""/></div>
<map name="df/d99/classInstallFilesTypeHandler_aba7cb45f928780a1b61c239490544d9c_icgraph" id="df/d99/classInstallFilesTypeHandler_aba7cb45f928780a1b61c239490544d9c_icgraph">
<area shape="rect" id="node2" href="../../df/d0a/main_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title="main" alt="" coords="227,12,282,39"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="afc265ffe08e6964ad4bba1a6e5c3a30e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d85/classCFwLnxUtil.html">CFwLnxUtil</a>&amp; InstallFilesTypeHandler::_fw_util</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A reference to the <a class="el" href="../../d9/d85/classCFwLnxUtil.html" title="Class to support Linux Image Updates. ">CFwLnxUtil</a> instance, which holds data and utility functions for the linux update. </p>

<p>Definition at line <a class="el" href="../../d2/d78/linux__image__type__handler_8hpp_source.html#l00140">140</a> of file <a class="el" href="../../d2/d78/linux__image__type__handler_8hpp_source.html">linux_image_type_handler.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/src/product-ref1/px-toolkit/etn_source/update_linux_image/include/<a class="el" href="../../d2/d78/linux__image__type__handler_8hpp_source.html">linux_image_type_handler.hpp</a></li>
<li>/src/product-ref1/px-toolkit/etn_source/update_linux_image/source/<a class="el" href="../../d8/de5/linux__image__type__handler_8cpp_source.html">linux_image_type_handler.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../df/d99/classInstallFilesTypeHandler.html">InstallFilesTypeHandler</a></li>
    <li class="footer">Generated on Fri May 7 2021 20:24:13 for update_linux_image by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
