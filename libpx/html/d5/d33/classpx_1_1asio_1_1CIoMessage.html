<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>libpx: px::asio::CIoMessage Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libpx
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d5/d33/classpx_1_1asio_1_1CIoMessage.html','../../');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="../../d1/de6/classpx_1_1asio_1_1CIoMessage-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">px::asio::CIoMessage Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>I/O Message base class.  
 <a href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../d8/da7/io__message_8hpp_source.html">io_message.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for px::asio::CIoMessage:</div>
<div class="dyncontent">
<div class="center"><img src="../../db/d57/classpx_1_1asio_1_1CIoMessage__inherit__graph.png" border="0" usemap="#px_1_1asio_1_1CIoMessage_inherit__map" alt="Inheritance graph"/></div>
<map name="px_1_1asio_1_1CIoMessage_inherit__map" id="px_1_1asio_1_1CIoMessage_inherit__map">
<area shape="rect" id="node2" href="../../db/d01/classpx_1_1asio_1_1CTimedObject.html" title="The &quot;Timed object&quot; interface. " alt="" coords="5,5,179,83"/></map>
</div>
<div class="dynheader">
Collaboration diagram for px::asio::CIoMessage:</div>
<div class="dyncontent">
<div class="center"><img src="../../da/db3/classpx_1_1asio_1_1CIoMessage__coll__graph.png" border="0" usemap="#px_1_1asio_1_1CIoMessage_coll__map" alt="Collaboration graph"/></div>
<map name="px_1_1asio_1_1CIoMessage_coll__map" id="px_1_1asio_1_1CIoMessage_coll__map">
<area shape="rect" id="node2" href="../../db/d01/classpx_1_1asio_1_1CTimedObject.html" title="The &quot;Timed object&quot; interface. " alt="" coords="5,2261,179,2339"/><area shape="rect" id="node20" href="../../dd/d57/classpx_1_1CBitset.html" title="{px::CBitset\&lt; px::permissions \&gt;\n||+ CBitset()\l+ get()\l+ set()\l+ reset()\l+ mask_set()\l+ mask_clear()\l+ mask()\l+ empty()\l+ operator==()\l+ operator!=()\land 11 more...\l+ size()\l+ nbytes()\l}" alt="" coords="3396,664,3623,917"/><area shape="rect" id="node24" href="../../dd/d57/classpx_1_1CBitset.html" title="Stores a bit&#45;field of flags defined by an enumerated type. " alt="" coords="3363,317,3493,571"/><area shape="rect" id="node7" href="../../d3/ddc/classpx_1_1asio_1_1CIoMessenger.html" title="I/O &quot;Messenger&quot; class. " alt="" coords="367,2195,539,2405"/><area shape="rect" id="node6" title="STL class. " alt="" coords="767,1921,896,1999"/><area shape="rect" id="node8" href="../../dd/d60/classpx_1_1asio_1_1CIoActor.html" title="The I/O &quot;Actor&quot; base class. " alt="" coords="590,1870,743,2050"/><area shape="rect" id="node10" href="../../d6/d32/classpx_1_1asio_1_1CIoManager.html" title="The main I/O manager to host the Power Xpert Toolkit&#39;s ASIO framework. " alt="" coords="2110,1507,2308,1746"/><area shape="rect" id="node11" href="../../d2/dcb/classpx_1_1asio_1_1CCdsHandler.html" title="ABC for CDS Handler, provides a common synchronous/asynchronous interface to the CDS API..." alt="" coords="2312,1059,2525,1429"/><area shape="rect" id="node12" href="../../d2/df5/classpx_1_1asio_1_1CCdsSyncIO.html" title="Provides a set of common CDS utility functions. " alt="" coords="3647,671,3840,910"/><area shape="rect" id="node15" title="STL class. " alt="" coords="1058,405,1192,483"/><area shape="rect" id="node22" title="STL class. " alt="" coords="3527,5,3649,83"/><area shape="rect" id="node32" title="STL class. " alt="" coords="507,405,635,483"/><area shape="rect" id="node40" title="STL class. " alt="" coords="4251,752,4408,829"/><area shape="rect" id="node41" href="../../dc/d82/classpx_1_1asio_1_1CServerCore.html" title="Server core class. " alt="" coords="1944,1176,2107,1312"/><area shape="rect" id="node44" title="STL class. " alt="" coords="454,752,636,829"/><area shape="rect" id="node47" href="../../d5/d4c/classpx_1_1CMonoTime.html" title="Monotonic time. " alt="" coords="1254,2173,1377,2427"/><area shape="rect" id="node48" href="../../d6/d4e/classpx_1_1CTimestamp.html" title="Wrapper around a &quot;timespec&quot; structure that provides additional useful functionality. " alt="" coords="2249,1811,2468,2109"/><area shape="rect" id="node49" href="../../da/d9d/classtimespec.html" title="{timespec\n||}" alt="" coords="2408,1588,2491,1665"/></map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7666ea342ef87774cdcaf7d3bd0bb0f8"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a7666ea342ef87774cdcaf7d3bd0bb0f8">CIoMessage</a> ()</td></tr>
<tr class="memdesc:a7666ea342ef87774cdcaf7d3bd0bb0f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor.  <a href="#a7666ea342ef87774cdcaf7d3bd0bb0f8">More...</a><br/></td></tr>
<tr class="separator:a7666ea342ef87774cdcaf7d3bd0bb0f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a110203edbcf7855c0e886c284404bd"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a7a110203edbcf7855c0e886c284404bd">~CIoMessage</a> ()</td></tr>
<tr class="memdesc:a7a110203edbcf7855c0e886c284404bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default destructor, a virtual.  <a href="#a7a110203edbcf7855c0e886c284404bd">More...</a><br/></td></tr>
<tr class="separator:a7a110203edbcf7855c0e886c284404bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab613de88ce51213c493ac7e0875b8e2e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#ab613de88ce51213c493ac7e0875b8e2e">execute</a> (<a class="el" href="../../d3/ddc/classpx_1_1asio_1_1CIoMessenger.html">CIoMessenger</a> *messenger)</td></tr>
<tr class="memdesc:ab613de88ce51213c493ac7e0875b8e2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execute this I/O message (kickoff the sending and receiving).  <a href="#ab613de88ce51213c493ac7e0875b8e2e">More...</a><br/></td></tr>
<tr class="separator:ab613de88ce51213c493ac7e0875b8e2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac101cebb7b83f1af5c679543aecaad4d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#ac101cebb7b83f1af5c679543aecaad4d">handle_recv</a> (size_t nbytes)</td></tr>
<tr class="memdesc:ac101cebb7b83f1af5c679543aecaad4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle incoming data.  <a href="#ac101cebb7b83f1af5c679543aecaad4d">More...</a><br/></td></tr>
<tr class="separator:ac101cebb7b83f1af5c679543aecaad4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a239b49519180b8d3c0e9e804491cbcf2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a239b49519180b8d3c0e9e804491cbcf2">handle_send</a> ()</td></tr>
<tr class="memdesc:a239b49519180b8d3c0e9e804491cbcf2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle the end of the send.  <a href="#a239b49519180b8d3c0e9e804491cbcf2">More...</a><br/></td></tr>
<tr class="separator:a239b49519180b8d3c0e9e804491cbcf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7804647aa7524cdc7b3ad3a11dce6160"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a7804647aa7524cdc7b3ad3a11dce6160">err</a> ()=0</td></tr>
<tr class="memdesc:a7804647aa7524cdc7b3ad3a11dce6160"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback for when an error occurs (here, a pure virtual function).  <a href="#a7804647aa7524cdc7b3ad3a11dce6160">More...</a><br/></td></tr>
<tr class="separator:a7804647aa7524cdc7b3ad3a11dce6160"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a3bc645adf02f2544769c748647facd51"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a3bc645adf02f2544769c748647facd51">run</a> ()=0</td></tr>
<tr class="memdesc:a3bc645adf02f2544769c748647facd51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run this I/O message (a pure virtual function here).  <a href="#a3bc645adf02f2544769c748647facd51">More...</a><br/></td></tr>
<tr class="separator:a3bc645adf02f2544769c748647facd51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5135056ce8f5de0e3425d6cb6056d95e"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a5135056ce8f5de0e3425d6cb6056d95e">parse</a> ()=0</td></tr>
<tr class="memdesc:a5135056ce8f5de0e3425d6cb6056d95e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to parse the read buffer, to see if we are done receiving.  <a href="#a5135056ce8f5de0e3425d6cb6056d95e">More...</a><br/></td></tr>
<tr class="separator:a5135056ce8f5de0e3425d6cb6056d95e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a60f5009456dc11a736650d614d25a8"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a5a60f5009456dc11a736650d614d25a8">write_complete</a> ()=0</td></tr>
<tr class="memdesc:a5a60f5009456dc11a736650d614d25a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notify our derived class that write() is done (pure virtual here).  <a href="#a5a60f5009456dc11a736650d614d25a8">More...</a><br/></td></tr>
<tr class="separator:a5a60f5009456dc11a736650d614d25a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b2f07ca6577f635a2bbbb5182b77b63"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a0b2f07ca6577f635a2bbbb5182b77b63">timeout</a> (const <a class="el" href="../../d6/d5e/classpx_1_1asio_1_1CIoTimer.html">CIoTimer</a> &amp;timer)</td></tr>
<tr class="memdesc:a0b2f07ca6577f635a2bbbb5182b77b63"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a timeout (inherited from <a class="el" href="../../db/d01/classpx_1_1asio_1_1CTimedObject.html" title="The &quot;Timed object&quot; interface. ">CTimedObject</a>).  <a href="#a0b2f07ca6577f635a2bbbb5182b77b63">More...</a><br/></td></tr>
<tr class="separator:a0b2f07ca6577f635a2bbbb5182b77b63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d2b1f87d45a75339a714e2743d6f69d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a3d2b1f87d45a75339a714e2743d6f69d">send</a> ()</td></tr>
<tr class="memdesc:a3d2b1f87d45a75339a714e2743d6f69d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send data asynchronously.  <a href="#a3d2b1f87d45a75339a714e2743d6f69d">More...</a><br/></td></tr>
<tr class="separator:a3d2b1f87d45a75339a714e2743d6f69d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a470eedfe2796509aa4fadc29180ff0d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a470eedfe2796509aa4fadc29180ff0d8">recv</a> ()</td></tr>
<tr class="memdesc:a470eedfe2796509aa4fadc29180ff0d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive data asynchronously.  <a href="#a470eedfe2796509aa4fadc29180ff0d8">More...</a><br/></td></tr>
<tr class="separator:a470eedfe2796509aa4fadc29180ff0d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3200f834b65de1ccfc211e9f860a327a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a3200f834b65de1ccfc211e9f860a327a">done</a> ()</td></tr>
<tr class="memdesc:a3200f834b65de1ccfc211e9f860a327a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicate that this message doesn't need any more I/O.  <a href="#a3200f834b65de1ccfc211e9f860a327a">More...</a><br/></td></tr>
<tr class="separator:a3200f834b65de1ccfc211e9f860a327a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fef590693aca7890de262f19d87fcf6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a9fef590693aca7890de262f19d87fcf6">reset_timer</a> (size_t msec)</td></tr>
<tr class="memdesc:a9fef590693aca7890de262f19d87fcf6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a timer to expire in 'msec' milliseconds from now.  <a href="#a9fef590693aca7890de262f19d87fcf6">More...</a><br/></td></tr>
<tr class="separator:a9fef590693aca7890de262f19d87fcf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae23fc19ed406a2b2f7b51ea69e72e6c4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#ae23fc19ed406a2b2f7b51ea69e72e6c4">cancel</a> ()</td></tr>
<tr class="memdesc:ae23fc19ed406a2b2f7b51ea69e72e6c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cancel I/O operation.  <a href="#ae23fc19ed406a2b2f7b51ea69e72e6c4">More...</a><br/></td></tr>
<tr class="separator:ae23fc19ed406a2b2f7b51ea69e72e6c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:ab537dd841396c385d80bd87ac78baffe"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/dbb/namespacepx_1_1asio.html#a6fd452467d2d117d32fb89ed6fbdc182">io_buf_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#ab537dd841396c385d80bd87ac78baffe">_wbuf</a></td></tr>
<tr class="memdesc:ab537dd841396c385d80bd87ac78baffe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write buffer.  <a href="#ab537dd841396c385d80bd87ac78baffe">More...</a><br/></td></tr>
<tr class="separator:ab537dd841396c385d80bd87ac78baffe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acaebc998f2855d76fd344f84e48a6365"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/dbb/namespacepx_1_1asio.html#a6fd452467d2d117d32fb89ed6fbdc182">io_buf_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#acaebc998f2855d76fd344f84e48a6365">_rbuf</a></td></tr>
<tr class="memdesc:acaebc998f2855d76fd344f84e48a6365"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read buffer.  <a href="#acaebc998f2855d76fd344f84e48a6365">More...</a><br/></td></tr>
<tr class="separator:acaebc998f2855d76fd344f84e48a6365"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe3510ec6c2b934c5a95245d34dc74f6"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#abe3510ec6c2b934c5a95245d34dc74f6">_offset</a></td></tr>
<tr class="memdesc:abe3510ec6c2b934c5a95245d34dc74f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current offset into read buffer.  <a href="#abe3510ec6c2b934c5a95245d34dc74f6">More...</a><br/></td></tr>
<tr class="separator:abe3510ec6c2b934c5a95245d34dc74f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f7bb062548d3f4e1508d60684729ab4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d5/d4c/classpx_1_1CMonoTime.html">px::CMonoTime</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a1f7bb062548d3f4e1508d60684729ab4">_start_time</a></td></tr>
<tr class="memdesc:a1f7bb062548d3f4e1508d60684729ab4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Time at which this message was initiated.  <a href="#a1f7bb062548d3f4e1508d60684729ab4">More...</a><br/></td></tr>
<tr class="separator:a1f7bb062548d3f4e1508d60684729ab4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb6752ace632ffe560122d122af92a2d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d5/d4c/classpx_1_1CMonoTime.html">px::CMonoTime</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#acb6752ace632ffe560122d122af92a2d">_end_time</a></td></tr>
<tr class="memdesc:acb6752ace632ffe560122d122af92a2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Time at which this message finished performing I/O.  <a href="#acb6752ace632ffe560122d122af92a2d">More...</a><br/></td></tr>
<tr class="separator:acb6752ace632ffe560122d122af92a2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ac78224657e5bcb3679c459ef62c97e2d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/ddc/classpx_1_1asio_1_1CIoMessenger.html">CIoMessenger</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#ac78224657e5bcb3679c459ef62c97e2d">_messenger</a></td></tr>
<tr class="memdesc:ac78224657e5bcb3679c459ef62c97e2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Saved handle to the I/O messenger that is currently executing this message.  <a href="#ac78224657e5bcb3679c459ef62c97e2d">More...</a><br/></td></tr>
<tr class="separator:ac78224657e5bcb3679c459ef62c97e2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a209faa4e25dc888f598a72d02dfd0d34"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="../../d6/d5e/classpx_1_1asio_1_1CIoTimer.html">CIoTimer</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a209faa4e25dc888f598a72d02dfd0d34">_timer</a></td></tr>
<tr class="memdesc:a209faa4e25dc888f598a72d02dfd0d34"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timer object utilized by <a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a9fef590693aca7890de262f19d87fcf6" title="Set a timer to expire in &#39;msec&#39; milliseconds from now. ">reset_timer()</a>  <a href="#a209faa4e25dc888f598a72d02dfd0d34">More...</a><br/></td></tr>
<tr class="separator:a209faa4e25dc888f598a72d02dfd0d34"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a9e26b8770a36af54ee0a0acd57fe3f04"><td class="memItemLeft" align="right" valign="top">static const size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a9e26b8770a36af54ee0a0acd57fe3f04">_chunk_size</a> = 128</td></tr>
<tr class="memdesc:a9e26b8770a36af54ee0a0acd57fe3f04"><td class="mdescLeft">&#160;</td><td class="mdescRight">Chunk size for the internal read/write buffer.  <a href="#a9e26b8770a36af54ee0a0acd57fe3f04">More...</a><br/></td></tr>
<tr class="separator:a9e26b8770a36af54ee0a0acd57fe3f04"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>I/O Message base class. </p>
<p>This ABC encapsulates the basic "unit of work" do be done on a device handler: some sort of I/O (for example, sending out a request and receiving a response), along with associated functions for creating data to be sent, parsing data that's received, and driving internal state as needed based.</p>
<p>All communication with connected devices occurs by way of these messages. This includes normal requests and responses, broadcasts, and really anything that involves communication through the I/O subsystem. Pass-through is handled similarly, just with the directionality of the message handling reversed.</p>
<p>Other parts of the DH that this class needs to know about:</p>
<p><a class="el" href="../../d3/ddc/classpx_1_1asio_1_1CIoMessenger.html" title="I/O &quot;Messenger&quot; class. ">CIoMessenger</a> (to drive I/O) <a class="el" href="../../d6/d5e/classpx_1_1asio_1_1CIoTimer.html" title="The I/O Timer class for our ASIO Actors. ">CIoTimer</a> (to manage timeouts) </p>

<p>Definition at line <a class="el" href="../../d8/da7/io__message_8hpp_source.html#l00034">34</a> of file <a class="el" href="../../d8/da7/io__message_8hpp_source.html">io_message.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a7666ea342ef87774cdcaf7d3bd0bb0f8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">px::asio::CIoMessage::CIoMessage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default constructor. </p>

</div>
</div>
<a class="anchor" id="a7a110203edbcf7855c0e886c284404bd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual px::asio::CIoMessage::~CIoMessage </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Default destructor, a virtual. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ab613de88ce51213c493ac7e0875b8e2e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void px::asio::CIoMessage::execute </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/ddc/classpx_1_1asio_1_1CIoMessenger.html">CIoMessenger</a> *&#160;</td>
          <td class="paramname"><em>messenger</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Execute this I/O message (kickoff the sending and receiving). </p>
<p>This must be called first, before <a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#ac101cebb7b83f1af5c679543aecaad4d" title="Handle incoming data. ">handle_recv()</a> or <a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a239b49519180b8d3c0e9e804491cbcf2" title="Handle the end of the send. ">handle_send()</a> can be called, since it assigns the messenger to call back to.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">messenger</td><td>- This method is invoked by the I/O messenger, (eg, <a class="el" href="../../d5/daf/classCSerialConnection.html" title="Serial Connection class. ">CSerialConnection</a>) which passes itself as an argument. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ac101cebb7b83f1af5c679543aecaad4d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void px::asio::CIoMessage::handle_recv </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>nbytes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle incoming data. </p>
<p>This call is invoked when more data has been obtained from the I/O subsystem, and copied into the buffer allocated by <a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a470eedfe2796509aa4fadc29180ff0d8" title="Receive data asynchronously. ">recv()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">nbytes</td><td>The number of bytes which were copied into the read buffer. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a239b49519180b8d3c0e9e804491cbcf2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void px::asio::CIoMessage::handle_send </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle the end of the send. </p>
<p>This call is invoked when data from _wbuf has been written to the I/O subsystem successfully. </p>

</div>
</div>
<a class="anchor" id="a7804647aa7524cdc7b3ad3a11dce6160"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void px::asio::CIoMessage::err </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Callback for when an error occurs (here, a pure virtual function). </p>
<p>This is invoked if the I/O messenger gets any sort of low-level error. Note that this is very rare in practice, we'll probably almost never see this actually getting invoked for serial transfers. Instead, errors will typically be in the form of timeouts or protocol-level errors, neither of which use this call.</p>
<p>Typically we'll handle this by performing any needed clean-up of our internal state, then calling <a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a3200f834b65de1ccfc211e9f860a327a" title="Indicate that this message doesn&#39;t need any more I/O. ">done()</a> to tell the I/O messenger to move on to another message. </p>

</div>
</div>
<a class="anchor" id="a3bc645adf02f2544769c748647facd51"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void px::asio::CIoMessage::run </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Run this I/O message (a pure virtual function here). </p>
<p>Execution can perform any number of sends and receives via the associated I/O messenger, depending on the specific kind of I/O message being executed. Note that this call really just <em>BEGINS</em> execution, since it will probably result in a long-running operation that is driven by the ASIO subsystem.</p>
<p>In the simple case, we'll have this sequence of calls:</p>
<ul>
<li>this-&gt;<a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a3bc645adf02f2544769c748647facd51" title="Run this I/O message (a pure virtual function here). ">run()</a> is called:<ul>
<li>serialize some data into _wbuf</li>
<li>call <a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a3d2b1f87d45a75339a714e2743d6f69d" title="Send data asynchronously. ">send()</a></li>
<li>return</li>
</ul>
</li>
<li>(ASIO stuff)</li>
<li>this-&gt;<a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a239b49519180b8d3c0e9e804491cbcf2" title="Handle the end of the send. ">handle_send()</a> is called:<ul>
<li>call <a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a470eedfe2796509aa4fadc29180ff0d8" title="Receive data asynchronously. ">recv()</a></li>
<li>return</li>
</ul>
</li>
<li>(ASIO stuff)</li>
<li>this-&gt;<a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#ac101cebb7b83f1af5c679543aecaad4d" title="Handle incoming data. ">handle_recv()</a> is called:<ul>
<li>call <a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a5135056ce8f5de0e3425d6cb6056d95e" title="Try to parse the read buffer, to see if we are done receiving. ">parse()</a></li>
<li>if done, call <a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a3200f834b65de1ccfc211e9f860a327a" title="Indicate that this message doesn&#39;t need any more I/O. ">done()</a></li>
<li>else, call <a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a470eedfe2796509aa4fadc29180ff0d8" title="Receive data asynchronously. ">recv()</a> again</li>
<li>return</li>
</ul>
</li>
</ul>
<p>However, the sequence can be arbitrarily complicated, e.g. for INCOM commands which must do a sequence of SENDs and RECEIVEs for a single I/O message. Hence why this is a pure virtual: what actions it initiates is entirely dependent upon the sub-class.</p>
<p>Note, though, that even if the sequence is fairly complicated, <a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a3bc645adf02f2544769c748647facd51" title="Run this I/O message (a pure virtual function here). ">run()</a> itself will likely be simple, since all it does it START that sequence of actions. </p>

</div>
</div>
<a class="anchor" id="a5135056ce8f5de0e3425d6cb6056d95e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void px::asio::CIoMessage::parse </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Try to parse the read buffer, to see if we are done receiving. </p>
<p>This is called each time we receive more data. It will attempt to parse the valid portion of the read buffer (_rbuf[0] up to _rbuf[_offset]). A pure virtual here, it is the responsibility of the message sub-class to check and then perform the next action:</p>
<ul>
<li>If we don't need to perform any more I/O (for now), call <a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a3200f834b65de1ccfc211e9f860a327a" title="Indicate that this message doesn&#39;t need any more I/O. ">done()</a></li>
<li>If there was a known error, provide an error code and call <a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a3200f834b65de1ccfc211e9f860a327a" title="Indicate that this message doesn&#39;t need any more I/O. ">done()</a></li>
<li>If we need more data, call <a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a470eedfe2796509aa4fadc29180ff0d8" title="Receive data asynchronously. ">recv()</a> to initiate another asynchronous read operation</li>
<li>If we need to write more data out, call <a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a3d2b1f87d45a75339a714e2743d6f69d" title="Send data asynchronously. ">send()</a> to initiate an asynchronous write operation </li>
</ul>

</div>
</div>
<a class="anchor" id="a5a60f5009456dc11a736650d614d25a8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void px::asio::CIoMessage::write_complete </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Notify our derived class that write() is done (pure virtual here). </p>
<p>This call is invoked when data has been written to the I/O subsystem successfully. The sub-class must decide what next steps to take once that's happened:</p>
<ul>
<li>If we need more data, call <a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a470eedfe2796509aa4fadc29180ff0d8" title="Receive data asynchronously. ">recv()</a> to initiate an asynchronous read operation</li>
<li>If we need to write more data out, call <a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a3d2b1f87d45a75339a714e2743d6f69d" title="Send data asynchronously. ">send()</a> to initiate another asynchronous write operation</li>
<li>If we don't need to perform any more I/O (for now), call <a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a3200f834b65de1ccfc211e9f860a327a" title="Indicate that this message doesn&#39;t need any more I/O. ">done()</a> </li>
</ul>

</div>
</div>
<a class="anchor" id="a0b2f07ca6577f635a2bbbb5182b77b63"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void px::asio::CIoMessage::timeout </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d6/d5e/classpx_1_1asio_1_1CIoTimer.html">CIoTimer</a> &amp;&#160;</td>
          <td class="paramname"><em>timer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle a timeout (inherited from <a class="el" href="../../db/d01/classpx_1_1asio_1_1CTimedObject.html" title="The &quot;Timed object&quot; interface. ">CTimedObject</a>). </p>
<p>The base-class implementation of this function asserts 'false', since it should never be invoked. Any sub-classes which utilize the <a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a9fef590693aca7890de262f19d87fcf6" title="Set a timer to expire in &#39;msec&#39; milliseconds from now. ">reset_timer()</a> call must override this function and handle timeouts in whatever way is appropriate.</p>
<p>Typically we'll handle this by performing any needed clean-up of our internal state, then calling <a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a3200f834b65de1ccfc211e9f860a327a" title="Indicate that this message doesn&#39;t need any more I/O. ">done()</a> to tell the I/O messenger to move on to another message. It's similar to <a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a7804647aa7524cdc7b3ad3a11dce6160" title="Callback for when an error occurs (here, a pure virtual function). ">err()</a>, but may be treated differently under the hood &ndash; e.g. we do gradual back-off for devices that experience timeouts, but perhaps not when there's a hard error from the ASIO subsystem.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">timer</td><td>The <a class="el" href="../../d6/d5e/classpx_1_1asio_1_1CIoTimer.html" title="The I/O Timer class for our ASIO Actors. ">CIoTimer</a> that was triggered. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="../../db/d01/classpx_1_1asio_1_1CTimedObject.html#a959504cf2298d2513f9f3f04070f5260">px::asio::CTimedObject</a>.</p>

</div>
</div>
<a class="anchor" id="a3d2b1f87d45a75339a714e2743d6f69d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void px::asio::CIoMessage::send </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send data asynchronously. </p>
<p>This call sends the contents of _wbuf via the I/O messenger (which was previously saved at _messenger). This starts an asynchronous send operation, which will return immediately. _wbuf must remain valid until the <a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a239b49519180b8d3c0e9e804491cbcf2" title="Handle the end of the send. ">handle_send()</a> callback function is invoked. </p>

</div>
</div>
<a class="anchor" id="a470eedfe2796509aa4fadc29180ff0d8"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void px::asio::CIoMessage::recv </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Receive data asynchronously. </p>
<p>This call attempts to receive more data into _rbuf via the I/O messenger (which was previously saved at _messenger). This will initiate an asynchronous read operation, which will read UP TO _chunk_size bytes into _rbuf. Note the "UP TO" &ndash; we may be called back after only 1 byte has been read, or any other number up to _chunk_size bytes. The call will return immediately. _rbuf must remain valid until the <a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#ac101cebb7b83f1af5c679543aecaad4d" title="Handle incoming data. ">handle_recv()</a> callback function is invoked. </p>

</div>
</div>
<a class="anchor" id="a3200f834b65de1ccfc211e9f860a327a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void px::asio::CIoMessage::done </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Indicate that this message doesn't need any more I/O. </p>
<p>This call tells the messenger (which was previously saved at _messenger) that it is finished doing I/O, at least for now. The messenger will remove its handle to 'this', and start performing work for another message.</p>
<p>In the usual case, that will result in the destruction of 'this', because there's nothing left to be done at this point. But future design considerations may alter that (e.g. a message might perform some I/O, then get passed to a background thread for processing, then perform some more I/O later on). It's not relevant here; the purpose of <a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a3200f834b65de1ccfc211e9f860a327a" title="Indicate that this message doesn&#39;t need any more I/O. ">done()</a> is simply to say that, at least for now, the messenger can move on to other things. </p>

</div>
</div>
<a class="anchor" id="a9fef590693aca7890de262f19d87fcf6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void px::asio::CIoMessage::reset_timer </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>msec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set a timer to expire in 'msec' milliseconds from now. </p>
<p>If an existing timer is active, it is canceled. A new timer is then created, set to expire in 'msec' milliseconds from the time of this call.</p>
<p>Upon expiration, the <a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a0b2f07ca6577f635a2bbbb5182b77b63" title="Handle a timeout (inherited from CTimedObject). ">timeout()</a> callback function will be invoked.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msec</td><td>Time in milliseconds for the new timer to countdown from. Passing a timeout of 0 msec will cancel any existing timers. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae23fc19ed406a2b2f7b51ea69e72e6c4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void px::asio::CIoMessage::cancel </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Cancel I/O operation. </p>
<p>If an existing I/O operation is active, it is canceled.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">none</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="ab537dd841396c385d80bd87ac78baffe"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/dbb/namespacepx_1_1asio.html#a6fd452467d2d117d32fb89ed6fbdc182">io_buf_t</a> px::asio::CIoMessage::_wbuf</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write buffer. </p>
<p>This is a stream of bytes to be written/sent out via the messenger. The sub-class is responsible for assigning a value to this buffer prior to each <a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a3d2b1f87d45a75339a714e2743d6f69d" title="Send data asynchronously. ">send()</a>. </p>

<p>Definition at line <a class="el" href="../../d8/da7/io__message_8hpp_source.html#l00284">284</a> of file <a class="el" href="../../d8/da7/io__message_8hpp_source.html">io_message.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="acaebc998f2855d76fd344f84e48a6365"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/dbb/namespacepx_1_1asio.html#a6fd452467d2d117d32fb89ed6fbdc182">io_buf_t</a> px::asio::CIoMessage::_rbuf</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Read buffer. </p>
<p>This is a stream of bytes to be written/sent out via the messenger. When <a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a5135056ce8f5de0e3425d6cb6056d95e" title="Try to parse the read buffer, to see if we are done receiving. ">parse()</a> is invoked, the contents of this buffer (up to _offset) constitute the data which has been received thus far. </p>

<p>Definition at line <a class="el" href="../../d8/da7/io__message_8hpp_source.html#l00293">293</a> of file <a class="el" href="../../d8/da7/io__message_8hpp_source.html">io_message.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="abe3510ec6c2b934c5a95245d34dc74f6"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t px::asio::CIoMessage::_offset</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Current offset into read buffer. </p>
<p>This is an index into _rbuf, indicating the size of the portion of the buffer which is valid. <a class="el" href="../../de/dcb/namespacepx.html#a3598e99f8e0de6f210447c81d36be9c9af7bd60b75b29d79b660a2859395c1a24">_rbuf.size()</a> will always be &gt;= _offset. When the sub-class wishes to initiate a new sequence of <a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a470eedfe2796509aa4fadc29180ff0d8" title="Receive data asynchronously. ">recv()</a>s, it must first reset this value to 0, so that newly received data will start filling the beginning of the buffer (rather than being tacked on to the end of a previous message). </p>

<p>Definition at line <a class="el" href="../../d8/da7/io__message_8hpp_source.html#l00305">305</a> of file <a class="el" href="../../d8/da7/io__message_8hpp_source.html">io_message.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a1f7bb062548d3f4e1508d60684729ab4"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d5/d4c/classpx_1_1CMonoTime.html">px::CMonoTime</a> px::asio::CIoMessage::_start_time</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Time at which this message was initiated. </p>
<p>This marks the time at which the message began execution. Typically a message will execute from start to finish while bound to the same I/O messenger, and it's useful to know how long it took to complete (e.g. to send a Modbus "read registers" command and receive a response, or to perform a series of multi-part INCOM message exchanges that comprise one logical "message"). This forms the starting time used to measure that duration. </p>

<p>Definition at line <a class="el" href="../../d8/da7/io__message_8hpp_source.html#l00318">318</a> of file <a class="el" href="../../d8/da7/io__message_8hpp_source.html">io_message.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="acb6752ace632ffe560122d122af92a2d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d5/d4c/classpx_1_1CMonoTime.html">px::CMonoTime</a> px::asio::CIoMessage::_end_time</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Time at which this message finished performing I/O. </p>
<p>This is the timestamp that accompanies _start_time, but measures the end of our "active" duration. It gets updated every time I/O is performed on behalf of the message; once the message is finished, _end_time - _start_time tells us how long the entire exchange took to complete. </p>

<p>Definition at line <a class="el" href="../../d8/da7/io__message_8hpp_source.html#l00329">329</a> of file <a class="el" href="../../d8/da7/io__message_8hpp_source.html">io_message.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ac78224657e5bcb3679c459ef62c97e2d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/ddc/classpx_1_1asio_1_1CIoMessenger.html">CIoMessenger</a>* px::asio::CIoMessage::_messenger</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Saved handle to the I/O messenger that is currently executing this message. </p>

<p>Definition at line <a class="el" href="../../d8/da7/io__message_8hpp_source.html#l00340">340</a> of file <a class="el" href="../../d8/da7/io__message_8hpp_source.html">io_message.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a209faa4e25dc888f598a72d02dfd0d34"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="../../d6/d5e/classpx_1_1asio_1_1CIoTimer.html">CIoTimer</a>&gt; px::asio::CIoMessage::_timer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Timer object utilized by <a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html#a9fef590693aca7890de262f19d87fcf6" title="Set a timer to expire in &#39;msec&#39; milliseconds from now. ">reset_timer()</a> </p>

<p>Definition at line <a class="el" href="../../d8/da7/io__message_8hpp_source.html#l00345">345</a> of file <a class="el" href="../../d8/da7/io__message_8hpp_source.html">io_message.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a9e26b8770a36af54ee0a0acd57fe3f04"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const size_t px::asio::CIoMessage::_chunk_size = 128</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Chunk size for the internal read/write buffer. </p>
<p>This really doesn't matter. Seriously, just ignore it, unless you've actually profiled the running code and seen that it's hurting performance. </p>

<p>Definition at line <a class="el" href="../../d8/da7/io__message_8hpp_source.html#l00359">359</a> of file <a class="el" href="../../d8/da7/io__message_8hpp_source.html">io_message.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="../../d8/da7/io__message_8hpp_source.html">io_message.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../de/dcb/namespacepx.html">px</a></li><li class="navelem"><a class="el" href="../../d6/dbb/namespacepx_1_1asio.html">asio</a></li><li class="navelem"><a class="el" href="../../d5/d33/classpx_1_1asio_1_1CIoMessage.html">CIoMessage</a></li>
    <li class="footer">Generated on Fri May 7 2021 20:24:22 for libpx by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
