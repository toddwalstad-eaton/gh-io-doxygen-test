<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>libpx: udp_listener.cpp Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libpx
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d3/dc3/udp__listener_8cpp_source.html','../../');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">udp_listener.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d3/dc3/udp__listener_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * udp_listener.cpp</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> *  Created on: Jan 14, 2014</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *      Author: eaton</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div>
<div class="line"><a name="l00009"></a><span class="lineno"><a class="line" href="../../d3/dc3/udp__listener_8cpp.html#a15e74dc945b6abf9c8ce62fcba2e517a">    9</a></span>&#160;<span class="preprocessor">#define LIBPX_LOG_SUBSYSTEM LIBPX_LOG_TCP_IO</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="preprocessor">#include &lt;sys/ioctl.h&gt;</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;sys/types.h&gt;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &lt;sys/socket.h&gt;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;net/if.h&gt;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;netinet/in.h&gt;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;arpa/inet.h&gt;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/d2f/udp__listener_8hpp.html">px/asio/transactors/simple/udp/udp_listener.hpp</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/d76/io__manager_8hpp.html">px/asio/io_manager.hpp</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/de7/protocol__handler_8hpp.html">px/asio/protocol/protocol_handler.hpp</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d59/cast_8hpp.html">px/cast.hpp</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/d3d/log_8hpp.html">log.hpp</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;boost/bind.hpp&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="keyword">namespace </span>px {</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="keyword">namespace </span>asio {</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">// See udp_listener.hpp for description</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00031"></a><span class="lineno"><a class="line" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a8ebad3c8d31cfa4735cb366fc84d3d3f">   31</a></span>&#160;std::shared_ptr&lt;CUdpListener&gt; <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a8ebad3c8d31cfa4735cb366fc84d3d3f">CUdpListener::create</a>( <a class="code" href="../../d6/d32/classpx_1_1asio_1_1CIoManager.html">CIoManager</a> &amp;manager,</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;                                                                                                        <span class="keyword">const</span> <a class="code" href="../../d1/d20/classpx_1_1asio_1_1CProtocolHandler.html">CProtocolHandler</a> &amp;prot,</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;                                                                                                        uint16_t port )</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;{</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;        PUSH_FUNC;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;        std::shared_ptr&lt;CUdpListener&gt; retval( <span class="keyword">new</span> <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a2590c95249c5efa09a0cb291b8b8e4d3">CUdpListener</a>( manager, prot, port ) );</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        <span class="keywordflow">return</span> ( retval );</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;}</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">// See tcp_listener.hpp for description</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a2590c95249c5efa09a0cb291b8b8e4d3">   44</a></span>&#160;<a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a2590c95249c5efa09a0cb291b8b8e4d3">CUdpListener::CUdpListener</a>( <a class="code" href="../../d6/d32/classpx_1_1asio_1_1CIoManager.html">CIoManager</a> &amp;manager,</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                                                        <span class="keyword">const</span> <a class="code" href="../../d1/d20/classpx_1_1asio_1_1CProtocolHandler.html">CProtocolHandler</a> &amp;prot,</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                                                        uint16_t port )</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        : <a class="code" href="../../d2/d13/classpx_1_1asio_1_1CIoTransactor.html">CIoTransactor</a>( manager, prot ),</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        _prot( prot.clone( nullptr ) ), _port( port ), _shutdown( false ), _want_response( true )</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;{</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        PUSH_FUNC;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        assert( <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ab195f32d7fbd8cc6ccea9bd5b3899062">_prot</a> );</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <a class="code" href="../../d4/d3d/log_8hpp.html#a242c84f819cac7a2d5e9f2e2df788b0e">LIBPX_DEBUG</a>( 2, <span class="stringliteral">&quot;UdpListener: Listening for incoming %s messages on port %u&quot;</span>,</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;                                 prot.<a class="code" href="../../d1/d20/classpx_1_1asio_1_1CProtocolHandler.html#a5be0ff44a7c9794ee1c7717b93f8626a">protocol</a>().c_str(), ( unsigned )port );</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <span class="keywordflow">try</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        {</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;                <span class="comment">// Create UDP socket</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;                <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a1976d5cf7a32919a904016a479446f4e">reset_socket</a>();</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                <span class="comment">// start handling requests</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                this-&gt;<a class="code" href="../../d2/d13/classpx_1_1asio_1_1CIoTransactor.html#adc4afd0ca46c1111d323d16b094d3b37">start</a>();</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        }</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <span class="keywordflow">catch</span> ( <span class="keyword">const</span> boost::system::system_error &amp;e )</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                <a class="code" href="../../d4/d3d/log_8hpp.html#ab1ccbce6dc90278ccab5c9081dce6e17">LIBPX_FERR</a>( 0, <span class="stringliteral">&quot;While binding to UDP port %u: %s&quot;</span>, port, e.what() );</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                <span class="keywordflow">throw</span>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        }</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;}</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">// See udp_listener.hpp for description</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00075"></a><span class="lineno"><a class="line" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a19bb81bedd2b11ef38065ed5916f50ef">   75</a></span>&#160;<a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a19bb81bedd2b11ef38065ed5916f50ef">CUdpListener::~CUdpListener</a>()</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;{</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        PUSH_FUNC;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="keywordflow">try</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        {</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a867126e8b0de1f2443697f2cda72ffe1">close</a>();</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                <a class="code" href="../../d4/d3d/log_8hpp.html#a9f84712d72c0f218249f27e9a9fcca1d">LIBPX_FDEBUG</a>( 5, <span class="stringliteral">&quot;I am Destroyed&quot;</span> );</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        }</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="keywordflow">catch</span> ( <span class="keyword">const</span> std::exception &amp;e )</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                <a class="code" href="../../d4/d3d/log_8hpp.html#ab1ccbce6dc90278ccab5c9081dce6e17">LIBPX_FERR</a>( 1, <span class="stringliteral">&quot;%s&quot;</span>, e.what() );</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        }</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;}</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div>
<div class="line"><a name="l00090"></a><span class="lineno"><a class="line" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a1976d5cf7a32919a904016a479446f4e">   90</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a1976d5cf7a32919a904016a479446f4e">CUdpListener::reset_socket</a>()</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;{</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        PUSH_FUNC;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <a class="code" href="../../d4/d3d/log_8hpp.html#aedf82e390ea25288cf698a9d9eb470ef">LIBPX_INFO</a>( 2, <span class="stringliteral">&quot;Resetting CUdpListener socket for port %u&quot;</span>, <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a6128e4f63c942a336c39f3f41ff7d6a1">_port</a> );</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a0040ab70ecd027f2dcd0dae3ba803cc1">_udp_socket</a> != <span class="keyword">nullptr</span> )</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                <span class="keywordflow">try</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                {</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                        <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a0040ab70ecd027f2dcd0dae3ba803cc1">_udp_socket</a>-&gt;close();</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                }</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                <span class="keywordflow">catch</span> ( <span class="keyword">const</span> std::exception &amp;e )</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                        <a class="code" href="../../d4/d3d/log_8hpp.html#ab1ccbce6dc90278ccab5c9081dce6e17">LIBPX_FERR</a>( 1, <span class="stringliteral">&quot;Error attempting to close UDP socket %s&quot;</span>, e.what() );</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        <span class="keywordflow">if</span> ( !<a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a9e413f217b1a7c24f65daa05f5c347ae">_shutdown</a> )</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                <span class="comment">// Initialize the _sender_endpoint if it hasn&#39;t been set up yet</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                <span class="keywordflow">if</span> ( !<a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">_sender_endpoint</a> )</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                        <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">_sender_endpoint</a>.reset( <span class="keyword">new</span> boost::asio::ip::udp::udp::endpoint( <a class="code" href="../../dc/d2f/udp__listener_8hpp.html#abe19168f7b93b51ddee7f3d2f5b808d5">UDP_VER</a>(), <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a6128e4f63c942a336c39f3f41ff7d6a1">_port</a> ) );</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                        <a class="code" href="../../d4/d3d/log_8hpp.html#a9f84712d72c0f218249f27e9a9fcca1d">LIBPX_FDEBUG</a>( 5, <span class="stringliteral">&quot;Initialized empty _sender_endpoint.&quot;</span> );</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                <span class="comment">// Else, don&#39;t touch it here; we might, eg, be sending out a stack of messages to the same endpoint</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a0040ab70ecd027f2dcd0dae3ba803cc1">_udp_socket</a>.reset( <span class="keyword">new</span> boost::asio::ip::udp::udp::socket( <a class="code" href="../../dd/d60/classpx_1_1asio_1_1CIoActor.html#aad90c314c7d733326fe1f0d88e0bede2">get_io_service</a>(), *<a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">_sender_endpoint</a> ) );</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a0040ab70ecd027f2dcd0dae3ba803cc1">_udp_socket</a>-&gt;set_option( boost::asio::ip::udp::udp::socket::reuse_address( <span class="keyword">true</span> ) );</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a0040ab70ecd027f2dcd0dae3ba803cc1">_udp_socket</a>-&gt;set_option( boost::asio::socket_base::broadcast( <span class="keyword">true</span> ) );</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                <span class="comment">// Request that the original destination address be made available</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                <span class="keywordtype">int</span> opt_val = 1;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                <span class="keywordtype">int</span> opt_rc_1 = setsockopt( <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a0040ab70ecd027f2dcd0dae3ba803cc1">_udp_socket</a>-&gt;native_handle(), IPPROTO_IP,</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                                                                   IP_RECVORIGDSTADDR, &amp;opt_val, <span class="keyword">sizeof</span>( opt_val ) );</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                <a class="code" href="../../d4/d3d/log_8hpp.html#a242c84f819cac7a2d5e9f2e2df788b0e">LIBPX_DEBUG</a>( 5, <span class="stringliteral">&quot;setsockopt(IP_RECVORIGDSTADDR) returned %d&quot;</span>, opt_rc_1 );</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                <span class="comment">// Request that packet info be made available</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                <span class="keywordtype">int</span> opt_rc_2 = setsockopt( <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a0040ab70ecd027f2dcd0dae3ba803cc1">_udp_socket</a>-&gt;native_handle(), IPPROTO_IP,</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                                                                   IP_PKTINFO, &amp;opt_val, <span class="keyword">sizeof</span>( opt_val ) );</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                <a class="code" href="../../d4/d3d/log_8hpp.html#a242c84f819cac7a2d5e9f2e2df788b0e">LIBPX_DEBUG</a>( 5, <span class="stringliteral">&quot;setsockopt(IP_PKTINFO) returned %d&quot;</span>, opt_rc_2 );</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        }</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;}</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">// See udp_listener.hpp for description</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a867126e8b0de1f2443697f2cda72ffe1">  138</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a867126e8b0de1f2443697f2cda72ffe1">CUdpListener::close</a>()</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;{</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;        PUSH_FUNC;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        assert( <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a0040ab70ecd027f2dcd0dae3ba803cc1">_udp_socket</a> );</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a9e413f217b1a7c24f65daa05f5c347ae">_shutdown</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ab195f32d7fbd8cc6ccea9bd5b3899062">_prot</a>-&gt;close(); <span class="comment">// Tell protocol handler</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a0040ab70ecd027f2dcd0dae3ba803cc1">_udp_socket</a>-&gt;close();</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <a class="code" href="../../d4/d3d/log_8hpp.html#a9f84712d72c0f218249f27e9a9fcca1d">LIBPX_FDEBUG</a>( 5, <span class="stringliteral">&quot;I am Closed.&quot;</span> );</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;}</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">// See udp_listener.hpp for description</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00151"></a><span class="lineno"><a class="line" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a2b2999d3696ce348a7da83b021d1de55">  151</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a2b2999d3696ce348a7da83b021d1de55">CUdpListener::is_open</a>()</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;{</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        PUSH_FUNC;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        assert( <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a0040ab70ecd027f2dcd0dae3ba803cc1">_udp_socket</a> );</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;        <span class="keywordflow">return</span> ( <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a0040ab70ecd027f2dcd0dae3ba803cc1">_udp_socket</a>-&gt;is_open() );</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;}</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">// See udp_connection.hpp for description</span></div>
<div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a9890e2039f8197046276f84f23041755">  160</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a9890e2039f8197046276f84f23041755">CUdpListener::read_more</a>()</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;{</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        PUSH_FUNC;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;        assert( <a class="code" href="../../d2/d13/classpx_1_1asio_1_1CIoTransactor.html#ab2dfb4b867a70b042a0593250e23f3ff">_offset</a> &lt; <a class="code" href="../../d2/d13/classpx_1_1asio_1_1CIoTransactor.html#a0d37737a688380bf815eb48a52ed45ee">_rbuf</a>.size() );</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;        <span class="keywordflow">if</span> ( !<a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">_sender_endpoint</a> )</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;        {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">_sender_endpoint</a>.reset( <span class="keyword">new</span> boost::asio::ip::udp::udp::endpoint( <a class="code" href="../../dc/d2f/udp__listener_8hpp.html#abe19168f7b93b51ddee7f3d2f5b808d5">UDP_VER</a>(), <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a6128e4f63c942a336c39f3f41ff7d6a1">_port</a> ) );</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                <a class="code" href="../../d4/d3d/log_8hpp.html#a242c84f819cac7a2d5e9f2e2df788b0e">LIBPX_DEBUG</a>( 6, <span class="stringliteral">&quot;Initialized empty _sender_endpoint before read_more().&quot;</span> );</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="comment">// Receive with null_buffers, so we have a chance to read original destination address</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a0040ab70ecd027f2dcd0dae3ba803cc1">_udp_socket</a>-&gt;async_receive_from( boost::asio::null_buffers(), *<a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">_sender_endpoint</a>,</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                                                                         boost::bind( &amp;<a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#aaa18944c60ec9064acab1ea11fb20c36">CUdpListener::on_read</a>, <span class="keyword">this</span>,</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                                                                                                  boost::asio::placeholders::error,</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                                                                                                  boost::asio::placeholders::bytes_transferred ) );</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;}</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#aaa18944c60ec9064acab1ea11fb20c36">  179</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#aaa18944c60ec9064acab1ea11fb20c36">CUdpListener::on_read</a>( <span class="keyword">const</span> boost::system::error_code &amp;err, std::size_t bytes_recvd )</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;{</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        PUSH_FUNC;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        assert( bytes_recvd == 0 );</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        boost::system::error_code ec = err;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        <span class="keywordflow">if</span> ( !ec )</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                <span class="keywordflow">try</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                        bytes_recvd += <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#acbb8d1fa814003148fb9f32c1d720326">read_with_msgs</a>( ec );</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                        <span class="keywordflow">if</span> ( ec )</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                        {</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                                <a class="code" href="../../d4/d3d/log_8hpp.html#a87e1fdf1ba293b942ef6f9a1d51e6f3f">LIBPX_WARN</a>( 1, <span class="stringliteral">&quot;CUdpListener::read_with_msgs() error &#39;%s&#39;&quot;</span>, ec.message().c_str() );</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                                <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a1976d5cf7a32919a904016a479446f4e">reset_socket</a>();</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                                bytes_recvd = 0;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                        }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                }</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                <span class="keywordflow">catch</span> ( <span class="keyword">const</span> boost::system::system_error &amp;e )</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                        <a class="code" href="../../d4/d3d/log_8hpp.html#ab1ccbce6dc90278ccab5c9081dce6e17">LIBPX_FERR</a>( 0, <span class="stringliteral">&quot;While reading UDP: %s&quot;</span>, e.what() );</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                        <span class="keywordflow">throw</span>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                }</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                <a class="code" href="../../d4/d3d/log_8hpp.html#a242c84f819cac7a2d5e9f2e2df788b0e">LIBPX_DEBUG</a>( 4, <span class="stringliteral">&quot;Received %zu bytes from &#39;%s&#39;. Message addressed to &#39;%s&#39;&quot;</span>, bytes_recvd,</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                                         ( <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">_sender_endpoint</a> ? <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">_sender_endpoint</a>-&gt;address().to_string().c_str() : <span class="stringliteral">&quot;Unknown&quot;</span> ),</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                                         ( <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ae03043a7d2c7a98ccbea82cb01b6695f">_orig_dest_endpoint</a> ? <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ae03043a7d2c7a98ccbea82cb01b6695f">_orig_dest_endpoint</a>-&gt;address().to_string().c_str() : <span class="stringliteral">&quot;Unknown&quot;</span> ) );</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                <span class="comment">// Default response is no response if incoming was broadcast</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a03d6cf3f213c0ba05fd5e6ea4defc5ea">_want_response</a> = !<a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#acdbe106b18abc3543161f81f2834a35b">was_broadcast</a>();</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                <a class="code" href="../../d4/d3d/log_8hpp.html#a87e1fdf1ba293b942ef6f9a1d51e6f3f">LIBPX_WARN</a>( 1, <span class="stringliteral">&quot;CUdpListener::on_read() error &#39;%s&#39;&quot;</span>, ec.message().c_str() );</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a1976d5cf7a32919a904016a479446f4e">reset_socket</a>();</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                bytes_recvd = 0;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        }</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="comment">// Don&#39;t pass error to handle_read() unless you want it to remove actor</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <span class="keywordflow">if</span> ( !<a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a9e413f217b1a7c24f65daa05f5c347ae">_shutdown</a> )</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                boost::system::error_code no_error;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                ec = no_error;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        }</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <a class="code" href="../../d2/d13/classpx_1_1asio_1_1CIoTransactor.html#ae588c38d3c50b994681ce46f162fbc0f">handle_read</a>( ec, bytes_recvd );</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;}</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div>
<div class="line"><a name="l00227"></a><span class="lineno"><a class="line" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#acbb8d1fa814003148fb9f32c1d720326">  227</a></span>&#160;<span class="keywordtype">size_t</span> <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#acbb8d1fa814003148fb9f32c1d720326">CUdpListener::read_with_msgs</a>( boost::system::error_code &amp;ec )</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;{</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        PUSH_FUNC;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="keywordtype">char</span> cmbuf[0x100];</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        memset( &amp;cmbuf, 0, <span class="keyword">sizeof</span>( cmbuf ) );</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keyword">struct </span>sockaddr_storage orig_dst;               <span class="comment">// Holds IPv4 or IPv6 address</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        memset( &amp;orig_dst, 0, <span class="keyword">sizeof</span>( orig_dst ) );</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        <span class="keyword">struct </span>msghdr mh;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        memset( &amp;mh, 0, <span class="keyword">sizeof</span>( mh ) );</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        mh.msg_name = &amp;orig_dst;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        mh.msg_namelen = <span class="keyword">sizeof</span>( orig_dst );</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        mh.msg_control = cmbuf;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        mh.msg_controllen = <span class="keyword">sizeof</span>( cmbuf );</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        <span class="comment">// Grab Messages</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ae03043a7d2c7a98ccbea82cb01b6695f">_orig_dest_endpoint</a>.reset( <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a4c6dcf8ae404866fe39f2252750aa5d2">_local_endpoint</a>.reset( <span class="keyword">nullptr</span> );</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="keywordtype">int</span> flags = MSG_PEEK | MSG_DONTWAIT;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="keywordtype">int</span> rc = recvmsg( <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a0040ab70ecd027f2dcd0dae3ba803cc1">_udp_socket</a>-&gt;native_handle(), &amp;mh, flags );</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;        <span class="comment">// Read regular packet data</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        std::size_t bytes_recvd = 0;</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        std::size_t bytes_available = <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a0040ab70ecd027f2dcd0dae3ba803cc1">_udp_socket</a>-&gt;available();</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <a class="code" href="../../d2/d13/classpx_1_1asio_1_1CIoTransactor.html#a0d37737a688380bf815eb48a52ed45ee">_rbuf</a>.resize( <a class="code" href="../../d2/d13/classpx_1_1asio_1_1CIoTransactor.html#ab2dfb4b867a70b042a0593250e23f3ff">_offset</a> + bytes_available );</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <a class="code" href="../../d4/d3d/log_8hpp.html#a242c84f819cac7a2d5e9f2e2df788b0e">LIBPX_DEBUG</a>( 8, <span class="stringliteral">&quot;Bytes available %zu  Offset %zu Bytes Received %zu Buf capacity %zu&quot;</span>, bytes_available, <a class="code" href="../../d2/d13/classpx_1_1asio_1_1CIoTransactor.html#ab2dfb4b867a70b042a0593250e23f3ff">_offset</a>, bytes_recvd, <a class="code" href="../../d2/d13/classpx_1_1asio_1_1CIoTransactor.html#a0d37737a688380bf815eb48a52ed45ee">_rbuf</a>.capacity() );</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <span class="comment">// Make sure we have initialized our sender_endpoint before using it</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        <span class="keywordflow">if</span> ( !<a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">_sender_endpoint</a> )</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">_sender_endpoint</a>.reset( <span class="keyword">new</span> boost::asio::ip::udp::udp::endpoint( <a class="code" href="../../dc/d2f/udp__listener_8hpp.html#abe19168f7b93b51ddee7f3d2f5b808d5">UDP_VER</a>(), <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a6128e4f63c942a336c39f3f41ff7d6a1">_port</a> ) );</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                <a class="code" href="../../d4/d3d/log_8hpp.html#a242c84f819cac7a2d5e9f2e2df788b0e">LIBPX_DEBUG</a>( 6, <span class="stringliteral">&quot;Initialized empty _sender_endpoint before receive.&quot;</span> );</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        }</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        <span class="keywordtype">int</span> rec_flags = MSG_DONTWAIT;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        boost::asio::mutable_buffers_1 buf( <a class="code" href="../../d2/d13/classpx_1_1asio_1_1CIoTransactor.html#a0d37737a688380bf815eb48a52ed45ee">_rbuf</a>.data() + <a class="code" href="../../d2/d13/classpx_1_1asio_1_1CIoTransactor.html#ab2dfb4b867a70b042a0593250e23f3ff">_offset</a>, <a class="code" href="../../d2/d13/classpx_1_1asio_1_1CIoTransactor.html#a0d37737a688380bf815eb48a52ed45ee">_rbuf</a>.capacity() - <a class="code" href="../../d2/d13/classpx_1_1asio_1_1CIoTransactor.html#ab2dfb4b867a70b042a0593250e23f3ff">_offset</a> );</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        bytes_recvd += <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a0040ab70ecd027f2dcd0dae3ba803cc1">_udp_socket</a>-&gt;receive_from( buf, *<a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">_sender_endpoint</a>, rec_flags, ec );</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <a class="code" href="../../d4/d3d/log_8hpp.html#a242c84f819cac7a2d5e9f2e2df788b0e">LIBPX_DEBUG</a>( 8, <span class="stringliteral">&quot;Bytes available %zu  Offset %zu Bytes Received %zu Buf capacity %zu Buf size %zu&quot;</span>,</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                                 bytes_available, <a class="code" href="../../d2/d13/classpx_1_1asio_1_1CIoTransactor.html#ab2dfb4b867a70b042a0593250e23f3ff">_offset</a>, bytes_recvd, <a class="code" href="../../d2/d13/classpx_1_1asio_1_1CIoTransactor.html#a0d37737a688380bf815eb48a52ed45ee">_rbuf</a>.capacity(), <a class="code" href="../../d2/d13/classpx_1_1asio_1_1CIoTransactor.html#a0d37737a688380bf815eb48a52ed45ee">_rbuf</a>.size() );</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <span class="comment">// Process messages</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <span class="keywordflow">if</span> ( rc &gt;= 0 )</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;        {</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                <span class="comment">// loop through control headers</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                <span class="keywordflow">for</span> ( <span class="keyword">struct</span> cmsghdr *cmsg = CMSG_FIRSTHDR( &amp;mh );</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                          cmsg != NULL;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                          cmsg = CMSG_NXTHDR( &amp;mh, cmsg ) )</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                {</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                        <span class="keywordflow">if</span> ( ( cmsg-&gt;cmsg_level == IPPROTO_IP ) &amp;&amp; ( <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">_sender_endpoint</a>-&gt;protocol() == boost::asio::ip::udp::v4() ) )</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                        {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                                <span class="keywordflow">if</span> ( cmsg-&gt;cmsg_type == IP_RECVORIGDSTADDR )</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                                {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                                        <span class="comment">/* The Linux manpage notes about this type say: &quot;the kernel returns the original destination</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">                                         * address of the datagram being received. The ancillary message contains a struct sockaddr_in.&quot; */</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                                        <span class="keyword">struct </span>sockaddr_in *pi = ( sockaddr_in * )CMSG_DATA( cmsg );</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                                        <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ae03043a7d2c7a98ccbea82cb01b6695f">_orig_dest_endpoint</a>.reset(</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                                                <span class="keyword">new</span> boost::asio::ip::udp::udp::endpoint( <a class="code" href="../../dc/d2f/udp__listener_8hpp.html#abe19168f7b93b51ddee7f3d2f5b808d5">UDP_VER</a>(), <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">_sender_endpoint</a>-&gt;port() ) );</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                                        <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ae03043a7d2c7a98ccbea82cb01b6695f">_orig_dest_endpoint</a>-&gt;address( boost::asio::ip::address::from_string( inet_ntoa( pi-&gt;sin_addr ) ) );</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                                }</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                                <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( cmsg-&gt;cmsg_type == IP_PKTINFO )</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                                {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                                        <span class="comment">/* The Linux manpage notes about this type say: &quot;Pass an IP_PKTINFO ancillary message that contains</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">                                         * a pktinfo structure that supplies some information about the incoming packet.&quot; */</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                                        <span class="keyword">struct </span>in_pktinfo *pktinfo = ( in_pktinfo * )CMSG_DATA( cmsg );</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                                        <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a4c6dcf8ae404866fe39f2252750aa5d2">_local_endpoint</a>.reset(</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                                                <span class="keyword">new</span> boost::asio::ip::udp::udp::endpoint( <a class="code" href="../../dc/d2f/udp__listener_8hpp.html#abe19168f7b93b51ddee7f3d2f5b808d5">UDP_VER</a>(), <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">_sender_endpoint</a>-&gt;port() ) );</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                                        <span class="comment">/* Manpages say &quot;ipi_spec_dst is the local address of the packet&quot;, different than the IP header address,</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">                                         * but I don&#39;t know what that means - maybe what ifconfig tells you about yourself? */</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                                        <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a4c6dcf8ae404866fe39f2252750aa5d2">_local_endpoint</a>-&gt;address( boost::asio::ip::address::from_string( inet_ntoa( pktinfo-&gt;ipi_spec_dst ) ) );</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                                }</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                        }</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                }</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;        }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="keywordflow">return</span> ( bytes_recvd );</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;}</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">// @return true if last packet was broadcast or multicast, false otherwise</span></div>
<div class="line"><a name="l00307"></a><span class="lineno"><a class="line" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#acdbe106b18abc3543161f81f2834a35b">  307</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#acdbe106b18abc3543161f81f2834a35b">CUdpListener::was_broadcast</a>()</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;{</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        PUSH_FUNC;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        <span class="keywordtype">bool</span> result = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        <span class="comment">// First, screen out the possibility that sender_endpoint just hasn&#39;t been set yet</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">_sender_endpoint</a>-&gt;address().is_unspecified() )</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                <span class="comment">// Do nothing</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        }</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="comment">// ToDo: fails here just because _local_endpoint has never been initialized?</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">_sender_endpoint</a>-&gt;address().is_v4() &amp;&amp;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                          ( <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a4c6dcf8ae404866fe39f2252750aa5d2">_local_endpoint</a> != nullptr ) &amp;&amp;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                          ( <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ae03043a7d2c7a98ccbea82cb01b6695f">_orig_dest_endpoint</a> != <span class="keyword">nullptr</span> ) )</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;        {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                result = ( <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ae03043a7d2c7a98ccbea82cb01b6695f">_orig_dest_endpoint</a>-&gt;address() != <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a4c6dcf8ae404866fe39f2252750aa5d2">_local_endpoint</a>-&gt;address() );</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        }</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">_sender_endpoint</a>-&gt;address().is_v6() &amp;&amp; ( <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ae03043a7d2c7a98ccbea82cb01b6695f">_orig_dest_endpoint</a> != nullptr ) )</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;        {</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                result = !<a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ae03043a7d2c7a98ccbea82cb01b6695f">_orig_dest_endpoint</a>-&gt;address().is_multicast();</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        <span class="keywordflow">return</span> ( result );</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;}</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div>
<div class="line"><a name="l00332"></a><span class="lineno"><a class="line" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a5f8cf23d20273a992c614a954ba019c5">  332</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a5f8cf23d20273a992c614a954ba019c5">CUdpListener::write</a>( std::shared_ptr&lt;io_buf_t&gt; pbuf )</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;{</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        PUSH_FUNC;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        assert( pbuf );</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <span class="keywordflow">if</span> ( !<a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a03d6cf3f213c0ba05fd5e6ea4defc5ea">_want_response</a> )</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        {</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                <a class="code" href="../../de/dcb/namespacepx.html#a8231daeb7713d1005025954bc1066422ab45cffe084dd3d20d928bee85e7b0f21">std::string</a> orig = ( <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ae03043a7d2c7a98ccbea82cb01b6695f">_orig_dest_endpoint</a> ? <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ae03043a7d2c7a98ccbea82cb01b6695f">_orig_dest_endpoint</a>-&gt;address().to_string() : <span class="stringliteral">&quot;Unknown&quot;</span> );</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                <a class="code" href="../../de/dcb/namespacepx.html#a8231daeb7713d1005025954bc1066422ab45cffe084dd3d20d928bee85e7b0f21">std::string</a> local = ( <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a4c6dcf8ae404866fe39f2252750aa5d2">_local_endpoint</a> ? <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a4c6dcf8ae404866fe39f2252750aa5d2">_local_endpoint</a>-&gt;address().to_string() : <span class="stringliteral">&quot;Unknown&quot;</span> );</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                <a class="code" href="../../de/dcb/namespacepx.html#a8231daeb7713d1005025954bc1066422ab45cffe084dd3d20d928bee85e7b0f21">std::string</a> sender = ( <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">_sender_endpoint</a> ? <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">_sender_endpoint</a>-&gt;address().to_string() : <span class="stringliteral">&quot;Unknown&quot;</span> );</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                <a class="code" href="../../d4/d3d/log_8hpp.html#a242c84f819cac7a2d5e9f2e2df788b0e">LIBPX_DEBUG</a>( 3, <span class="stringliteral">&quot;Suppressing response to &#39;%s&#39;, Message was received from &#39;%s&#39;, Local address is &#39;%s&#39;&quot;</span>,</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                                         sender.c_str(), orig.c_str(), local.c_str() );</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        }</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                <span class="comment">// Debug output</span></div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                <span class="keywordflow">if</span> ( !<a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">_sender_endpoint</a> )</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                        <a class="code" href="../../d4/d3d/log_8hpp.html#a87e1fdf1ba293b942ef6f9a1d51e6f3f">LIBPX_WARN</a>( 2, <span class="stringliteral">&quot;Had empty _sender_endpoint before write().&quot;</span> );</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                }</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">_sender_endpoint</a>-&gt;address().is_unspecified() )</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                {</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                        <a class="code" href="../../d4/d3d/log_8hpp.html#a87e1fdf1ba293b942ef6f9a1d51e6f3f">LIBPX_WARN</a>( 2, <span class="stringliteral">&quot;Had unspecified _sender_endpoint before write().&quot;</span> );</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                }</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                <span class="comment">// Push the current source address onto the queue, creating a new shared_ptr to hold it,</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                <span class="comment">// and copying the endpoint to that shared pointer.</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                std::shared_ptr&lt;boost::asio::ip::udp::udp::endpoint&gt; destination_endpoint(</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                        <span class="keyword">new</span> boost::asio::ip::udp::udp::endpoint( *<a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">_sender_endpoint</a> ) );</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ab1032d4cdb037e7c946c112aad8db99c">_endpoint_queue</a>.push( destination_endpoint );</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                <span class="comment">// Finally, call the base implementation of this function</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                <a class="code" href="../../d2/d13/classpx_1_1asio_1_1CIoTransactor.html#a9596248159d929dd66b23690f3c9737b">CIoTransactor::write</a>( pbuf );</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        }</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;}</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">/* Note: this function is called when CIoTransactor::write_outbox() provides this pbuf buffer</span></div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment"> * from its _outbox stack.</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment"> * Now using the endpoint queue, hopefully synchronized with buffer queue, to get the target address.</span></div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00371"></a><span class="lineno"><a class="line" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#aeee79c79d789fd63506708a70076ca2e">  371</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#aeee79c79d789fd63506708a70076ca2e">CUdpListener::write_more</a>( <span class="keyword">const</span> std::shared_ptr&lt;io_buf_t&gt; &amp;pbuf )</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;{</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        PUSH_FUNC;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        assert( pbuf );</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        std::shared_ptr&lt;boost::asio::ip::udp::udp::endpoint&gt; dest_endpoint;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="keywordflow">if</span> ( !<a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ab1032d4cdb037e7c946c112aad8db99c">_endpoint_queue</a>.empty() )</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                dest_endpoint = <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ab1032d4cdb037e7c946c112aad8db99c">_endpoint_queue</a>.front();</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;        }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="comment">// If everything is correct, send it</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="keywordflow">if</span> ( pbuf &amp;&amp; dest_endpoint &amp;&amp; !pbuf-&gt;empty() &amp;&amp;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                 <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a0040ab70ecd027f2dcd0dae3ba803cc1">_udp_socket</a>-&gt;is_open() &amp;&amp; !dest_endpoint-&gt;address().is_unspecified() )</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        {</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                <a class="code" href="../../d4/d3d/log_8hpp.html#a242c84f819cac7a2d5e9f2e2df788b0e">LIBPX_DEBUG</a>( 6, <span class="stringliteral">&quot;Begin async_write to &#39;%s&#39;&quot;</span>, dest_endpoint-&gt;address().to_string().c_str() );</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a0040ab70ecd027f2dcd0dae3ba803cc1">_udp_socket</a>-&gt;async_send_to( boost::asio::buffer( *pbuf ), *dest_endpoint,</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                                                                        boost::bind( &amp;<a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a499f0ba26591ed5c2ba9510328b0d28e">CUdpListener::on_write</a>,</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                                                                                                 <span class="keyword">this</span>,</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                                                                                                 boost::asio::placeholders::error,</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                                                                                                 boost::asio::placeholders::bytes_transferred ) );</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        }</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                <span class="keywordflow">if</span> ( !<a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a0040ab70ecd027f2dcd0dae3ba803cc1">_udp_socket</a>-&gt;is_open() )</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                        <a class="code" href="../../d4/d3d/log_8hpp.html#a242c84f819cac7a2d5e9f2e2df788b0e">LIBPX_DEBUG</a>( 3, <span class="stringliteral">&quot;Listener closed - suppressing async_writes&quot;</span> );</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                }</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !dest_endpoint || dest_endpoint-&gt;address().is_unspecified() )</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                {</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                        <a class="code" href="../../d4/d3d/log_8hpp.html#a87e1fdf1ba293b942ef6f9a1d51e6f3f">LIBPX_WARN</a>( 2, <span class="stringliteral">&quot;No UdpListener destination endpoint to write to.&quot;</span> );</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;                }</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                {</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                        <span class="comment">// pbuf already empty; no message necessary. (None of this should ever happen.)</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;                        <a class="code" href="../../d4/d3d/log_8hpp.html#a242c84f819cac7a2d5e9f2e2df788b0e">LIBPX_DEBUG</a>( 3, <span class="stringliteral">&quot;No UdpListener buffer data to write&quot;</span> );</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                }</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                <span class="comment">// We need to write nothing (empty pbuf) to keep machine moving</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                <span class="keywordflow">if</span> ( pbuf != <span class="keyword">nullptr</span> )</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;                {</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                        pbuf-&gt;resize( 0 );</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a0040ab70ecd027f2dcd0dae3ba803cc1">_udp_socket</a>-&gt;async_send_to( boost::asio::null_buffers(), *dest_endpoint,</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                                                                        boost::bind( &amp;<a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a499f0ba26591ed5c2ba9510328b0d28e">CUdpListener::on_write</a>, <span class="keyword">this</span>,</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                                                                                                 boost::asio::placeholders::error,</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                                                                                                 boost::asio::placeholders::bytes_transferred ) );</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        }</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;}</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div>
<div class="line"><a name="l00422"></a><span class="lineno"><a class="line" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a499f0ba26591ed5c2ba9510328b0d28e">  422</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a499f0ba26591ed5c2ba9510328b0d28e">CUdpListener::on_write</a>( <span class="keyword">const</span> boost::system::error_code &amp;err, <span class="keywordtype">size_t</span> bytes_transferred )</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;{</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        PUSH_FUNC;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <span class="keywordflow">if</span> ( !<a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ab1032d4cdb037e7c946c112aad8db99c">_endpoint_queue</a>.empty() )</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        {</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                <span class="comment">// Now we can release the destination endpoint that was written to.</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ab1032d4cdb037e7c946c112aad8db99c">_endpoint_queue</a>.pop();</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        }</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        <span class="keywordflow">if</span> ( !err )</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                <a class="code" href="../../d2/d13/classpx_1_1asio_1_1CIoTransactor.html#a2b2a750f125a7ce77624b9271f4dc4f2">handle_write</a>( err, bytes_transferred );</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        }</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        {</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                <span class="comment">// Don&#39;t pass error to handle_read() unless you want it to remove actor</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                <span class="keywordflow">if</span> ( !<a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a9e413f217b1a7c24f65daa05f5c347ae">_shutdown</a> )</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                {</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                        <a class="code" href="../../d4/d3d/log_8hpp.html#a87e1fdf1ba293b942ef6f9a1d51e6f3f">LIBPX_WARN</a>( 2, <span class="stringliteral">&quot;Ended async_write with error %s (but ignoring)&quot;</span>, err.message().c_str() );</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                        <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a1976d5cf7a32919a904016a479446f4e">reset_socket</a>();</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                        <span class="comment">// And re-initalize the _sender_endpoint so we don&#39;t try to send any more to this endpoint</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                        <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">_sender_endpoint</a>.reset( <span class="keyword">new</span> boost::asio::ip::udp::udp::endpoint( <a class="code" href="../../dc/d2f/udp__listener_8hpp.html#abe19168f7b93b51ddee7f3d2f5b808d5">UDP_VER</a>(), <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a6128e4f63c942a336c39f3f41ff7d6a1">_port</a> ) );</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                        boost::system::error_code no_error;</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                        <a class="code" href="../../d2/d13/classpx_1_1asio_1_1CIoTransactor.html#a2b2a750f125a7ce77624b9271f4dc4f2">handle_write</a>( no_error, 0 );</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                }</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                {</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                        <a class="code" href="../../d2/d13/classpx_1_1asio_1_1CIoTransactor.html#a2b2a750f125a7ce77624b9271f4dc4f2">handle_write</a>( err, 0 );</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                }</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        }</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;        <span class="comment">// One check, to make sure our endpoint queue doesn&#39;t get out of sync</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="../../d2/d13/classpx_1_1asio_1_1CIoTransactor.html#a2949e553390272d9f1a9b6bcaa16b1a0">_outbox</a>.empty() &amp;&amp; !<a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ab1032d4cdb037e7c946c112aad8db99c">_endpoint_queue</a>.empty() )</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        {</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                <a class="code" href="../../d4/d3d/log_8hpp.html#a87e1fdf1ba293b942ef6f9a1d51e6f3f">LIBPX_WARN</a>( 2, <span class="stringliteral">&quot;Endpoint queue still has %zu entries; clearing it.&quot;</span>, <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ab1032d4cdb037e7c946c112aad8db99c">_endpoint_queue</a>.size() );</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;                <span class="keywordflow">while</span> ( !<a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ab1032d4cdb037e7c946c112aad8db99c">_endpoint_queue</a>.empty() )</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;                {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                        <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ab1032d4cdb037e7c946c112aad8db99c">_endpoint_queue</a>.pop();</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                }</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        }</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( !<a class="code" href="../../d2/d13/classpx_1_1asio_1_1CIoTransactor.html#a2949e553390272d9f1a9b6bcaa16b1a0">_outbox</a>.empty() )</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        {</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                <a class="code" href="../../d4/d3d/log_8hpp.html#a242c84f819cac7a2d5e9f2e2df788b0e">LIBPX_DEBUG</a>( 5, <span class="stringliteral">&quot;After write(), outbox still has %zu entries, and endpoint queue %zu&quot;</span>,</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                                         <a class="code" href="../../d2/d13/classpx_1_1asio_1_1CIoTransactor.html#a2949e553390272d9f1a9b6bcaa16b1a0">_outbox</a>.size(), <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ab1032d4cdb037e7c946c112aad8db99c">_endpoint_queue</a>.size() );</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;        }</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;}</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment">// One-way (pushed) write to the specified target address.</span></div>
<div class="line"><a name="l00471"></a><span class="lineno"><a class="line" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a20614f0f02afb63a891d70fdbe2f701c">  471</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a20614f0f02afb63a891d70fdbe2f701c">CUdpListener::write_push</a>( <span class="keyword">const</span> boost::asio::ip::address &amp;target_addr, uint16_t target_port,</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                                                           std::shared_ptr&lt;io_buf_t&gt; pbuf )</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;{</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        PUSH_FUNC;</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;        assert( pbuf );</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        <span class="comment">// Copy target_addr to _sender_endpoint so it will be used by the write() functions.</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">_sender_endpoint</a>.reset( <span class="keyword">new</span> boost::asio::ip::udp::udp::endpoint( target_addr, target_port ) );</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <span class="comment">// Normally this will be a unicast.</span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;        <span class="comment">// Does is_multicast() return true for broadcasts?  Hedge here and also compare addresses.</span></div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        <span class="keywordflow">if</span> ( !target_addr.to_v4().is_multicast() &amp;&amp;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                 ( target_addr.to_v4() != target_addr.to_v4().broadcast() ) )</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;        {</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a03d6cf3f213c0ba05fd5e6ea4defc5ea">_want_response</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        }</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;        <span class="comment">// Now just write()</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        <a class="code" href="../../d4/d3d/log_8hpp.html#a242c84f819cac7a2d5e9f2e2df788b0e">LIBPX_DEBUG</a>( 6, <span class="stringliteral">&quot;Doing write_push() of %zu byes to %s&quot;</span>, pbuf-&gt;size(), <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">_sender_endpoint</a>-&gt;address().to_string().c_str() );</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;        <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a5f8cf23d20273a992c614a954ba019c5">write</a>( pbuf );</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;}</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div>
<div class="line"><a name="l00492"></a><span class="lineno"><a class="line" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ae06adb3988b7dd1897410606fe82034f">  492</a></span>&#160;<span class="keyword">const</span> boost::asio::ip::address <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ae06adb3988b7dd1897410606fe82034f">CUdpListener::get_source_address</a>( uint16_t &amp;source_port )<span class="keyword"> const</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;        PUSH_FUNC;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;        assert( <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">_sender_endpoint</a>.get() );</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;        source_port = <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">_sender_endpoint</a>-&gt;port();</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        <span class="comment">// Tried to copy to local storage to avoid &quot;warning: returning reference to temporary&quot;</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;        <span class="comment">// Then to avoid the tangle of &quot;discards qualifiers&quot; errors, tried to decouple the copy by</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;        <span class="comment">// getting to and then setting from a string.  But from_string didn&#39;t work.</span></div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        <span class="comment">// Since I had to copy anyway, decided to just return a copy instead of a reference.</span></div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;        <span class="keywordflow">return</span> ( <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">_sender_endpoint</a>-&gt;address() );</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;}</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div>
<div class="line"><a name="l00505"></a><span class="lineno"><a class="line" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#aa2c43194c8346f7094c3fb70a0e75fb8">  505</a></span>&#160;<span class="keyword">const</span> boost::asio::ip::address <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#aa2c43194c8346f7094c3fb70a0e75fb8">CUdpListener::get_destination_address</a>( uint16_t &amp;dest_port )<span class="keyword"> const</span></div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;        PUSH_FUNC;</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;        assert( <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ae03043a7d2c7a98ccbea82cb01b6695f">_orig_dest_endpoint</a>.get() );</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;        dest_port = <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ae03043a7d2c7a98ccbea82cb01b6695f">_orig_dest_endpoint</a>-&gt;port();</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <span class="keywordflow">return</span> ( <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ae03043a7d2c7a98ccbea82cb01b6695f">_orig_dest_endpoint</a>-&gt;address() );</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;}</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment">// See udp_listener.hpp for description</span></div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00517"></a><span class="lineno"><a class="line" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#aac729befadf4843d89487443c7eeeea7">  517</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#aac729befadf4843d89487443c7eeeea7">CUdpListener::update_local_port</a>( <span class="keyword">const</span> uint16_t new_local_port )</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;{</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;        PUSH_FUNC;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a6128e4f63c942a336c39f3f41ff7d6a1">_port</a> = new_local_port;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <span class="comment">// Reset UDP socket</span></div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a1976d5cf7a32919a904016a479446f4e">reset_socket</a>();</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <span class="comment">// Default endpoints to broadcast; when unicast send is performed set remote IP as necessary.</span></div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">_sender_endpoint</a>.reset( <span class="keyword">new</span> boost::asio::ip::udp::udp::endpoint( <a class="code" href="../../dc/d2f/udp__listener_8hpp.html#abe19168f7b93b51ddee7f3d2f5b808d5">UDP_VER</a>(), <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a6128e4f63c942a336c39f3f41ff7d6a1">_port</a> ) );</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;        <a class="code" href="../../d4/d3d/log_8hpp.html#aedf82e390ea25288cf698a9d9eb470ef">LIBPX_INFO</a>( 2, <span class="stringliteral">&quot;Updated UdpListener port to %u&quot;</span>, new_local_port );</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;}</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">// See udp_listener.hpp for description</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00535"></a><span class="lineno"><a class="line" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a0aa2259b0f8077d1493d226b26bf8416">  535</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a0aa2259b0f8077d1493d226b26bf8416">CUdpListener::broadcast</a>( <span class="keyword">const</span> uint16_t target_port, std::shared_ptr&lt;io_buf_t&gt; pbuf )</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;{</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        PUSH_FUNC;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">_sender_endpoint</a>.reset(</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                <span class="keyword">new</span> boost::asio::ip::udp::udp::endpoint( boost::asio::ip::address_v4::broadcast(),</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                                                                                                 target_port ) );</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        <span class="comment">// Force this to true so the framework allows us to send out</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;        <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a03d6cf3f213c0ba05fd5e6ea4defc5ea">_want_response</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;        <a class="code" href="../../d4/d3d/log_8hpp.html#a242c84f819cac7a2d5e9f2e2df788b0e">LIBPX_DEBUG</a>( 5, <span class="stringliteral">&quot;Broadcasting to %u&quot;</span>, target_port );</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;        <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a5f8cf23d20273a992c614a954ba019c5">write</a>( pbuf );</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;}</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment">// See udp_listener.hpp for description</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00554"></a><span class="lineno"><a class="line" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ae14259befb19663d84891e2cbc749195">  554</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ae14259befb19663d84891e2cbc749195">CUdpListener::subnet_broadcast</a>( <span class="keyword">const</span> boost::asio::ip::address_v4 &amp;bcast_addr,</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                                                                         <span class="keyword">const</span> uint16_t target_port, std::shared_ptr&lt;io_buf_t&gt; pbuf )</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;{</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;        PUSH_FUNC;</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;        <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">_sender_endpoint</a>.reset(</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                <span class="keyword">new</span> boost::asio::ip::udp::udp::endpoint( bcast_addr, target_port ) );</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;        <span class="comment">// Force this to true so the framework allows us to send out</span></div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;        <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a03d6cf3f213c0ba05fd5e6ea4defc5ea">_want_response</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;        <span class="keywordflow">if</span> ( <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">_sender_endpoint</a>-&gt;address().is_unspecified() )</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        {</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                <a class="code" href="../../d4/d3d/log_8hpp.html#a87e1fdf1ba293b942ef6f9a1d51e6f3f">LIBPX_WARN</a>( 2, <span class="stringliteral">&quot;Failed to properly initialize UdpListener sender address.&quot;</span> );</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        }</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;        <span class="keywordflow">else</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        {</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                <a class="code" href="../../d4/d3d/log_8hpp.html#a242c84f819cac7a2d5e9f2e2df788b0e">LIBPX_DEBUG</a>( 5, <span class="stringliteral">&quot;Subnet Broadcasting to %s:%u&quot;</span>, bcast_addr.to_string().c_str(), target_port );</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        }</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        <a class="code" href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a5f8cf23d20273a992c614a954ba019c5">write</a>( pbuf );</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;}</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;}       <span class="comment">// asio</span></div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;}       <span class="comment">// px</span></div>
<div class="ttc" id="classpx_1_1asio_1_1CUdpListener_html_a2b2999d3696ce348a7da83b021d1de55"><div class="ttname"><a href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a2b2999d3696ce348a7da83b021d1de55">px::asio::CUdpListener::is_open</a></div><div class="ttdeci">PUBLIC bool is_open()</div><div class="ttdoc">Access method to test if the connection is open. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc3/udp__listener_8cpp_source.html#l00151">udp_listener.cpp:151</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CIoTransactor_html_ae588c38d3c50b994681ce46f162fbc0f"><div class="ttname"><a href="../../d2/d13/classpx_1_1asio_1_1CIoTransactor.html#ae588c38d3c50b994681ce46f162fbc0f">px::asio::CIoTransactor::handle_read</a></div><div class="ttdeci">void handle_read(const boost::system::error_code &amp;err, size_t bytes_transferred)</div><div class="ttdoc">Callback function to handle incoming data. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dcb/io__transactor_8cpp_source.html#l00169">io_transactor.cpp:169</a></div></div>
<div class="ttc" id="log_8hpp_html_a87e1fdf1ba293b942ef6f9a1d51e6f3f"><div class="ttname"><a href="../../d4/d3d/log_8hpp.html#a87e1fdf1ba293b942ef6f9a1d51e6f3f">LIBPX_WARN</a></div><div class="ttdeci">#define LIBPX_WARN(__VLVL__,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d3d/log_8hpp_source.html#l00184">log.hpp:184</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CUdpListener_html_aeee79c79d789fd63506708a70076ca2e"><div class="ttname"><a href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#aeee79c79d789fd63506708a70076ca2e">px::asio::CUdpListener::write_more</a></div><div class="ttdeci">void write_more(const std::shared_ptr&lt; io_buf_t &gt; &amp;pbuf) override</div><div class="ttdoc">Write the data from the outbox to the service. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc3/udp__listener_8cpp_source.html#l00371">udp_listener.cpp:371</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CUdpListener_html_a9e413f217b1a7c24f65daa05f5c347ae"><div class="ttname"><a href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a9e413f217b1a7c24f65daa05f5c347ae">px::asio::CUdpListener::_shutdown</a></div><div class="ttdeci">bool _shutdown</div><div class="ttdoc">Set true by close() for clean, error-free shutdown of a socket. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2f/udp__listener_8hpp_source.html#l00328">udp_listener.hpp:328</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CUdpListener_html_acdbe106b18abc3543161f81f2834a35b"><div class="ttname"><a href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#acdbe106b18abc3543161f81f2834a35b">px::asio::CUdpListener::was_broadcast</a></div><div class="ttdeci">bool was_broadcast()</div><div class="ttdoc">Determine if last packet was sent to us as a broadcast or multicast. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc3/udp__listener_8cpp_source.html#l00307">udp_listener.cpp:307</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CUdpListener_html_aa2c43194c8346f7094c3fb70a0e75fb8"><div class="ttname"><a href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#aa2c43194c8346f7094c3fb70a0e75fb8">px::asio::CUdpListener::get_destination_address</a></div><div class="ttdeci">PUBLIC const boost::asio::ip::address get_destination_address(uint16_t &amp;dest_port) const </div><div class="ttdoc">Gets the destination address (us) and port of the message currently being processed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc3/udp__listener_8cpp_source.html#l00505">udp_listener.cpp:505</a></div></div>
<div class="ttc" id="udp__listener_8hpp_html_abe19168f7b93b51ddee7f3d2f5b808d5"><div class="ttname"><a href="../../dc/d2f/udp__listener_8hpp.html#abe19168f7b93b51ddee7f3d2f5b808d5">UDP_VER</a></div><div class="ttdeci">#define UDP_VER</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2f/udp__listener_8hpp_source.html#l00030">udp_listener.hpp:30</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CUdpListener_html_a6128e4f63c942a336c39f3f41ff7d6a1"><div class="ttname"><a href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a6128e4f63c942a336c39f3f41ff7d6a1">px::asio::CUdpListener::_port</a></div><div class="ttdeci">uint16_t _port</div><div class="ttdoc">Port number that we are listening on. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2f/udp__listener_8hpp_source.html#l00323">udp_listener.hpp:323</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CUdpListener_html_ad4f6b13f57b18431b81e4558b7715f60"><div class="ttname"><a href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ad4f6b13f57b18431b81e4558b7715f60">px::asio::CUdpListener::_sender_endpoint</a></div><div class="ttdeci">std::unique_ptr&lt; boost::asio::ip::udp::udp::endpoint &gt; _sender_endpoint</div><div class="ttdoc">Normally, the endpoint information of the source of a received packet, to which we will send response...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2f/udp__listener_8hpp_source.html#l00292">udp_listener.hpp:292</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CUdpListener_html_a1976d5cf7a32919a904016a479446f4e"><div class="ttname"><a href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a1976d5cf7a32919a904016a479446f4e">px::asio::CUdpListener::reset_socket</a></div><div class="ttdeci">void reset_socket()</div><div class="ttdoc">Create or reset our listening socket, at _port. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc3/udp__listener_8cpp_source.html#l00090">udp_listener.cpp:90</a></div></div>
<div class="ttc" id="log_8hpp_html_ab1ccbce6dc90278ccab5c9081dce6e17"><div class="ttname"><a href="../../d4/d3d/log_8hpp.html#ab1ccbce6dc90278ccab5c9081dce6e17">LIBPX_FERR</a></div><div class="ttdeci">#define LIBPX_FERR(__VLVL__,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d3d/log_8hpp_source.html#l00182">log.hpp:182</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CIoActor_html_aad90c314c7d733326fe1f0d88e0bede2"><div class="ttname"><a href="../../dd/d60/classpx_1_1asio_1_1CIoActor.html#aad90c314c7d733326fe1f0d88e0bede2">px::asio::CIoActor::get_io_service</a></div><div class="ttdeci">boost::asio::io_service &amp; get_io_service() const </div><div class="ttdoc">Get the I/O service associated with the owner of this actor. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d3b/io__actor_8cpp_source.html#l00045">io_actor.cpp:45</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CUdpListener_html_aac729befadf4843d89487443c7eeeea7"><div class="ttname"><a href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#aac729befadf4843d89487443c7eeeea7">px::asio::CUdpListener::update_local_port</a></div><div class="ttdeci">void update_local_port(const uint16_t new_local_port)</div><div class="ttdoc">Update the local port. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc3/udp__listener_8cpp_source.html#l00517">udp_listener.cpp:517</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CIoTransactor_html_ab2dfb4b867a70b042a0593250e23f3ff"><div class="ttname"><a href="../../d2/d13/classpx_1_1asio_1_1CIoTransactor.html#ab2dfb4b867a70b042a0593250e23f3ff">px::asio::CIoTransactor::_offset</a></div><div class="ttdeci">size_t _offset</div><div class="ttdoc">Current offset in _rbuf, i.e. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/de8/io__transactor_8hpp_source.html#l00205">io_transactor.hpp:205</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CUdpListener_html_a4c6dcf8ae404866fe39f2252750aa5d2"><div class="ttname"><a href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a4c6dcf8ae404866fe39f2252750aa5d2">px::asio::CUdpListener::_local_endpoint</a></div><div class="ttdeci">std::unique_ptr&lt; boost::asio::ip::udp::udp::endpoint &gt; _local_endpoint</div><div class="ttdoc">I think this is meant to be your actual IP address and port, as you would get from ifconfig...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2f/udp__listener_8hpp_source.html#l00305">udp_listener.hpp:305</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CIoTransactor_html_a0d37737a688380bf815eb48a52ed45ee"><div class="ttname"><a href="../../d2/d13/classpx_1_1asio_1_1CIoTransactor.html#a0d37737a688380bf815eb48a52ed45ee">px::asio::CIoTransactor::_rbuf</a></div><div class="ttdeci">io_buf_t _rbuf</div><div class="ttdoc">I/O buffer used for reading message data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/de8/io__transactor_8hpp_source.html#l00200">io_transactor.hpp:200</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CUdpListener_html_a5f8cf23d20273a992c614a954ba019c5"><div class="ttname"><a href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a5f8cf23d20273a992c614a954ba019c5">px::asio::CUdpListener::write</a></div><div class="ttdeci">virtual PUBLIC void write(std::shared_ptr&lt; io_buf_t &gt; pbuf)</div><div class="ttdoc">Override of the base function to write data to the messenger&amp;#39;s output channel&amp;#39;s outbox. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc3/udp__listener_8cpp_source.html#l00332">udp_listener.cpp:332</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CUdpListener_html_a0040ab70ecd027f2dcd0dae3ba803cc1"><div class="ttname"><a href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a0040ab70ecd027f2dcd0dae3ba803cc1">px::asio::CUdpListener::_udp_socket</a></div><div class="ttdeci">std::unique_ptr&lt; boost::asio::ip::udp::udp::socket &gt; _udp_socket</div><div class="ttdoc">The UDP socket that this Actor will open, at _port, and listen on. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2f/udp__listener_8hpp_source.html#l00284">udp_listener.hpp:284</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CUdpListener_html_a499f0ba26591ed5c2ba9510328b0d28e"><div class="ttname"><a href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a499f0ba26591ed5c2ba9510328b0d28e">px::asio::CUdpListener::on_write</a></div><div class="ttdeci">void on_write(const boost::system::error_code &amp;err, size_t bytes_transferred)</div><div class="ttdoc">Callback function for Boost.Asio upon writing UDP data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc3/udp__listener_8cpp_source.html#l00422">udp_listener.cpp:422</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CUdpListener_html_a2590c95249c5efa09a0cb291b8b8e4d3"><div class="ttname"><a href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a2590c95249c5efa09a0cb291b8b8e4d3">px::asio::CUdpListener::CUdpListener</a></div><div class="ttdeci">PUBLIC CUdpListener(CIoManager &amp;manager, const CProtocolHandler &amp;prot, uint16_t port)</div><div class="ttdoc">Constructor. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc3/udp__listener_8cpp_source.html#l00044">udp_listener.cpp:44</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CUdpListener_html_ab195f32d7fbd8cc6ccea9bd5b3899062"><div class="ttname"><a href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ab195f32d7fbd8cc6ccea9bd5b3899062">px::asio::CUdpListener::_prot</a></div><div class="ttdeci">std::shared_ptr&lt; CProtocolHandler &gt; _prot</div><div class="ttdoc">Protocol-specific handler, used to parse and handle incoming requests and generate responses (needed ...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2f/udp__listener_8hpp_source.html#l00318">udp_listener.hpp:318</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CIoTransactor_html"><div class="ttname"><a href="../../d2/d13/classpx_1_1asio_1_1CIoTransactor.html">px::asio::CIoTransactor</a></div><div class="ttdoc">The abstract I/O &amp;quot;Messenger&amp;quot; class that will be implemented in the TCP and UDP connection classes...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/de8/io__transactor_8hpp_source.html#l00032">io_transactor.hpp:32</a></div></div>
<div class="ttc" id="namespacepx_html_a8231daeb7713d1005025954bc1066422ab45cffe084dd3d20d928bee85e7b0f21"><div class="ttname"><a href="../../de/dcb/namespacepx.html#a8231daeb7713d1005025954bc1066422ab45cffe084dd3d20d928bee85e7b0f21">px::datatype::string</a></div><div class="ttdoc">UTF-8 character string. </div></div>
<div class="ttc" id="classpx_1_1asio_1_1CUdpListener_html_acbb8d1fa814003148fb9f32c1d720326"><div class="ttname"><a href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#acbb8d1fa814003148fb9f32c1d720326">px::asio::CUdpListener::read_with_msgs</a></div><div class="ttdeci">size_t read_with_msgs(boost::system::error_code &amp;ec)</div><div class="ttdoc">Read incoming UDP packet and receive header message indicating original destination address...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc3/udp__listener_8cpp_source.html#l00227">udp_listener.cpp:227</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CUdpListener_html_a20614f0f02afb63a891d70fdbe2f701c"><div class="ttname"><a href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a20614f0f02afb63a891d70fdbe2f701c">px::asio::CUdpListener::write_push</a></div><div class="ttdeci">void write_push(const boost::asio::ip::address &amp;target_addr, uint16_t target_port, std::shared_ptr&lt; io_buf_t &gt; pbuf)</div><div class="ttdoc">One-way (pushed) write to the specified target address. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc3/udp__listener_8cpp_source.html#l00471">udp_listener.cpp:471</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CUdpListener_html_a0aa2259b0f8077d1493d226b26bf8416"><div class="ttname"><a href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a0aa2259b0f8077d1493d226b26bf8416">px::asio::CUdpListener::broadcast</a></div><div class="ttdeci">void broadcast(const uint16_t target_port, std::shared_ptr&lt; io_buf_t &gt; pbuf)</div><div class="ttdoc">Send the given buffer to the given port as a Global broadcast. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc3/udp__listener_8cpp_source.html#l00535">udp_listener.cpp:535</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CIoTransactor_html_a9596248159d929dd66b23690f3c9737b"><div class="ttname"><a href="../../d2/d13/classpx_1_1asio_1_1CIoTransactor.html#a9596248159d929dd66b23690f3c9737b">px::asio::CIoTransactor::write</a></div><div class="ttdeci">virtual PUBLIC void write(std::shared_ptr&lt; io_buf_t &gt; pbuf)</div><div class="ttdoc">Write data to the messenger&amp;#39;s output channel&amp;#39;s outbox. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dcb/io__transactor_8cpp_source.html#l00229">io_transactor.cpp:229</a></div></div>
<div class="ttc" id="cast_8hpp_html"><div class="ttname"><a href="../../dd/d59/cast_8hpp.html">cast.hpp</a></div></div>
<div class="ttc" id="log_8hpp_html_a9f84712d72c0f218249f27e9a9fcca1d"><div class="ttname"><a href="../../d4/d3d/log_8hpp.html#a9f84712d72c0f218249f27e9a9fcca1d">LIBPX_FDEBUG</a></div><div class="ttdeci">#define LIBPX_FDEBUG(__VLVL__,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d3d/log_8hpp_source.html#l00198">log.hpp:198</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CIoTransactor_html_a2b2a750f125a7ce77624b9271f4dc4f2"><div class="ttname"><a href="../../d2/d13/classpx_1_1asio_1_1CIoTransactor.html#a2b2a750f125a7ce77624b9271f4dc4f2">px::asio::CIoTransactor::handle_write</a></div><div class="ttdeci">void handle_write(const boost::system::error_code &amp;err, size_t bytes_transferred)</div><div class="ttdoc">Callback function to handle a completed &amp;quot;write&amp;quot; operation. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dcb/io__transactor_8cpp_source.html#l00268">io_transactor.cpp:268</a></div></div>
<div class="ttc" id="protocol__handler_8hpp_html"><div class="ttname"><a href="../../d2/de7/protocol__handler_8hpp.html">protocol_handler.hpp</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CUdpListener_html_ae03043a7d2c7a98ccbea82cb01b6695f"><div class="ttname"><a href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ae03043a7d2c7a98ccbea82cb01b6695f">px::asio::CUdpListener::_orig_dest_endpoint</a></div><div class="ttdeci">std::unique_ptr&lt; boost::asio::ip::udp::udp::endpoint &gt; _orig_dest_endpoint</div><div class="ttdoc">The endpoint that a received message was originally addressed to (ie, us, but with the specifics of b...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2f/udp__listener_8hpp_source.html#l00311">udp_listener.hpp:311</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CUdpListener_html_a03d6cf3f213c0ba05fd5e6ea4defc5ea"><div class="ttname"><a href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a03d6cf3f213c0ba05fd5e6ea4defc5ea">px::asio::CUdpListener::_want_response</a></div><div class="ttdeci">bool _want_response</div><div class="ttdoc">Flag to indicate if we should send a response message. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2f/udp__listener_8hpp_source.html#l00338">udp_listener.hpp:338</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CUdpListener_html_a867126e8b0de1f2443697f2cda72ffe1"><div class="ttname"><a href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a867126e8b0de1f2443697f2cda72ffe1">px::asio::CUdpListener::close</a></div><div class="ttdeci">virtual PUBLIC void close()</div><div class="ttdoc">Inherited from CIoActor. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc3/udp__listener_8cpp_source.html#l00138">udp_listener.cpp:138</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CUdpListener_html_a19bb81bedd2b11ef38065ed5916f50ef"><div class="ttname"><a href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a19bb81bedd2b11ef38065ed5916f50ef">px::asio::CUdpListener::~CUdpListener</a></div><div class="ttdeci">PUBLIC ~CUdpListener()</div><div class="ttdoc">Destructor. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc3/udp__listener_8cpp_source.html#l00075">udp_listener.cpp:75</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CIoTransactor_html_adc4afd0ca46c1111d323d16b094d3b37"><div class="ttname"><a href="../../d2/d13/classpx_1_1asio_1_1CIoTransactor.html#adc4afd0ca46c1111d323d16b094d3b37">px::asio::CIoTransactor::start</a></div><div class="ttdeci">PUBLIC void start()</div><div class="ttdoc">Kick-start the messenger by waiting for incoming data. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/dcb/io__transactor_8cpp_source.html#l00052">io_transactor.cpp:52</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CUdpListener_html_ae14259befb19663d84891e2cbc749195"><div class="ttname"><a href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ae14259befb19663d84891e2cbc749195">px::asio::CUdpListener::subnet_broadcast</a></div><div class="ttdeci">void subnet_broadcast(const boost::asio::ip::address_v4 &amp;bcast_addr, const uint16_t target_port, std::shared_ptr&lt; io_buf_t &gt; pbuf)</div><div class="ttdoc">Send the given buffer to the given port as a local subnet broadcast. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc3/udp__listener_8cpp_source.html#l00554">udp_listener.cpp:554</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CProtocolHandler_html_a5be0ff44a7c9794ee1c7717b93f8626a"><div class="ttname"><a href="../../d1/d20/classpx_1_1asio_1_1CProtocolHandler.html#a5be0ff44a7c9794ee1c7717b93f8626a">px::asio::CProtocolHandler::protocol</a></div><div class="ttdeci">virtual px::string protocol() const =0</div><div class="ttdoc">Getter for the string to identify the protocol for session tracking and debugging purposes...</div></div>
<div class="ttc" id="classpx_1_1asio_1_1CUdpListener_html_ab1032d4cdb037e7c946c112aad8db99c"><div class="ttname"><a href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ab1032d4cdb037e7c946c112aad8db99c">px::asio::CUdpListener::_endpoint_queue</a></div><div class="ttdeci">std::queue&lt; std::shared_ptr&lt; boost::asio::ip::udp::udp::endpoint &gt; &gt; _endpoint_queue</div><div class="ttdoc">Queues the endpoint address to send with each output buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2f/udp__listener_8hpp_source.html#l00300">udp_listener.hpp:300</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CUdpListener_html_ae06adb3988b7dd1897410606fe82034f"><div class="ttname"><a href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#ae06adb3988b7dd1897410606fe82034f">px::asio::CUdpListener::get_source_address</a></div><div class="ttdeci">PUBLIC const boost::asio::ip::address get_source_address(uint16_t &amp;source_port) const </div><div class="ttdoc">Gets the source address and port of the message currently being processed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc3/udp__listener_8cpp_source.html#l00492">udp_listener.cpp:492</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CUdpListener_html_aaa18944c60ec9064acab1ea11fb20c36"><div class="ttname"><a href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#aaa18944c60ec9064acab1ea11fb20c36">px::asio::CUdpListener::on_read</a></div><div class="ttdeci">void on_read(const boost::system::error_code &amp;err, size_t bytes_recvd)</div><div class="ttdoc">Callback function for Boost.Asio upon accepting UDP data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc3/udp__listener_8cpp_source.html#l00179">udp_listener.cpp:179</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CProtocolHandler_html"><div class="ttname"><a href="../../d1/d20/classpx_1_1asio_1_1CProtocolHandler.html">px::asio::CProtocolHandler</a></div><div class="ttdoc">Protocol handler abstraction layerThis ABC defines interfaces that are needed by higher-level code wh...</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/de7/protocol__handler_8hpp_source.html#l00026">protocol_handler.hpp:26</a></div></div>
<div class="ttc" id="udp__listener_8hpp_html"><div class="ttname"><a href="../../dc/d2f/udp__listener_8hpp.html">udp_listener.hpp</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CUdpListener_html_a8ebad3c8d31cfa4735cb366fc84d3d3f"><div class="ttname"><a href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a8ebad3c8d31cfa4735cb366fc84d3d3f">px::asio::CUdpListener::create</a></div><div class="ttdeci">static PUBLIC std::shared_ptr&lt; CUdpListener &gt; create(CIoManager &amp;manager, const CProtocolHandler &amp;prot, uint16_t port)</div><div class="ttdoc">Factory function to create a new CUdpListener instance. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc3/udp__listener_8cpp_source.html#l00031">udp_listener.cpp:31</a></div></div>
<div class="ttc" id="log_8hpp_html_a242c84f819cac7a2d5e9f2e2df788b0e"><div class="ttname"><a href="../../d4/d3d/log_8hpp.html#a242c84f819cac7a2d5e9f2e2df788b0e">LIBPX_DEBUG</a></div><div class="ttdeci">#define LIBPX_DEBUG(__VLVL__,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d3d/log_8hpp_source.html#l00196">log.hpp:196</a></div></div>
<div class="ttc" id="log_8hpp_html"><div class="ttname"><a href="../../d4/d3d/log_8hpp.html">log.hpp</a></div><div class="ttdoc">An internal libpx header that defines the syslogging functions. </div></div>
<div class="ttc" id="log_8hpp_html_aedf82e390ea25288cf698a9d9eb470ef"><div class="ttname"><a href="../../d4/d3d/log_8hpp.html#aedf82e390ea25288cf698a9d9eb470ef">LIBPX_INFO</a></div><div class="ttdeci">#define LIBPX_INFO(__VLVL__,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d3d/log_8hpp_source.html#l00192">log.hpp:192</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CUdpListener_html_a9890e2039f8197046276f84f23041755"><div class="ttname"><a href="../../d8/d6a/classpx_1_1asio_1_1CUdpListener.html#a9890e2039f8197046276f84f23041755">px::asio::CUdpListener::read_more</a></div><div class="ttdeci">void read_more() override</div><div class="ttdoc">Inherited from CIoTransactor. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc3/udp__listener_8cpp_source.html#l00160">udp_listener.cpp:160</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CIoTransactor_html_a2949e553390272d9f1a9b6bcaa16b1a0"><div class="ttname"><a href="../../d2/d13/classpx_1_1asio_1_1CIoTransactor.html#a2949e553390272d9f1a9b6bcaa16b1a0">px::asio::CIoTransactor::_outbox</a></div><div class="ttdeci">std::queue&lt; std::shared_ptr&lt; io_buf_t &gt; &gt; _outbox</div><div class="ttdoc">Queues the outgoing data to send. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/de8/io__transactor_8hpp_source.html#l00217">io_transactor.hpp:217</a></div></div>
<div class="ttc" id="classpx_1_1asio_1_1CIoManager_html"><div class="ttname"><a href="../../d6/d32/classpx_1_1asio_1_1CIoManager.html">px::asio::CIoManager</a></div><div class="ttdoc">The main I/O manager to host the Power Xpert Toolkit&amp;#39;s ASIO framework. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d76/io__manager_8hpp_source.html#l00042">io_manager.hpp:42</a></div></div>
<div class="ttc" id="io__manager_8hpp_html"><div class="ttname"><a href="../../d0/d76/io__manager_8hpp.html">io_manager.hpp</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_0e92ad6578cdb0742396e0d69fb8d85e.html">source</a></li><li class="navelem"><a class="el" href="../../dir_bc2cdec2015e9ef6f40c6b6845a4c8bc.html">asio</a></li><li class="navelem"><a class="el" href="../../dir_bdc7bee2d924406f82f13f2eddff255c.html">udp</a></li><li class="navelem"><a class="el" href="../../d3/dc3/udp__listener_8cpp.html">udp_listener.cpp</a></li>
    <li class="footer">Generated on Fri May 7 2021 20:24:20 for libpx by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
