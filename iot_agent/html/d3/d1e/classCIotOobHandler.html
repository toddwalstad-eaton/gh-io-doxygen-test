<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>IoT Agent: CIotOobHandler Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../Eaton_Red_Toolbox_Logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">IoT Agent
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="../../inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d3/d1e/classCIotOobHandler.html','../../');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="../../de/d6a/classCIotOobHandler-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CIotOobHandler Class Reference<div class="ingroups"><a class="el" href="../../d1/dfd/group__cds__handler.html">Handler for CDS requests</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>IoT Agent's Handler for the Settings and Status OOBs.  
 <a href="../../d3/d1e/classCIotOobHandler.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html">iot_oob_handler.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for CIotOobHandler:</div>
<div class="dyncontent">
<div class="center"><img src="../../dc/d5d/classCIotOobHandler__coll__graph.png" border="0" usemap="#CIotOobHandler_coll__map" alt="Collaboration graph"/></div>
<map name="CIotOobHandler_coll__map" id="CIotOobHandler_coll__map">
<area shape="rect" id="node3" title="STL class. " alt="" coords="118,184,252,261"/><area shape="rect" id="node4" href="../../dc/d86/classCatchupOob.html" title="IoT Agent&#39;s Handler for the IotCatchup OOB. " alt="" coords="383,347,653,674"/><area shape="rect" id="node6" title="STL class. " alt="" coords="465,13,572,91"/><area shape="rect" id="node7" title="STL class. " alt="" coords="678,472,764,549"/><area shape="rect" id="node9" title="STL class. " alt="" coords="652,6,791,98"/></map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a61c63c6f3ae242233ecafb036cbec4ba"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#a61c63c6f3ae242233ecafb036cbec4ba">CIotOobHandler</a> (std::shared_ptr&lt; <a class="el" href="../../db/d77/classCIotAgentCore.html">CIotAgentCore</a> &gt; core, std::shared_ptr&lt; <a class="el" href="../../d5/df5/classCIotAgentCdsHandler.html">CIotAgentCdsHandler</a> &gt; cds_handler)</td></tr>
<tr class="memdesc:a61c63c6f3ae242233ecafb036cbec4ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default constructor.  <a href="#a61c63c6f3ae242233ecafb036cbec4ba">More...</a><br/></td></tr>
<tr class="separator:a61c63c6f3ae242233ecafb036cbec4ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95d1c4a33b37ba2e6bfb66952e78a351"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#a95d1c4a33b37ba2e6bfb66952e78a351">~CIotOobHandler</a> ()</td></tr>
<tr class="memdesc:a95d1c4a33b37ba2e6bfb66952e78a351"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default destructor.  <a href="#a95d1c4a33b37ba2e6bfb66952e78a351">More...</a><br/></td></tr>
<tr class="separator:a95d1c4a33b37ba2e6bfb66952e78a351"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad818cd7d9b65206793cd2f379e2775ae"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#ad818cd7d9b65206793cd2f379e2775ae">initialize</a> ()</td></tr>
<tr class="memdesc:ad818cd7d9b65206793cd2f379e2775ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize by reading in the IotConfigSettings, ProxySettings, ImageUpdateApp, IotDeviceMapping, and IotDeviceSettings OOBs and doing some validation.  <a href="#ad818cd7d9b65206793cd2f379e2775ae">More...</a><br/></td></tr>
<tr class="separator:ad818cd7d9b65206793cd2f379e2775ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36357391bdb6bd42a94e1dfa0ffaab33"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#a36357391bdb6bd42a94e1dfa0ffaab33">store_connection_string</a> ()</td></tr>
<tr class="memdesc:a36357391bdb6bd42a94e1dfa0ffaab33"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store the Connection String in the H_IotConnectionString OOB, and replace the string shown in the IotConfigSettings OOB with replacement text, unless the Connection String was already stored in H_IotConnectionString.  <a href="#a36357391bdb6bd42a94e1dfa0ffaab33">More...</a><br/></td></tr>
<tr class="separator:a36357391bdb6bd42a94e1dfa0ffaab33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0355cef8124f4f7d767c7a68c5b94cd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#af0355cef8124f4f7d767c7a68c5b94cd">set_oob_status</a> (px::proto::IotConnectionStatusEnums status, px::proto::IotAgentErrorStateEnums error_state, const char *error_reason)</td></tr>
<tr class="memdesc:af0355cef8124f4f7d767c7a68c5b94cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the status and error codes, with optional reason, and output to the IotConnectionStatus OOB.  <a href="#af0355cef8124f4f7d767c7a68c5b94cd">More...</a><br/></td></tr>
<tr class="separator:af0355cef8124f4f7d767c7a68c5b94cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ff9dde07782b0bf337f894d92daad0d"><td class="memItemLeft" align="right" valign="top">px::proto::IotConnectionStatusEnums&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#a8ff9dde07782b0bf337f894d92daad0d">get_agent_status</a> ()</td></tr>
<tr class="memdesc:a8ff9dde07782b0bf337f894d92daad0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getter for the current connection status of the agent.  <a href="#a8ff9dde07782b0bf337f894d92daad0d">More...</a><br/></td></tr>
<tr class="separator:a8ff9dde07782b0bf337f894d92daad0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8858b94cb0a2d789cb6afd54279fd412"><td class="memItemLeft" align="right" valign="top">px::proto::IotAgentErrorStateEnums&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#a8858b94cb0a2d789cb6afd54279fd412">get_connection_error_state</a> ()</td></tr>
<tr class="memdesc:a8858b94cb0a2d789cb6afd54279fd412"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getter for the current error state of the agent's connection.  <a href="#a8858b94cb0a2d789cb6afd54279fd412">More...</a><br/></td></tr>
<tr class="separator:a8858b94cb0a2d789cb6afd54279fd412"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab044c19f9dbde3091bf30b6c785d488"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#aab044c19f9dbde3091bf30b6c785d488">get_error_reason</a> ()</td></tr>
<tr class="memdesc:aab044c19f9dbde3091bf30b6c785d488"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getter for the current error reason of the agent's connection.  <a href="#aab044c19f9dbde3091bf30b6c785d488">More...</a><br/></td></tr>
<tr class="separator:aab044c19f9dbde3091bf30b6c785d488"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad881c68c43f9a812daaf5a94909f177b"><td class="memItemLeft" align="right" valign="top">px::proto::IotConnectionStatusEnums&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#ad881c68c43f9a812daaf5a94909f177b">check_connection_status</a> (void *device_handle)</td></tr>
<tr class="memdesc:ad881c68c43f9a812daaf5a94909f177b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines the current connection status via the Eaton Device SDK.  <a href="#ad881c68c43f9a812daaf5a94909f177b">More...</a><br/></td></tr>
<tr class="separator:ad881c68c43f9a812daaf5a94909f177b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bb9cb2fed05868f097d9aecd802bd7e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#a6bb9cb2fed05868f097d9aecd802bd7e">update_traffic_count</a> (uint32_t traffic_count, bool write_oob=false)</td></tr>
<tr class="memdesc:a6bb9cb2fed05868f097d9aecd802bd7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update the traffic counter and optionally update the OOB.  <a href="#a6bb9cb2fed05868f097d9aecd802bd7e">More...</a><br/></td></tr>
<tr class="separator:a6bb9cb2fed05868f097d9aecd802bd7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c6bf33c5fa41488fdc796d701638cbd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#a8c6bf33c5fa41488fdc796d701638cbd">set_https_proxy_env</a> ()</td></tr>
<tr class="memdesc:a8c6bf33c5fa41488fdc796d701638cbd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use the ProxySettings OOB data to construct the https_proxy environment variable, and set it into the environment.  <a href="#a8c6bf33c5fa41488fdc796d701638cbd">More...</a><br/></td></tr>
<tr class="separator:a8c6bf33c5fa41488fdc796d701638cbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66db7e6e5a924d3fd8dd51462c204019"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#a66db7e6e5a924d3fd8dd51462c204019">get_hosted_uri</a> ()</td></tr>
<tr class="memdesc:a66db7e6e5a924d3fd8dd51462c204019"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convenience getter for the hostname for the IoT Hub.  <a href="#a66db7e6e5a924d3fd8dd51462c204019">More...</a><br/></td></tr>
<tr class="separator:a66db7e6e5a924d3fd8dd51462c204019"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09bfac5c676ecc78f0e0758d65ee9858"><td class="memItemLeft" align="right" valign="top">std::shared_ptr<br class="typebreak"/>
&lt; px::proto::ImageVersion &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#a09bfac5c676ecc78f0e0758d65ee9858">get_image_version</a> (const px::string &amp;oob_tag)</td></tr>
<tr class="memdesc:a09bfac5c676ecc78f0e0758d65ee9858"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the Image Version OOB from the CDS, with the given full tag.  <a href="#a09bfac5c676ecc78f0e0758d65ee9858">More...</a><br/></td></tr>
<tr class="separator:a09bfac5c676ecc78f0e0758d65ee9858"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7880dc26ea3bb67ff3a47df503c7c0d3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#a7880dc26ea3bb67ff3a47df503c7c0d3">get_image_results</a> (const px::string &amp;command_uuid, <a class="el" href="../../d8/da0/iot__oob__handler_8hpp.html#a2e8a9e89aac0291eaa6c9b9a64a44761">imgage_results_map_t</a> &amp;results_map)</td></tr>
<tr class="memdesc:a7880dc26ea3bb67ff3a47df503c7c0d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fill in a map of results from the ImageUpdateResults OOB with the given command UUID.  <a href="#a7880dc26ea3bb67ff3a47df503c7c0d3">More...</a><br/></td></tr>
<tr class="separator:a7880dc26ea3bb67ff3a47df503c7c0d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19d556a9dfebc1b8bd4629bd58755fcb"><td class="memItemLeft" align="right" valign="top">px::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#a19d556a9dfebc1b8bd4629bd58755fcb">get_image_update_app</a> (const px::string &amp;device_model) const </td></tr>
<tr class="memdesc:a19d556a9dfebc1b8bd4629bd58755fcb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Look up and return the name of the Image Update app for this device model, if any.  <a href="#a19d556a9dfebc1b8bd4629bd58755fcb">More...</a><br/></td></tr>
<tr class="separator:a19d556a9dfebc1b8bd4629bd58755fcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa66bec315a7f4d9da507b456917c1755"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#aa66bec315a7f4d9da507b456917c1755">read_iot_device_settings_oob</a> (<a class="el" href="../../d8/da0/iot__oob__handler_8hpp.html#a4409c792dbe206fad043466b003e89fa">gdse_device_settings_map_t</a> &amp;settings_map)</td></tr>
<tr class="memdesc:aa66bec315a7f4d9da507b456917c1755"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads in the IotDeviceSettings OOB and maps its data into the given settings_map.  <a href="#aa66bec315a7f4d9da507b456917c1755">More...</a><br/></td></tr>
<tr class="separator:aa66bec315a7f4d9da507b456917c1755"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a9bb79765340454d8de473a87241e77"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#a4a9bb79765340454d8de473a87241e77">create_map_from_oob</a> (const px::string &amp;tag_name, <a class="el" href="../../d8/da0/iot__oob__handler_8hpp.html#aec2236417e495316641e16c0428349fc">built_in_commands_map_t</a> &amp;map_name)</td></tr>
<tr class="memdesc:a4a9bb79765340454d8de473a87241e77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads in the OOB with the given tag and maps its data into the given map_name.  <a href="#a4a9bb79765340454d8de473a87241e77">More...</a><br/></td></tr>
<tr class="separator:a4a9bb79765340454d8de473a87241e77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67fca04e66ef65529273811cc851b94d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#a67fca04e66ef65529273811cc851b94d">update_iot_device_settings_oob</a> (bool force_update=false)</td></tr>
<tr class="memdesc:a67fca04e66ef65529273811cc851b94d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write the _iot_settings_map out to the IotDeviceSettings OOB.  <a href="#a67fca04e66ef65529273811cc851b94d">More...</a><br/></td></tr>
<tr class="separator:a67fca04e66ef65529273811cc851b94d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a138e4cc11380371b13767ea454644960"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#a138e4cc11380371b13767ea454644960">add_device_setting</a> (px::id_t dev_id, const std::string &amp;label, const px::CValue &amp;value, const std::string &amp;details, bool dont_write_yet=false)</td></tr>
<tr class="memdesc:a138e4cc11380371b13767ea454644960"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a per-device IoT setting value to our internal map and optionally write out the map to the IotDeviceSettings OOB.  <a href="#a138e4cc11380371b13767ea454644960">More...</a><br/></td></tr>
<tr class="separator:a138e4cc11380371b13767ea454644960"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac824857ae3e7827d2361cd8ee6834fad"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#ac824857ae3e7827d2361cd8ee6834fad">clear_device_setting</a> (px::id_t dev_id, const std::string &amp;label, bool dont_write_yet=false)</td></tr>
<tr class="memdesc:ac824857ae3e7827d2361cd8ee6834fad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove a per-device IoT Setting, or the whole device's settings, and optionally write out the updated map to the IotDeviceSettings OOB.  <a href="#ac824857ae3e7827d2361cd8ee6834fad">More...</a><br/></td></tr>
<tr class="separator:ac824857ae3e7827d2361cd8ee6834fad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a59a5aa8cab0ff70e2f7482250a18807e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/da0/iot__oob__handler_8hpp.html#a4ef1d6c2b8be3f4fb61e0de77614eb7f">gdse_entries_map_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#a59a5aa8cab0ff70e2f7482250a18807e">get_device_settings</a> (px::id_t dev_id) const </td></tr>
<tr class="memdesc:a59a5aa8cab0ff70e2f7482250a18807e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the persisted IoT Device Settings for the indicated device, if any.  <a href="#a59a5aa8cab0ff70e2f7482250a18807e">More...</a><br/></td></tr>
<tr class="separator:a59a5aa8cab0ff70e2f7482250a18807e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a16b88835e8e4f1f0100c9e869339b463"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#a16b88835e8e4f1f0100c9e869339b463">_agent_enabled</a></td></tr>
<tr class="memdesc:a16b88835e8e4f1f0100c9e869339b463"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable for the IoT Agent process.  <a href="#a16b88835e8e4f1f0100c9e869339b463">More...</a><br/></td></tr>
<tr class="separator:a16b88835e8e4f1f0100c9e869339b463"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09c0fce6e43743d9990ae209ed9c9eec"><td class="memItemLeft" align="right" valign="top">px::proto::IotConfigSettings&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#a09c0fce6e43743d9990ae209ed9c9eec">_config_settings</a></td></tr>
<tr class="memdesc:a09c0fce6e43743d9990ae209ed9c9eec"><td class="mdescLeft">&#160;</td><td class="mdescRight">If _agent_enabled is true, holds the settings from the IotConfigSettings OOB.  <a href="#a09c0fce6e43743d9990ae209ed9c9eec">More...</a><br/></td></tr>
<tr class="separator:a09c0fce6e43743d9990ae209ed9c9eec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d46dc5d654c688678737f8a678dc6fa"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#a8d46dc5d654c688678737f8a678dc6fa">_connection_string</a></td></tr>
<tr class="memdesc:a8d46dc5d654c688678737f8a678dc6fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">The Connection String to open the connection to the Azure IoT Hub.  <a href="#a8d46dc5d654c688678737f8a678dc6fa">More...</a><br/></td></tr>
<tr class="separator:a8d46dc5d654c688678737f8a678dc6fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d78d2a34841994dd576e8fe7aa85d2c"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#a0d78d2a34841994dd576e8fe7aa85d2c">_host_port</a></td></tr>
<tr class="memdesc:a0d78d2a34841994dd576e8fe7aa85d2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Based on the protocol, will set the target host port number here.  <a href="#a0d78d2a34841994dd576e8fe7aa85d2c">More...</a><br/></td></tr>
<tr class="separator:a0d78d2a34841994dd576e8fe7aa85d2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fafce44c7763a32b226e86aa794d542"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#a5fafce44c7763a32b226e86aa794d542">_ever_connected</a></td></tr>
<tr class="memdesc:a5fafce44c7763a32b226e86aa794d542"><td class="mdescLeft">&#160;</td><td class="mdescRight">A flag that is set if we have ever succeeded in connecting.  <a href="#a5fafce44c7763a32b226e86aa794d542">More...</a><br/></td></tr>
<tr class="separator:a5fafce44c7763a32b226e86aa794d542"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a71a945cf6a632c808ffa8ff53f8fd53f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#a71a945cf6a632c808ffa8ff53f8fd53f">_proxy_enabled</a></td></tr>
<tr class="memdesc:a71a945cf6a632c808ffa8ff53f8fd53f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable for the proxy and its settings.  <a href="#a71a945cf6a632c808ffa8ff53f8fd53f">More...</a><br/></td></tr>
<tr class="separator:a71a945cf6a632c808ffa8ff53f8fd53f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f044c7c341c3ba7ebf1e412b89ce6a9"><td class="memItemLeft" align="right" valign="top">px::proto::ProxySettings&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#a4f044c7c341c3ba7ebf1e412b89ce6a9">_proxy_settings</a></td></tr>
<tr class="memdesc:a4f044c7c341c3ba7ebf1e412b89ce6a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">If _proxy_enabled is true, holds the proxy settings from the ProxySettings OOB.  <a href="#a4f044c7c341c3ba7ebf1e412b89ce6a9">More...</a><br/></td></tr>
<tr class="separator:a4f044c7c341c3ba7ebf1e412b89ce6a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b5cdf8bd70665170895ab24de911fb5"><td class="memItemLeft" align="right" valign="top">px::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#a5b5cdf8bd70665170895ab24de911fb5">_proxy_host</a></td></tr>
<tr class="memdesc:a5b5cdf8bd70665170895ab24de911fb5"><td class="mdescLeft">&#160;</td><td class="mdescRight">If _proxy_enabled is true, holds the proxy host name or address from the ProxySettings proxy_address.  <a href="#a5b5cdf8bd70665170895ab24de911fb5">More...</a><br/></td></tr>
<tr class="separator:a5b5cdf8bd70665170895ab24de911fb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9133f46513785346ea5f147b340ba672"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#a9133f46513785346ea5f147b340ba672">_proxy_port</a></td></tr>
<tr class="memdesc:a9133f46513785346ea5f147b340ba672"><td class="mdescLeft">&#160;</td><td class="mdescRight">If _proxy_enabled is true, holds the proxy port number from the ProxySettings proxy_address.  <a href="#a9133f46513785346ea5f147b340ba672">More...</a><br/></td></tr>
<tr class="separator:a9133f46513785346ea5f147b340ba672"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada47ae86f62e7ff7bdf4bb5be6ec9a52"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/da0/iot__oob__handler_8hpp.html#aec2236417e495316641e16c0428349fc">built_in_commands_map_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#ada47ae86f62e7ff7bdf4bb5be6ec9a52">_built_in_commands</a></td></tr>
<tr class="memdesc:ada47ae86f62e7ff7bdf4bb5be6ec9a52"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map of supported Built-in Commands and the underlying command being called.  <a href="#ada47ae86f62e7ff7bdf4bb5be6ec9a52">More...</a><br/></td></tr>
<tr class="separator:ada47ae86f62e7ff7bdf4bb5be6ec9a52"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af328bcb14d658c35488a0816316bd326"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d86/classCatchupOob.html">CatchupOob</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#af328bcb14d658c35488a0816316bd326">catchup_oob_handler</a></td></tr>
<tr class="memdesc:af328bcb14d658c35488a0816316bd326"><td class="mdescLeft">&#160;</td><td class="mdescRight">Instantiates the class for managing the IotCatchup OOB.  <a href="#af328bcb14d658c35488a0816316bd326">More...</a><br/></td></tr>
<tr class="separator:af328bcb14d658c35488a0816316bd326"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a53f0103ee2c7a004965e7918c149c14e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#a53f0103ee2c7a004965e7918c149c14e">write_status_oob</a> ()</td></tr>
<tr class="memdesc:a53f0103ee2c7a004965e7918c149c14e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write out the status, error, and traffic information to the IotConnectionStatus OOB.  <a href="#a53f0103ee2c7a004965e7918c149c14e">More...</a><br/></td></tr>
<tr class="separator:a53f0103ee2c7a004965e7918c149c14e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:aa47d4089bdd92427a9138a888fa360d5"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="../../db/d77/classCIotAgentCore.html">CIotAgentCore</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#aa47d4089bdd92427a9138a888fa360d5">_core</a></td></tr>
<tr class="memdesc:aa47d4089bdd92427a9138a888fa360d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">The Core class that manages the running of this application.  <a href="#aa47d4089bdd92427a9138a888fa360d5">More...</a><br/></td></tr>
<tr class="separator:aa47d4089bdd92427a9138a888fa360d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93d736c723ab9b1cde53285f12b148fd"><td class="memItemLeft" align="right" valign="top">std::shared_ptr<br class="typebreak"/>
&lt; <a class="el" href="../../d5/df5/classCIotAgentCdsHandler.html">CIotAgentCdsHandler</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#a93d736c723ab9b1cde53285f12b148fd">_cds_handler</a></td></tr>
<tr class="memdesc:a93d736c723ab9b1cde53285f12b148fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">The ASIO handler for reading from and submitting to the CDS.  <a href="#a93d736c723ab9b1cde53285f12b148fd">More...</a><br/></td></tr>
<tr class="separator:a93d736c723ab9b1cde53285f12b148fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c7e87bb7a92e6eede60c2022d3d9d6e"><td class="memItemLeft" align="right" valign="top">px::proto::IotConnectionStatusEnums&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#a0c7e87bb7a92e6eede60c2022d3d9d6e">_agent_status</a></td></tr>
<tr class="memdesc:a0c7e87bb7a92e6eede60c2022d3d9d6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Status of the IoT Agent's connection to a Hosted server.  <a href="#a0c7e87bb7a92e6eede60c2022d3d9d6e">More...</a><br/></td></tr>
<tr class="separator:a0c7e87bb7a92e6eede60c2022d3d9d6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac371ab068ea860bf71bf653695d1add3"><td class="memItemLeft" align="right" valign="top">px::proto::IotAgentErrorStateEnums&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#ac371ab068ea860bf71bf653695d1add3">_error_state</a></td></tr>
<tr class="memdesc:ac371ab068ea860bf71bf653695d1add3"><td class="mdescLeft">&#160;</td><td class="mdescRight">High-level error code for the IoT Agent's connection status.  <a href="#ac371ab068ea860bf71bf653695d1add3">More...</a><br/></td></tr>
<tr class="separator:ac371ab068ea860bf71bf653695d1add3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d8fc40d7e2b68916ec249046af74798"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#a4d8fc40d7e2b68916ec249046af74798">_error_reason</a></td></tr>
<tr class="memdesc:a4d8fc40d7e2b68916ec249046af74798"><td class="mdescLeft">&#160;</td><td class="mdescRight">Error reason details.  <a href="#a4d8fc40d7e2b68916ec249046af74798">More...</a><br/></td></tr>
<tr class="separator:a4d8fc40d7e2b68916ec249046af74798"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ca2c639ed8cacfabc4b26421f4f1f57"><td class="memItemLeft" align="right" valign="top">time_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#a5ca2c639ed8cacfabc4b26421f4f1f57">_last_change_time</a></td></tr>
<tr class="memdesc:a5ca2c639ed8cacfabc4b26421f4f1f57"><td class="mdescLeft">&#160;</td><td class="mdescRight">The UTC time (in seconds) of the last change in status.  <a href="#a5ca2c639ed8cacfabc4b26421f4f1f57">More...</a><br/></td></tr>
<tr class="separator:a5ca2c639ed8cacfabc4b26421f4f1f57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac426ece5baffde9f73c8346e6dbb8e0"><td class="memItemLeft" align="right" valign="top">px::proto::IotAgentErrorStateEnums&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#aac426ece5baffde9f73c8346e6dbb8e0">_last_failed_error</a></td></tr>
<tr class="memdesc:aac426ece5baffde9f73c8346e6dbb8e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the last error code seen when in the CLOSED or FAILED status.  <a href="#aac426ece5baffde9f73c8346e6dbb8e0">More...</a><br/></td></tr>
<tr class="separator:aac426ece5baffde9f73c8346e6dbb8e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6174c134c2bbbc4ef0e4a77826e9506f"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#a6174c134c2bbbc4ef0e4a77826e9506f">_traffic_count</a></td></tr>
<tr class="memdesc:a6174c134c2bbbc4ef0e4a77826e9506f"><td class="mdescLeft">&#160;</td><td class="mdescRight">A measure of WebSocket traffic, for diagnostic purposes.  <a href="#a6174c134c2bbbc4ef0e4a77826e9506f">More...</a><br/></td></tr>
<tr class="separator:a6174c134c2bbbc4ef0e4a77826e9506f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaf971c7c5dd4e37c21481744077319f"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#abaf971c7c5dd4e37c21481744077319f">_traffic_units</a></td></tr>
<tr class="memdesc:abaf971c7c5dd4e37c21481744077319f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The units or label for the measure of WebSocket traffic.  <a href="#abaf971c7c5dd4e37c21481744077319f">More...</a><br/></td></tr>
<tr class="separator:abaf971c7c5dd4e37c21481744077319f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a044228566e527ac4e8bc5e201b57c1fd"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#a044228566e527ac4e8bc5e201b57c1fd">_dflt_traffic_units</a> = &quot;Messages Confirmed&quot;</td></tr>
<tr class="memdesc:a044228566e527ac4e8bc5e201b57c1fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">By default, we will count Acknowledged (Confirmed) messages.  <a href="#a044228566e527ac4e8bc5e201b57c1fd">More...</a><br/></td></tr>
<tr class="separator:a044228566e527ac4e8bc5e201b57c1fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab44316654554bc91366ee8eca4e5c77"><td class="memItemLeft" align="right" valign="top">std::map&lt; px::string, px::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#aab44316654554bc91366ee8eca4e5c77">_image_update_apps</a></td></tr>
<tr class="memdesc:aab44316654554bc91366ee8eca4e5c77"><td class="mdescLeft">&#160;</td><td class="mdescRight">A map of device models (key) to their Image Update app names.  <a href="#aab44316654554bc91366ee8eca4e5c77">More...</a><br/></td></tr>
<tr class="separator:aab44316654554bc91366ee8eca4e5c77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a702d6963f32d08747c830ca3c4a99f52"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d8/da0/iot__oob__handler_8hpp.html#a4409c792dbe206fad043466b003e89fa">gdse_device_settings_map_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d1e/classCIotOobHandler.html#a702d6963f32d08747c830ca3c4a99f52">_iot_settings_map</a></td></tr>
<tr class="memdesc:a702d6963f32d08747c830ca3c4a99f52"><td class="mdescLeft">&#160;</td><td class="mdescRight">A map of per-device IoT-related settings, mapped from / to the IotDeviceSettings OOB.  <a href="#a702d6963f32d08747c830ca3c4a99f52">More...</a><br/></td></tr>
<tr class="separator:a702d6963f32d08747c830ca3c4a99f52"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>IoT Agent's Handler for the Settings and Status OOBs. </p>
<p>This class manages the reading of the IotConfigSettings OOB that describes the agent's configuration, and holds a copy of the data for the agent's use.</p>
<p>This class also holds the status data that it can push out to the IotConnectionStatus OOB (non-persistently) when updated. </p>

<p>Definition at line <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html#l00080">80</a> of file <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html">iot_oob_handler.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a61c63c6f3ae242233ecafb036cbec4ba"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CIotOobHandler::CIotOobHandler </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="../../db/d77/classCIotAgentCore.html">CIotAgentCore</a> &gt;&#160;</td>
          <td class="paramname"><em>core</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="../../d5/df5/classCIotAgentCdsHandler.html">CIotAgentCdsHandler</a> &gt;&#160;</td>
          <td class="paramname"><em>cds_handler</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">core</td><td>Pointer to the "Core" class for this app. </td></tr>
    <tr><td class="paramname">cds_handler</td><td>Pointer to the CDS Handler for reading from and writing to the CDS. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html#l00015">15</a> of file <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html">iot_oob_handler.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a95d1c4a33b37ba2e6bfb66952e78a351"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">CIotOobHandler::~CIotOobHandler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Default destructor. </p>

<p>Definition at line <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html#l00030">30</a> of file <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html">iot_oob_handler.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="ad818cd7d9b65206793cd2f379e2775ae"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CIotOobHandler::initialize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize by reading in the IotConfigSettings, ProxySettings, ImageUpdateApp, IotDeviceMapping, and IotDeviceSettings OOBs and doing some validation. </p>
<p>If the hostname has not been set, will extract it from the ConnectionString. Also validates the the GUID in the ConnectionString is the publisher's.</p>
<dl class="section return"><dt>Returns</dt><dd>True if configuration appears valid; False if invalid, with the IotConnectionStatus updated to show the error. </dd></dl>

<p>Definition at line <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html#l00041">41</a> of file <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html">iot_oob_handler.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/d1e/classCIotOobHandler_ad818cd7d9b65206793cd2f379e2775ae_cgraph.png" border="0" usemap="#d3/d1e/classCIotOobHandler_ad818cd7d9b65206793cd2f379e2775ae_cgraph" alt=""/></div>
<map name="d3/d1e/classCIotOobHandler_ad818cd7d9b65206793cd2f379e2775ae_cgraph" id="d3/d1e/classCIotOobHandler_ad818cd7d9b65206793cd2f379e2775ae_cgraph">
<area shape="rect" id="node2" href="../../d3/d1e/classCIotOobHandler.html#af0355cef8124f4f7d767c7a68c5b94cd" title="Set the status and error codes, with optional reason, and output to the IotConnectionStatus OOB..." alt="" coords="259,70,413,111"/><area shape="rect" id="node6" href="../../d3/d1e/classCIotOobHandler.html#a4a9bb79765340454d8de473a87241e77" title="Reads in the OOB with the given tag and maps its data into the given map_name. " alt="" coords="249,135,423,177"/><area shape="rect" id="node7" href="../../d3/d1e/classCIotOobHandler.html#aa66bec315a7f4d9da507b456917c1755" title="Reads in the IotDeviceSettings OOB and maps its data into the given settings_map. ..." alt="" coords="243,201,429,242"/><area shape="rect" id="node3" href="../../d3/d1e/classCIotOobHandler.html#a53f0103ee2c7a004965e7918c149c14e" title="Write out the status, error, and traffic information to the IotConnectionStatus OOB. " alt="" coords="478,5,645,46"/><area shape="rect" id="node4" href="../../d3/d1e/classCIotOobHandler.html#a36357391bdb6bd42a94e1dfa0ffaab33" title="Store the Connection String in the H_IotConnectionString OOB, and replace the string shown in the Iot..." alt="" coords="478,70,645,111"/><area shape="rect" id="node5" href="../../d3/d1e/classCIotOobHandler.html#a66db7e6e5a924d3fd8dd51462c204019" title="Convenience getter for the hostname for the IoT Hub. " alt="" coords="484,135,639,177"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a36357391bdb6bd42a94e1dfa0ffaab33"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CIotOobHandler::store_connection_string </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Store the Connection String in the H_IotConnectionString OOB, and replace the string shown in the IotConfigSettings OOB with replacement text, unless the Connection String was already stored in H_IotConnectionString. </p>

<p>Definition at line <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html#l00303">303</a> of file <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html">iot_oob_handler.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/d1e/classCIotOobHandler_a36357391bdb6bd42a94e1dfa0ffaab33_icgraph.png" border="0" usemap="#d3/d1e/classCIotOobHandler_a36357391bdb6bd42a94e1dfa0ffaab33_icgraph" alt=""/></div>
<map name="d3/d1e/classCIotOobHandler_a36357391bdb6bd42a94e1dfa0ffaab33_icgraph" id="d3/d1e/classCIotOobHandler_a36357391bdb6bd42a94e1dfa0ffaab33_icgraph">
<area shape="rect" id="node2" href="../../d3/d1e/classCIotOobHandler.html#af0355cef8124f4f7d767c7a68c5b94cd" title="Set the status and error codes, with optional reason, and output to the IotConnectionStatus OOB..." alt="" coords="222,5,375,46"/><area shape="rect" id="node3" href="../../d3/d1e/classCIotOobHandler.html#ad818cd7d9b65206793cd2f379e2775ae" title="Initialize by reading in the IotConfigSettings, ProxySettings, ImageUpdateApp, IotDeviceMapping, and IotDeviceSettings OOBs and doing some validation. " alt="" coords="424,12,613,39"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="af0355cef8124f4f7d767c7a68c5b94cd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CIotOobHandler::set_oob_status </td>
          <td>(</td>
          <td class="paramtype">px::proto::IotConnectionStatusEnums&#160;</td>
          <td class="paramname"><em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">px::proto::IotAgentErrorStateEnums&#160;</td>
          <td class="paramname"><em>error_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>error_reason</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the status and error codes, with optional reason, and output to the IotConnectionStatus OOB. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">status</td><td>The present connection status code. </td></tr>
    <tr><td class="paramname">error_state</td><td>The high-level code for the error, or IOT_NO_ERROR. </td></tr>
    <tr><td class="paramname">error_reason</td><td>Human-readable text to explain the reason for the error_state. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html#l00379">379</a> of file <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html">iot_oob_handler.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/d1e/classCIotOobHandler_af0355cef8124f4f7d767c7a68c5b94cd_cgraph.png" border="0" usemap="#d3/d1e/classCIotOobHandler_af0355cef8124f4f7d767c7a68c5b94cd_cgraph" alt=""/></div>
<map name="d3/d1e/classCIotOobHandler_af0355cef8124f4f7d767c7a68c5b94cd_cgraph" id="d3/d1e/classCIotOobHandler_af0355cef8124f4f7d767c7a68c5b94cd_cgraph">
<area shape="rect" id="node2" href="../../d3/d1e/classCIotOobHandler.html#a53f0103ee2c7a004965e7918c149c14e" title="Write out the status, error, and traffic information to the IotConnectionStatus OOB. " alt="" coords="209,5,375,46"/><area shape="rect" id="node3" href="../../d3/d1e/classCIotOobHandler.html#a36357391bdb6bd42a94e1dfa0ffaab33" title="Store the Connection String in the H_IotConnectionString OOB, and replace the string shown in the Iot..." alt="" coords="209,70,375,111"/><area shape="rect" id="node4" href="../../d3/d1e/classCIotOobHandler.html#a66db7e6e5a924d3fd8dd51462c204019" title="Convenience getter for the hostname for the IoT Hub. " alt="" coords="215,135,369,177"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/d1e/classCIotOobHandler_af0355cef8124f4f7d767c7a68c5b94cd_icgraph.png" border="0" usemap="#d3/d1e/classCIotOobHandler_af0355cef8124f4f7d767c7a68c5b94cd_icgraph" alt=""/></div>
<map name="d3/d1e/classCIotOobHandler_af0355cef8124f4f7d767c7a68c5b94cd_icgraph" id="d3/d1e/classCIotOobHandler_af0355cef8124f4f7d767c7a68c5b94cd_icgraph">
<area shape="rect" id="node2" href="../../d3/d1e/classCIotOobHandler.html#ad818cd7d9b65206793cd2f379e2775ae" title="Initialize by reading in the IotConfigSettings, ProxySettings, ImageUpdateApp, IotDeviceMapping, and IotDeviceSettings OOBs and doing some validation. " alt="" coords="208,12,397,39"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8ff9dde07782b0bf337f894d92daad0d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">px::proto::IotConnectionStatusEnums CIotOobHandler::get_agent_status </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Getter for the current connection status of the agent. </p>
<dl class="section return"><dt>Returns</dt><dd>The present value of the connection status code. </dd></dl>

<p>Definition at line <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html#l00437">437</a> of file <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html">iot_oob_handler.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a8858b94cb0a2d789cb6afd54279fd412"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">px::proto::IotAgentErrorStateEnums CIotOobHandler::get_connection_error_state </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Getter for the current error state of the agent's connection. </p>
<dl class="section return"><dt>Returns</dt><dd>The present value of the connection error code. </dd></dl>

<p>Definition at line <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html#l00439">439</a> of file <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html">iot_oob_handler.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="aab044c19f9dbde3091bf30b6c785d488"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string CIotOobHandler::get_error_reason </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Getter for the current error reason of the agent's connection. </p>
<dl class="section return"><dt>Returns</dt><dd>The present value of the connection error reason. </dd></dl>

<p>Definition at line <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html#l00441">441</a> of file <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html">iot_oob_handler.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ad881c68c43f9a812daaf5a94909f177b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">px::proto::IotConnectionStatusEnums CIotOobHandler::check_connection_status </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>device_handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determines the current connection status via the Eaton Device SDK. </p>
<p>If it is different than before, this function will update the Status OOB and our connection code with the new information.</p>
<p>A particular check is if the status was Connecting and the new IoT Status shows that a message was confirmed (a bump in our traffic count), then it will change the status to Open (ie, Connected). This compensates for the Azure to too quickly report connection success from the open call; getting a message confirmation is a much better indicator.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">device_handle</td><td>A handle to the device connection, actually of type IOT_DEVICE_HANDLE. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The present connection status code, as per the SDK. </dd></dl>

</div>
</div>
<a class="anchor" id="a6bb9cb2fed05868f097d9aecd802bd7e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CIotOobHandler::update_traffic_count </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>traffic_count</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>write_oob</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update the traffic counter and optionally update the OOB. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">traffic_count</td><td>The count of traffic. </td></tr>
    <tr><td class="paramname">write_oob</td><td>When True, write out the OOB with this updated count. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html#l00478">478</a> of file <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html">iot_oob_handler.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/d1e/classCIotOobHandler_a6bb9cb2fed05868f097d9aecd802bd7e_cgraph.png" border="0" usemap="#d3/d1e/classCIotOobHandler_a6bb9cb2fed05868f097d9aecd802bd7e_cgraph" alt=""/></div>
<map name="d3/d1e/classCIotOobHandler_a6bb9cb2fed05868f097d9aecd802bd7e_cgraph" id="d3/d1e/classCIotOobHandler_a6bb9cb2fed05868f097d9aecd802bd7e_cgraph">
<area shape="rect" id="node2" href="../../d3/d1e/classCIotOobHandler.html#a53f0103ee2c7a004965e7918c149c14e" title="Write out the status, error, and traffic information to the IotConnectionStatus OOB. " alt="" coords="233,5,399,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a8c6bf33c5fa41488fdc796d701638cbd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CIotOobHandler::set_https_proxy_env </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Use the ProxySettings OOB data to construct the https_proxy environment variable, and set it into the environment. </p>
<p>We will build a string of the form "http://username:passwd@proxy.etn.com:8080/", depending upon which pieces are provided. If the port is already appended to the proxy_address, we will use that. We will re-use whatever protocol is provided (eg http or https). VERY helpful when working with libcurl.</p>
<dl class="section return"><dt>Returns</dt><dd>True on success, else false if something failed (eg, proxy not enabled or URL provided). </dd></dl>

<p>Definition at line <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html#l00530">530</a> of file <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html">iot_oob_handler.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a66db7e6e5a924d3fd8dd51462c204019"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string CIotOobHandler::get_hosted_uri </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convenience getter for the hostname for the IoT Hub. </p>
<dl class="section return"><dt>Returns</dt><dd>The hosted_uri from the _config_settings. </dd></dl>

<p>Definition at line <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html#l00949">949</a> of file <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html">iot_oob_handler.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/d1e/classCIotOobHandler_a66db7e6e5a924d3fd8dd51462c204019_icgraph.png" border="0" usemap="#d3/d1e/classCIotOobHandler_a66db7e6e5a924d3fd8dd51462c204019_icgraph" alt=""/></div>
<map name="d3/d1e/classCIotOobHandler_a66db7e6e5a924d3fd8dd51462c204019_icgraph" id="d3/d1e/classCIotOobHandler_a66db7e6e5a924d3fd8dd51462c204019_icgraph">
<area shape="rect" id="node2" href="../../d3/d1e/classCIotOobHandler.html#af0355cef8124f4f7d767c7a68c5b94cd" title="Set the status and error codes, with optional reason, and output to the IotConnectionStatus OOB..." alt="" coords="209,5,362,46"/><area shape="rect" id="node3" href="../../d3/d1e/classCIotOobHandler.html#ad818cd7d9b65206793cd2f379e2775ae" title="Initialize by reading in the IotConfigSettings, ProxySettings, ImageUpdateApp, IotDeviceMapping, and IotDeviceSettings OOBs and doing some validation. " alt="" coords="411,12,600,39"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a09bfac5c676ecc78f0e0758d65ee9858"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt; px::proto::ImageVersion &gt; CIotOobHandler::get_image_version </td>
          <td>(</td>
          <td class="paramtype">const px::string &amp;&#160;</td>
          <td class="paramname"><em>oob_tag</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the Image Version OOB from the CDS, with the given full tag. </p>
<p>This OOB, if it exists, will be named, eg, "ImageVersion/PX-Red-BBB/rc1-123", where the portions after ImageVersion are the canonical model name and version.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">oob_tag</td><td>The tag (name) for this OOB. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Shared pointer to the OOB data, unless no such OOB was found, in which case the pointer will be empty. </dd></dl>

<p>Definition at line <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html#l00584">584</a> of file <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html">iot_oob_handler.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a7880dc26ea3bb67ff3a47df503c7c0d3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CIotOobHandler::get_image_results </td>
          <td>(</td>
          <td class="paramtype">const px::string &amp;&#160;</td>
          <td class="paramname"><em>command_uuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/da0/iot__oob__handler_8hpp.html#a2e8a9e89aac0291eaa6c9b9a64a44761">imgage_results_map_t</a> &amp;&#160;</td>
          <td class="paramname"><em>results_map</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fill in a map of results from the ImageUpdateResults OOB with the given command UUID. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">command_uuid</td><td>The Command's UUID, which makes up the final part of the OOB tag. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">results_map</td><td>The imgage_results_map_t map of results. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html#l00604">604</a> of file <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html">iot_oob_handler.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a19d556a9dfebc1b8bd4629bd58755fcb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">px::string CIotOobHandler::get_image_update_app </td>
          <td>(</td>
          <td class="paramtype">const px::string &amp;&#160;</td>
          <td class="paramname"><em>device_model</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Look up and return the name of the Image Update app for this device model, if any. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">device_model</td><td>The canonical device model for the device. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>String with the name of the Image Update app, if any. Will be an empty string if the device has no known Image Update app. </dd></dl>

<p>Definition at line <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html#l00666">666</a> of file <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html">iot_oob_handler.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="aa66bec315a7f4d9da507b456917c1755"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CIotOobHandler::read_iot_device_settings_oob </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/da0/iot__oob__handler_8hpp.html#a4409c792dbe206fad043466b003e89fa">gdse_device_settings_map_t</a> &amp;&#160;</td>
          <td class="paramname"><em>settings_map</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads in the IotDeviceSettings OOB and maps its data into the given settings_map. </p>
<p>Will first clear the settings_map. Note: if used by other programs, this function it a candidate to be moved to CCdsSyncIO.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">settings_map</td><td>The map which the OOB data is to be read into. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success, False if there was an issue (none defined at present). No such OOB is considered a Success case, resulting in an empty map. </dd></dl>

<p>Definition at line <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html#l00712">712</a> of file <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html">iot_oob_handler.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/d1e/classCIotOobHandler_aa66bec315a7f4d9da507b456917c1755_icgraph.png" border="0" usemap="#d3/d1e/classCIotOobHandler_aa66bec315a7f4d9da507b456917c1755_icgraph" alt=""/></div>
<map name="d3/d1e/classCIotOobHandler_aa66bec315a7f4d9da507b456917c1755_icgraph" id="d3/d1e/classCIotOobHandler_aa66bec315a7f4d9da507b456917c1755_icgraph">
<area shape="rect" id="node2" href="../../d3/d1e/classCIotOobHandler.html#ad818cd7d9b65206793cd2f379e2775ae" title="Initialize by reading in the IotConfigSettings, ProxySettings, ImageUpdateApp, IotDeviceMapping, and IotDeviceSettings OOBs and doing some validation. " alt="" coords="240,5,429,32"/><area shape="rect" id="node3" href="../../d3/d1e/classCIotOobHandler.html#a67fca04e66ef65529273811cc851b94d" title="Write the _iot_settings_map out to the IotDeviceSettings OOB. " alt="" coords="241,57,428,98"/><area shape="rect" id="node4" href="../../d3/d1e/classCIotOobHandler.html#a138e4cc11380371b13767ea454644960" title="Add a per&#45;device IoT setting value to our internal map and optionally write out the map to the IotDev..." alt="" coords="481,23,639,65"/><area shape="rect" id="node5" href="../../d3/d1e/classCIotOobHandler.html#ac824857ae3e7827d2361cd8ee6834fad" title="Remove a per&#45;device IoT Setting, or the whole device&#39;s settings, and optionally write out the updated..." alt="" coords="477,89,643,130"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4a9bb79765340454d8de473a87241e77"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CIotOobHandler::create_map_from_oob </td>
          <td>(</td>
          <td class="paramtype">const px::string &amp;&#160;</td>
          <td class="paramname"><em>tag_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d8/da0/iot__oob__handler_8hpp.html#aec2236417e495316641e16c0428349fc">built_in_commands_map_t</a> &amp;&#160;</td>
          <td class="paramname"><em>map_name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads in the OOB with the given tag and maps its data into the given map_name. </p>
<p>Will first clear the map_name.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">tag_name</td><td>Tag of the OOB which is to be read. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">map_name</td><td>The map which the OOB data is to be read into. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html#l00680">680</a> of file <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html">iot_oob_handler.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/d1e/classCIotOobHandler_a4a9bb79765340454d8de473a87241e77_icgraph.png" border="0" usemap="#d3/d1e/classCIotOobHandler_a4a9bb79765340454d8de473a87241e77_icgraph" alt=""/></div>
<map name="d3/d1e/classCIotOobHandler_a4a9bb79765340454d8de473a87241e77_icgraph" id="d3/d1e/classCIotOobHandler_a4a9bb79765340454d8de473a87241e77_icgraph">
<area shape="rect" id="node2" href="../../d3/d1e/classCIotOobHandler.html#ad818cd7d9b65206793cd2f379e2775ae" title="Initialize by reading in the IotConfigSettings, ProxySettings, ImageUpdateApp, IotDeviceMapping, and IotDeviceSettings OOBs and doing some validation. " alt="" coords="229,12,419,39"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a67fca04e66ef65529273811cc851b94d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CIotOobHandler::update_iot_device_settings_oob </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>force_update</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write the _iot_settings_map out to the IotDeviceSettings OOB. </p>
<p>Will normally read in the existing OOB first and not do anything if there are no changes. If the _iot_settings_map is empty, will clear the OOB instead of writing to it. Note: if used by other programs, this function it a candidate to be moved to CCdsSyncIO.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">force_update</td><td>If true, won't pre-read the existing OOB; will just proceed with writing the OOB. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success, False if there was an issue (none defined at present). </dd></dl>

<p>Definition at line <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html#l00759">759</a> of file <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html">iot_oob_handler.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/d1e/classCIotOobHandler_a67fca04e66ef65529273811cc851b94d_cgraph.png" border="0" usemap="#d3/d1e/classCIotOobHandler_a67fca04e66ef65529273811cc851b94d_cgraph" alt=""/></div>
<map name="d3/d1e/classCIotOobHandler_a67fca04e66ef65529273811cc851b94d_cgraph" id="d3/d1e/classCIotOobHandler_a67fca04e66ef65529273811cc851b94d_cgraph">
<area shape="rect" id="node2" href="../../d3/d1e/classCIotOobHandler.html#aa66bec315a7f4d9da507b456917c1755" title="Reads in the IotDeviceSettings OOB and maps its data into the given settings_map. ..." alt="" coords="240,5,427,46"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/d1e/classCIotOobHandler_a67fca04e66ef65529273811cc851b94d_icgraph.png" border="0" usemap="#d3/d1e/classCIotOobHandler_a67fca04e66ef65529273811cc851b94d_icgraph" alt=""/></div>
<map name="d3/d1e/classCIotOobHandler_a67fca04e66ef65529273811cc851b94d_icgraph" id="d3/d1e/classCIotOobHandler_a67fca04e66ef65529273811cc851b94d_icgraph">
<area shape="rect" id="node2" href="../../d3/d1e/classCIotOobHandler.html#a138e4cc11380371b13767ea454644960" title="Add a per&#45;device IoT setting value to our internal map and optionally write out the map to the IotDev..." alt="" coords="244,5,401,46"/><area shape="rect" id="node3" href="../../d3/d1e/classCIotOobHandler.html#ac824857ae3e7827d2361cd8ee6834fad" title="Remove a per&#45;device IoT Setting, or the whole device&#39;s settings, and optionally write out the updated..." alt="" coords="240,70,405,111"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a138e4cc11380371b13767ea454644960"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CIotOobHandler::add_device_setting </td>
          <td>(</td>
          <td class="paramtype">px::id_t&#160;</td>
          <td class="paramname"><em>dev_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const px::CValue &amp;&#160;</td>
          <td class="paramname"><em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>details</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>dont_write_yet</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a per-device IoT setting value to our internal map and optionally write out the map to the IotDeviceSettings OOB. </p>
<p>Only non-default settings should be added here.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev_id</td><td>The CDS ID of the device this setting pertains to. </td></tr>
    <tr><td class="paramname">label</td><td>The label (name) for this setting entry. </td></tr>
    <tr><td class="paramname">value</td><td>The new Value for this setting. </td></tr>
    <tr><td class="paramname">details</td><td>The optional additional details (eg, path); set to empty string if not needed. </td></tr>
    <tr><td class="paramname">dont_write_yet</td><td>Set to True to prevent writing to the OOB (helpful when there are more settings updates to follow). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success, False if there was an issue (none defined at present). </dd></dl>

<p>Definition at line <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html#l00823">823</a> of file <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html">iot_oob_handler.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/d1e/classCIotOobHandler_a138e4cc11380371b13767ea454644960_cgraph.png" border="0" usemap="#d3/d1e/classCIotOobHandler_a138e4cc11380371b13767ea454644960_cgraph" alt=""/></div>
<map name="d3/d1e/classCIotOobHandler_a138e4cc11380371b13767ea454644960_cgraph" id="d3/d1e/classCIotOobHandler_a138e4cc11380371b13767ea454644960_cgraph">
<area shape="rect" id="node2" href="../../d3/d1e/classCIotOobHandler.html#a67fca04e66ef65529273811cc851b94d" title="Write the _iot_settings_map out to the IotDeviceSettings OOB. " alt="" coords="211,5,397,46"/><area shape="rect" id="node3" href="../../d3/d1e/classCIotOobHandler.html#aa66bec315a7f4d9da507b456917c1755" title="Reads in the IotDeviceSettings OOB and maps its data into the given settings_map. ..." alt="" coords="445,5,632,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ac824857ae3e7827d2361cd8ee6834fad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CIotOobHandler::clear_device_setting </td>
          <td>(</td>
          <td class="paramtype">px::id_t&#160;</td>
          <td class="paramname"><em>dev_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>label</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>dont_write_yet</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove a per-device IoT Setting, or the whole device's settings, and optionally write out the updated map to the IotDeviceSettings OOB. </p>
<p>Use this to clear a setting which is now at its default value, or when a device is removed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev_id</td><td>The CDS ID of the device whose setting is being changed. </td></tr>
    <tr><td class="paramname">label</td><td>The label (name) for the setting entry to remove. If this is an empty string, then all the settings for the indicated device will be removed. </td></tr>
    <tr><td class="paramname">dont_write_yet</td><td>Set to True to prevent writing to the OOB (helpful when there are more settings updates to follow). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success, False if there was an issue (none defined at present). </dd></dl>

<p>Definition at line <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html#l00875">875</a> of file <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html">iot_oob_handler.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/d1e/classCIotOobHandler_ac824857ae3e7827d2361cd8ee6834fad_cgraph.png" border="0" usemap="#d3/d1e/classCIotOobHandler_ac824857ae3e7827d2361cd8ee6834fad_cgraph" alt=""/></div>
<map name="d3/d1e/classCIotOobHandler_ac824857ae3e7827d2361cd8ee6834fad_cgraph" id="d3/d1e/classCIotOobHandler_ac824857ae3e7827d2361cd8ee6834fad_cgraph">
<area shape="rect" id="node2" href="../../d3/d1e/classCIotOobHandler.html#a67fca04e66ef65529273811cc851b94d" title="Write the _iot_settings_map out to the IotDeviceSettings OOB. " alt="" coords="219,5,405,46"/><area shape="rect" id="node3" href="../../d3/d1e/classCIotOobHandler.html#aa66bec315a7f4d9da507b456917c1755" title="Reads in the IotDeviceSettings OOB and maps its data into the given settings_map. ..." alt="" coords="453,5,640,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a59a5aa8cab0ff70e2f7482250a18807e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/da0/iot__oob__handler_8hpp.html#a4ef1d6c2b8be3f4fb61e0de77614eb7f">gdse_entries_map_t</a> CIotOobHandler::get_device_settings </td>
          <td>(</td>
          <td class="paramtype">px::id_t&#160;</td>
          <td class="paramname"><em>dev_id</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the persisted IoT Device Settings for the indicated device, if any. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dev_id</td><td>The CDS ID of the device whose settings are being requested. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A copy of the settings map for this device, if such exists (could be empty). </dd></dl>

<p>Definition at line <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html#l00934">934</a> of file <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html">iot_oob_handler.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a53f0103ee2c7a004965e7918c149c14e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void CIotOobHandler::write_status_oob </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Write out the status, error, and traffic information to the IotConnectionStatus OOB. </p>
<p>This will always be a non-persistent write to the CDS. </p>

<p>Definition at line <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html#l00493">493</a> of file <a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html">iot_oob_handler.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/d1e/classCIotOobHandler_a53f0103ee2c7a004965e7918c149c14e_icgraph.png" border="0" usemap="#d3/d1e/classCIotOobHandler_a53f0103ee2c7a004965e7918c149c14e_icgraph" alt=""/></div>
<map name="d3/d1e/classCIotOobHandler_a53f0103ee2c7a004965e7918c149c14e_icgraph" id="d3/d1e/classCIotOobHandler_a53f0103ee2c7a004965e7918c149c14e_icgraph">
<area shape="rect" id="node2" href="../../d3/d1e/classCIotOobHandler.html#af0355cef8124f4f7d767c7a68c5b94cd" title="Set the status and error codes, with optional reason, and output to the IotConnectionStatus OOB..." alt="" coords="234,5,387,46"/><area shape="rect" id="node4" href="../../d3/d1e/classCIotOobHandler.html#a6bb9cb2fed05868f097d9aecd802bd7e" title="Update the traffic counter and optionally update the OOB. " alt="" coords="221,70,400,111"/><area shape="rect" id="node3" href="../../d3/d1e/classCIotOobHandler.html#ad818cd7d9b65206793cd2f379e2775ae" title="Initialize by reading in the IotConfigSettings, ProxySettings, ImageUpdateApp, IotDeviceMapping, and IotDeviceSettings OOBs and doing some validation. " alt="" coords="448,12,637,39"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="a16b88835e8e4f1f0100c9e869339b463"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CIotOobHandler::_agent_enabled</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable for the IoT Agent process. </p>
<p>Flag passed back to core to indicate that we should exit because this process has not been enabled. </p>

<p>Definition at line <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html#l00277">277</a> of file <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html">iot_oob_handler.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a09c0fce6e43743d9990ae209ed9c9eec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">px::proto::IotConfigSettings CIotOobHandler::_config_settings</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If _agent_enabled is true, holds the settings from the IotConfigSettings OOB. </p>

<p>Definition at line <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html#l00280">280</a> of file <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html">iot_oob_handler.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a8d46dc5d654c688678737f8a678dc6fa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string CIotOobHandler::_connection_string</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The Connection String to open the connection to the Azure IoT Hub. </p>
<p>Kept apart from the IotConfigSettings data to hide the SAS Token; this will be stored in the H_IotConnectionString OOB. </p>

<p>Definition at line <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html#l00286">286</a> of file <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html">iot_oob_handler.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a0d78d2a34841994dd576e8fe7aa85d2c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t CIotOobHandler::_host_port</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Based on the protocol, will set the target host port number here. </p>

<p>Definition at line <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html#l00289">289</a> of file <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html">iot_oob_handler.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a5fafce44c7763a32b226e86aa794d542"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CIotOobHandler::_ever_connected</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A flag that is set if we have ever succeeded in connecting. </p>
<p>When diagnosing problems, it can be important to distinguish temporary network issues from permanent failures like bad configuration. </p>

<p>Definition at line <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html#l00295">295</a> of file <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html">iot_oob_handler.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a71a945cf6a632c808ffa8ff53f8fd53f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool CIotOobHandler::_proxy_enabled</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enable for the proxy and its settings. </p>
<p>Default is disabled, but when enabled the agent will use the _proxy_settings when establishing the IoT Hub connection. </p>

<p>Definition at line <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html#l00306">306</a> of file <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html">iot_oob_handler.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a4f044c7c341c3ba7ebf1e412b89ce6a9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">px::proto::ProxySettings CIotOobHandler::_proxy_settings</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If _proxy_enabled is true, holds the proxy settings from the ProxySettings OOB. </p>

<p>Definition at line <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html#l00309">309</a> of file <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html">iot_oob_handler.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a5b5cdf8bd70665170895ab24de911fb5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">px::string CIotOobHandler::_proxy_host</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If _proxy_enabled is true, holds the proxy host name or address from the ProxySettings proxy_address. </p>
<p>Usually the proxy_address has the "http://proxy.abc.com:8080" format, where we want just the proxy.abc.com part here and the port number in the next field. </p>

<p>Definition at line <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html#l00314">314</a> of file <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html">iot_oob_handler.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a9133f46513785346ea5f147b340ba672"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t CIotOobHandler::_proxy_port</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>If _proxy_enabled is true, holds the proxy port number from the ProxySettings proxy_address. </p>

<p>Definition at line <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html#l00317">317</a> of file <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html">iot_oob_handler.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ada47ae86f62e7ff7bdf4bb5be6ec9a52"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/da0/iot__oob__handler_8hpp.html#aec2236417e495316641e16c0428349fc">built_in_commands_map_t</a> CIotOobHandler::_built_in_commands</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Map of supported Built-in Commands and the underlying command being called. </p>

<p>Definition at line <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html#l00324">324</a> of file <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html">iot_oob_handler.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="af328bcb14d658c35488a0816316bd326"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d86/classCatchupOob.html">CatchupOob</a> CIotOobHandler::catchup_oob_handler</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Instantiates the class for managing the IotCatchup OOB. </p>

<p>Definition at line <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html#l00331">331</a> of file <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html">iot_oob_handler.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="aa47d4089bdd92427a9138a888fa360d5"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="../../db/d77/classCIotAgentCore.html">CIotAgentCore</a>&gt; CIotOobHandler::_core</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The Core class that manages the running of this application. </p>

<p>Definition at line <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html#l00345">345</a> of file <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html">iot_oob_handler.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a93d736c723ab9b1cde53285f12b148fd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="../../d5/df5/classCIotAgentCdsHandler.html">CIotAgentCdsHandler</a>&gt; CIotOobHandler::_cds_handler</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The ASIO handler for reading from and submitting to the CDS. </p>

<p>Definition at line <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html#l00349">349</a> of file <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html">iot_oob_handler.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a0c7e87bb7a92e6eede60c2022d3d9d6e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">px::proto::IotConnectionStatusEnums CIotOobHandler::_agent_status</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Status of the IoT Agent's connection to a Hosted server. </p>

<p>Definition at line <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html#l00358">358</a> of file <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html">iot_oob_handler.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ac371ab068ea860bf71bf653695d1add3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">px::proto::IotAgentErrorStateEnums CIotOobHandler::_error_state</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>High-level error code for the IoT Agent's connection status. </p>
<p>Normally applies when the status is Closed and indicates the general reason why. The _error_reason provides fuller details. </p>

<p>Definition at line <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html#l00365">365</a> of file <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html">iot_oob_handler.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a4d8fc40d7e2b68916ec249046af74798"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string CIotOobHandler::_error_reason</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Error reason details. </p>
<p>Provides human-readable reason for the error (if any). </p>

<p>Definition at line <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html#l00371">371</a> of file <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html">iot_oob_handler.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a5ca2c639ed8cacfabc4b26421f4f1f57"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">time_t CIotOobHandler::_last_change_time</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The UTC time (in seconds) of the last change in status. </p>
<p>Equivalent to "time_t" in ANSI C, using the UTC timebase of seconds since the Epoch (Jan 1, 1970).</p>
<p>Can be used to determine connection duration. </p>

<p>Definition at line <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html#l00380">380</a> of file <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html">iot_oob_handler.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="aac426ece5baffde9f73c8346e6dbb8e0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">px::proto::IotAgentErrorStateEnums CIotOobHandler::_last_failed_error</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Holds the last error code seen when in the CLOSED or FAILED status. </p>
<p>Used to prevent spamming the logs with the same message. </p>

<p>Definition at line <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html#l00386">386</a> of file <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html">iot_oob_handler.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a6174c134c2bbbc4ef0e4a77826e9506f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t CIotOobHandler::_traffic_count</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A measure of WebSocket traffic, for diagnostic purposes. </p>
<p>The actual measure chosen is not specified and the implementation can choose whatever is most appropriate (eg, messages sent, KB/hour, connection attempts)</p>
<p>The implementation may also change the type or reset the measure if appropriate and at its discretion. </p>

<p>Definition at line <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html#l00402">402</a> of file <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html">iot_oob_handler.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="abaf971c7c5dd4e37c21481744077319f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string CIotOobHandler::_traffic_units</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The units or label for the measure of WebSocket traffic. </p>
<p>The implementation will provide text to describe what is being measured by traffic_count. </p>

<p>Definition at line <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html#l00409">409</a> of file <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html">iot_oob_handler.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a044228566e527ac4e8bc5e201b57c1fd"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* CIotOobHandler::_dflt_traffic_units = &quot;Messages Confirmed&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>By default, we will count Acknowledged (Confirmed) messages. </p>

<p>Definition at line <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html#l00412">412</a> of file <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html">iot_oob_handler.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="aab44316654554bc91366ee8eca4e5c77"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;px::string, px::string&gt; CIotOobHandler::_image_update_apps</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A map of device models (key) to their Image Update app names. </p>
<p>Read from all the ImageUpdateApp/[product_line] OOB(s). Necessary so we can launch the make_version_oob action when a supported device is added to our CDS device data. </p>

<p>Definition at line <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html#l00424">424</a> of file <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html">iot_oob_handler.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a702d6963f32d08747c830ca3c4a99f52"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d8/da0/iot__oob__handler_8hpp.html#a4409c792dbe206fad043466b003e89fa">gdse_device_settings_map_t</a> CIotOobHandler::_iot_settings_map</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A map of per-device IoT-related settings, mapped from / to the IotDeviceSettings OOB. </p>
<p>The entries for each device should only contain the non-default or changed settings that need to be persisted, rather than all possible settings. </p>

<p>Definition at line <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html#l00432">432</a> of file <a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html">iot_oob_handler.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/src/product-ref1/px-toolkit/etn_source/iot_agent/include/<a class="el" href="../../d8/da0/iot__oob__handler_8hpp_source.html">iot_oob_handler.hpp</a></li>
<li>/src/product-ref1/px-toolkit/etn_source/iot_agent/source/<a class="el" href="../../db/d3f/iot__oob__handler_8cpp_source.html">iot_oob_handler.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d3/d1e/classCIotOobHandler.html">CIotOobHandler</a></li>
    <li class="footer">Generated on Fri May 7 2021 20:26:03 for IoT Agent by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
