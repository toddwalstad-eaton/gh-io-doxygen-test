<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>IoT Agent: IotDeviceCommand Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../Eaton_Red_Toolbox_Logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">IoT Agent
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="../../inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d3/ddf/classIotDeviceCommand.html','../../');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../db/d70/classIotDeviceCommand-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">IotDeviceCommand Class Reference<div class="ingroups"><a class="el" href="../../d9/d7f/group__iot__device__commands.html">IoT Device Commands</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Class to manage the Cloud-to-Device Device Command messages.  
 <a href="../../d3/ddf/classIotDeviceCommand.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for IotDeviceCommand:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d4c/classIotDeviceCommand__coll__graph.png" border="0" usemap="#IotDeviceCommand_coll__map" alt="Collaboration graph"/></div>
<map name="IotDeviceCommand_coll__map" id="IotDeviceCommand_coll__map">
<area shape="rect" id="node3" title="STL class. " alt="" coords="33,171,167,248"/><area shape="rect" id="node5" title="STL class. " alt="" coords="239,171,368,248"/><area shape="rect" id="node7" title="STL class. " alt="" coords="433,163,585,255"/><area shape="rect" id="node8" title="STL class. " alt="" coords="633,364,719,441"/><area shape="rect" id="node10" title="STL class. " alt="" coords="609,6,748,98"/></map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a95488f908378cf0380cda2ec327350a2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#a95488f908378cf0380cda2ec327350a2">IotDeviceCommand</a> (std::shared_ptr&lt; <a class="el" href="../../db/d77/classCIotAgentCore.html">CIotAgentCore</a> &gt; iot_core)</td></tr>
<tr class="memdesc:a95488f908378cf0380cda2ec327350a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#a95488f908378cf0380cda2ec327350a2">More...</a><br/></td></tr>
<tr class="separator:a95488f908378cf0380cda2ec327350a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2be8974dcdd6eb4bbfb7aabcd063d928"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#a2be8974dcdd6eb4bbfb7aabcd063d928">~IotDeviceCommand</a> ()</td></tr>
<tr class="memdesc:a2be8974dcdd6eb4bbfb7aabcd063d928"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default Xtor.  <a href="#a2be8974dcdd6eb4bbfb7aabcd063d928">More...</a><br/></td></tr>
<tr class="separator:a2be8974dcdd6eb4bbfb7aabcd063d928"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a988b62c05b69189815f1d27689b6103b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#a988b62c05b69189815f1d27689b6103b">cloud_to_device_command_callback</a> (IOT_DEVICE_HANDLE deviceHandle, const IOT_DEVICE_COMMAND *command, IOT_DEVICE_COMMAND_RESPONSE *commandResponse)</td></tr>
<tr class="memdesc:a988b62c05b69189815f1d27689b6103b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function to receive Cloud-to-Device device commands.  <a href="#a988b62c05b69189815f1d27689b6103b">More...</a><br/></td></tr>
<tr class="separator:a988b62c05b69189815f1d27689b6103b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17504c7be84eca59d324ee1d615e33fb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#a17504c7be84eca59d324ee1d615e33fb">unpack_cmd_params</a> (const char *commandParams)</td></tr>
<tr class="memdesc:a17504c7be84eca59d324ee1d615e33fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Utility function to unpack the command params and put them into our _cmd_params map.  <a href="#a17504c7be84eca59d324ee1d615e33fb">More...</a><br/></td></tr>
<tr class="separator:a17504c7be84eca59d324ee1d615e33fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecaf71e4f0806f83cf9d6fac2402f681"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#aecaf71e4f0806f83cf9d6fac2402f681">send_device_to_cloud_command</a> (IOT_COMMAND_TYPE commandType)</td></tr>
<tr class="memdesc:aecaf71e4f0806f83cf9d6fac2402f681"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build and send a D2C DeviceCommand message.  <a href="#aecaf71e4f0806f83cf9d6fac2402f681">More...</a><br/></td></tr>
<tr class="separator:aecaf71e4f0806f83cf9d6fac2402f681"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c97fa49284587e1350d6d6c0bf25254"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#a2c97fa49284587e1350d6d6c0bf25254">handle_query_images</a> (px::id_t cds_id, std::shared_ptr&lt; <a class="el" href="../../d2/d55/classCIotDataDevice.html">CIotDataDevice</a> &gt; dev_ptr, const IOT_DEVICE_COMMAND *command, IOT_DEVICE_COMMAND_RESPONSE *commandResponse)</td></tr>
<tr class="memdesc:a2c97fa49284587e1350d6d6c0bf25254"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to handle the QueryImages request for the indicated Device.  <a href="#a2c97fa49284587e1350d6d6c0bf25254">More...</a><br/></td></tr>
<tr class="separator:a2c97fa49284587e1350d6d6c0bf25254"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d05f8f3df173bca5a15caf43979a192"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#a4d05f8f3df173bca5a15caf43979a192">handle_fw_up_version_check</a> (px::id_t cds_id, std::shared_ptr&lt; <a class="el" href="../../d2/d55/classCIotDataDevice.html">CIotDataDevice</a> &gt; dev_ptr, const IOT_DEVICE_COMMAND *command, IOT_DEVICE_COMMAND_RESPONSE *commandResponse)</td></tr>
<tr class="memdesc:a4d05f8f3df173bca5a15caf43979a192"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to handle the FirmwareUpdate request for the indicated Device.  <a href="#a4d05f8f3df173bca5a15caf43979a192">More...</a><br/></td></tr>
<tr class="separator:a4d05f8f3df173bca5a15caf43979a192"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7eb717298bf9f0b44341d020da79a795"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#a7eb717298bf9f0b44341d020da79a795">handle_image_transfer</a> (const IOT_DEVICE_COMMAND *command, IOT_DEVICE_COMMAND_RESPONSE *commandResponse)</td></tr>
<tr class="memdesc:a7eb717298bf9f0b44341d020da79a795"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles one chunk of the ImageTransfer command.  <a href="#a7eb717298bf9f0b44341d020da79a795">More...</a><br/></td></tr>
<tr class="separator:a7eb717298bf9f0b44341d020da79a795"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa7fc44db36e40a5f4ddb60032f455fc"><td class="memItemLeft" align="right" valign="top">const std::unordered_map<br class="typebreak"/>
&lt; std::string, px::CValue &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#afa7fc44db36e40a5f4ddb60032f455fc">get_cmd_params</a> () const </td></tr>
<tr class="memdesc:afa7fc44db36e40a5f4ddb60032f455fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getter for convenience in unit testing; gets the params map.  <a href="#afa7fc44db36e40a5f4ddb60032f455fc">More...</a><br/></td></tr>
<tr class="separator:afa7fc44db36e40a5f4ddb60032f455fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa17f8440caac04da991a0b9c26fa0d3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#aaa17f8440caac04da991a0b9c26fa0d3">fill_device_to_cloud_command</a> (struct iot_command *d2c_command)</td></tr>
<tr class="memdesc:aaa17f8440caac04da991a0b9c26fa0d3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fill out the D2C structure for a DeviceCommand message.  <a href="#aaa17f8440caac04da991a0b9c26fa0d3">More...</a><br/></td></tr>
<tr class="separator:aaa17f8440caac04da991a0b9c26fa0d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99e493bf3aea14075c8c7493259d62fd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#a99e493bf3aea14075c8c7493259d62fd">complete_firmware_update</a> (unsigned int cee_status, const char *reason)</td></tr>
<tr class="memdesc:a99e493bf3aea14075c8c7493259d62fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Complete the current Firmware Update process, logging a message, and resetting all of the parameters.  <a href="#a99e493bf3aea14075c8c7493259d62fd">More...</a><br/></td></tr>
<tr class="separator:a99e493bf3aea14075c8c7493259d62fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f0585078794cd2bb731b59c4f9db28c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#a2f0585078794cd2bb731b59c4f9db28c">clear_cmd_params</a> ()</td></tr>
<tr class="memdesc:a2f0585078794cd2bb731b59c4f9db28c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when we have completed the command (unrecoverable failure or all devices done) to clear all of the class members for the current command.  <a href="#a2f0585078794cd2bb731b59c4f9db28c">More...</a><br/></td></tr>
<tr class="separator:a2f0585078794cd2bb731b59c4f9db28c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7de4e99b99527f750888dc26c82244e5"><td class="memItemLeft" align="right" valign="top">px::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#a7de4e99b99527f750888dc26c82244e5">get_cmd_params_str</a> (const char *param_name, bool use_retained=true)</td></tr>
<tr class="memdesc:a7de4e99b99527f750888dc26c82244e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getter function to get the named parameter from the current _cmd_params or else (use_retained = true) from the retained FirmwareUpdate parameters.  <a href="#a7de4e99b99527f750888dc26c82244e5">More...</a><br/></td></tr>
<tr class="separator:a7de4e99b99527f750888dc26c82244e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8c7cfeb3d43a8e68265da1193fb1e45"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#ae8c7cfeb3d43a8e68265da1193fb1e45">get_cmd_uuid</a> () const </td></tr>
<tr class="memdesc:ae8c7cfeb3d43a8e68265da1193fb1e45"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the current command's UUID text.  <a href="#ae8c7cfeb3d43a8e68265da1193fb1e45">More...</a><br/></td></tr>
<tr class="separator:ae8c7cfeb3d43a8e68265da1193fb1e45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dca1fb06906d73d56212254d1165922"><td class="memItemLeft" align="right" valign="top">px::id_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#a7dca1fb06906d73d56212254d1165922">get_cmd_device</a> (bool advance_to_next=false)</td></tr>
<tr class="memdesc:a7dca1fb06906d73d56212254d1165922"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the Device ID of the current device that we are operating on (eg, updating).  <a href="#a7dca1fb06906d73d56212254d1165922">More...</a><br/></td></tr>
<tr class="separator:a7dca1fb06906d73d56212254d1165922"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6486755693075d05279e4acd9132378a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#a6486755693075d05279e4acd9132378a">handle_img_up_status</a> (const px::proto::toolkitStruct &amp;oob_data)</td></tr>
<tr class="memdesc:a6486755693075d05279e4acd9132378a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handler for changes in the ImageUpdate/xxxx OOB for an active FirmwareUpdate process.  <a href="#a6486755693075d05279e4acd9132378a">More...</a><br/></td></tr>
<tr class="separator:a6486755693075d05279e4acd9132378a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1915d760f715dfa12412dc266ac8849c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#a1915d760f715dfa12412dc266ac8849c">handle_builtin_cmds</a> (const IOT_DEVICE_COMMAND *command, IOT_DEVICE_COMMAND_RESPONSE *commandResponse, const px::string &amp;cmdMethod, px::string &amp;rcvd_uuid)</td></tr>
<tr class="memdesc:a1915d760f715dfa12412dc266ac8849c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a C2D built in Device Command for the executing commands supported by products.  <a href="#a1915d760f715dfa12412dc266ac8849c">More...</a><br/></td></tr>
<tr class="separator:a1915d760f715dfa12412dc266ac8849c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad82a3fb33c2c66dde4230ee9b5ec4c1e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#ad82a3fb33c2c66dde4230ee9b5ec4c1e">set_command_resp_msg</a> (IOT_DEVICE_COMMAND_RESPONSE *commandResponse, const char *resp_msg)</td></tr>
<tr class="memdesc:ad82a3fb33c2c66dde4230ee9b5ec4c1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the message in commandResponse after checking the memory allocated.  <a href="#ad82a3fb33c2c66dde4230ee9b5ec4c1e">More...</a><br/></td></tr>
<tr class="separator:ad82a3fb33c2c66dde4230ee9b5ec4c1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:aff396e809b4be704902e39ca8c8ebc16"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#aff396e809b4be704902e39ca8c8ebc16">_max_chunk_size</a> = 5500</td></tr>
<tr class="memdesc:aff396e809b4be704902e39ca8c8ebc16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Specify the "chunk size" that we support for IoT data packets.  <a href="#aff396e809b4be704902e39ca8c8ebc16">More...</a><br/></td></tr>
<tr class="separator:aff396e809b4be704902e39ca8c8ebc16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f7fc1960df7c44b65e3034457ce3c7c"><td class="memItemLeft" align="right" valign="top">const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#a6f7fc1960df7c44b65e3034457ce3c7c">_transfer_delay</a> = 0</td></tr>
<tr class="memdesc:a6f7fc1960df7c44b65e3034457ce3c7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Specify the delay (in seconds) between chunk tranfers, eg for ImageTransfer messages.  <a href="#a6f7fc1960df7c44b65e3034457ce3c7c">More...</a><br/></td></tr>
<tr class="separator:a6f7fc1960df7c44b65e3034457ce3c7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a421e8fd8867719e337bfd22af573c1a6"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#a421e8fd8867719e337bfd22af573c1a6">_image_filename</a></td></tr>
<tr class="memdesc:a421e8fd8867719e337bfd22af573c1a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the full path and filename of a received Image file.  <a href="#a421e8fd8867719e337bfd22af573c1a6">More...</a><br/></td></tr>
<tr class="separator:a421e8fd8867719e337bfd22af573c1a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ddc745b3ba5492eb4a66f726b2a3c86"><td class="memItemLeft" align="right" valign="top">std::shared_ptr<br class="typebreak"/>
&lt; px::proto::ImageVersion &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#a8ddc745b3ba5492eb4a66f726b2a3c86">_img_ver_pbuf</a></td></tr>
<tr class="memdesc:a8ddc745b3ba5492eb4a66f726b2a3c86"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the information for the current version of the image during a FirmwareUpdate process.  <a href="#a8ddc745b3ba5492eb4a66f726b2a3c86">More...</a><br/></td></tr>
<tr class="separator:a8ddc745b3ba5492eb4a66f726b2a3c86"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adae2bfce1f669c0eb96b9fe04473e5bf"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#adae2bfce1f669c0eb96b9fe04473e5bf">BUILT_IN_COMMAND_SET_FIELD</a> = &quot;SetField&quot;</td></tr>
<tr class="separator:adae2bfce1f669c0eb96b9fe04473e5bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8cd168a757a0f0e4996d0c5c6a8353d6"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#a8cd168a757a0f0e4996d0c5c6a8353d6">BUILT_IN_COMMAND_GET_FIELD</a> = &quot;GetField&quot;</td></tr>
<tr class="separator:a8cd168a757a0f0e4996d0c5c6a8353d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d895f8ff2d4283f8171eca88cd0e81e"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#a8d895f8ff2d4283f8171eca88cd0e81e">BUILT_IN_COMMAND_SET_OOB</a> = &quot;SetOob&quot;</td></tr>
<tr class="separator:a8d895f8ff2d4283f8171eca88cd0e81e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:addcdf40ce9f39d12b8f16fd38e402cc2"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#addcdf40ce9f39d12b8f16fd38e402cc2">BUILT_IN_COMMAND_GET_OOB</a> = &quot;GetOob&quot;</td></tr>
<tr class="separator:addcdf40ce9f39d12b8f16fd38e402cc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92903874cc3cf3de7f2cc47a07887656"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#a92903874cc3cf3de7f2cc47a07887656">BUILT_IN_COMMAND_CDSCMD</a> = &quot;CdsCmd&quot;</td></tr>
<tr class="separator:a92903874cc3cf3de7f2cc47a07887656"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44794ff5cc5ab50e7d67f0b24ca00577"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#a44794ff5cc5ab50e7d67f0b24ca00577">BUILT_IN_COMMAND_SCRIPT</a> = &quot;CommandScript&quot;</td></tr>
<tr class="separator:a44794ff5cc5ab50e7d67f0b24ca00577"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2c4703dc59fc47ad88cc9620325964c"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#ac2c4703dc59fc47ad88cc9620325964c">TAGNAME</a> = &quot;TagName&quot;</td></tr>
<tr class="separator:ac2c4703dc59fc47ad88cc9620325964c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82acc7ffe1fbd7c3390cfca65ada0ef3"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#a82acc7ffe1fbd7c3390cfca65ada0ef3">FIELD</a> = &quot;Field&quot;</td></tr>
<tr class="separator:a82acc7ffe1fbd7c3390cfca65ada0ef3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6ed21c7f5fa496d6282c56a873f1d0d"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#ad6ed21c7f5fa496d6282c56a873f1d0d">VALUE</a> = &quot;Value&quot;</td></tr>
<tr class="separator:ad6ed21c7f5fa496d6282c56a873f1d0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa82690332f20b208f9a97b54f870b040"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#aa82690332f20b208f9a97b54f870b040">ARGS</a> = &quot;args&quot;</td></tr>
<tr class="separator:aa82690332f20b208f9a97b54f870b040"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab5bb029c8b87ab049c9370b42e3444a"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#aab5bb029c8b87ab049c9370b42e3444a">COMMAND</a> = &quot;command&quot;</td></tr>
<tr class="separator:aab5bb029c8b87ab049c9370b42e3444a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a700cf59aa68c5d9ba09c1e9977d2fa0a"><td class="memItemLeft" align="right" valign="top">const size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#a700cf59aa68c5d9ba09c1e9977d2fa0a">REQD_PARAMS_SET_FIELD</a> = 3</td></tr>
<tr class="separator:a700cf59aa68c5d9ba09c1e9977d2fa0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a607e1f39c74d9de965e5623e6c0a6660"><td class="memItemLeft" align="right" valign="top">const size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#a607e1f39c74d9de965e5623e6c0a6660">REQD_PARAMS_GET_FIELD</a> = 2</td></tr>
<tr class="separator:a607e1f39c74d9de965e5623e6c0a6660"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a169a3fcabc1bd67cd2645ac9f3e911e7"><td class="memItemLeft" align="right" valign="top">std::unordered_map<br class="typebreak"/>
&lt; std::string, px::CValue &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#a169a3fcabc1bd67cd2645ac9f3e911e7">_cmd_params</a></td></tr>
<tr class="memdesc:a169a3fcabc1bd67cd2645ac9f3e911e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">A map of the "params" section of a DeviceCommand, with each field entered (and keyed by the field name) with its payload as a CValue.  <a href="#a169a3fcabc1bd67cd2645ac9f3e911e7">More...</a><br/></td></tr>
<tr class="separator:a169a3fcabc1bd67cd2645ac9f3e911e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a642ac9241d2bdf8c29ccbea24695bda9"><td class="memItemLeft" align="right" valign="top">std::unordered_map<br class="typebreak"/>
&lt; std::string, px::CValue &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#a642ac9241d2bdf8c29ccbea24695bda9">_fw_up_cmd_params</a></td></tr>
<tr class="memdesc:a642ac9241d2bdf8c29ccbea24695bda9"><td class="mdescLeft">&#160;</td><td class="mdescRight">A copy of the map of the "params" section of the FirmwareUpdate DeviceCommand which started a FirmwareUpdate process.  <a href="#a642ac9241d2bdf8c29ccbea24695bda9">More...</a><br/></td></tr>
<tr class="separator:a642ac9241d2bdf8c29ccbea24695bda9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f2dbe5de16988f377f9a7416eb46791"><td class="memItemLeft" align="right" valign="top">std::map&lt; px::string, <br class="typebreak"/>
std::shared_ptr<br class="typebreak"/>
&lt; px::proto::ImageVersion &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#a4f2dbe5de16988f377f9a7416eb46791">_images_map</a></td></tr>
<tr class="memdesc:a4f2dbe5de16988f377f9a7416eb46791"><td class="mdescLeft">&#160;</td><td class="mdescRight">A map of the assembled set of images for all supporting devices, keyed by the tag (name) of the corresponding OOB.  <a href="#a4f2dbe5de16988f377f9a7416eb46791">More...</a><br/></td></tr>
<tr class="separator:a4f2dbe5de16988f377f9a7416eb46791"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdf0ad753e6c192d2154e7ff8a5a4015"><td class="memItemLeft" align="right" valign="top">px::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#abdf0ad753e6c192d2154e7ff8a5a4015">_cmd_uuid</a></td></tr>
<tr class="memdesc:abdf0ad753e6c192d2154e7ff8a5a4015"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the UUID of the current (active) FirmwareUpdate (or other C2D) command.  <a href="#abdf0ad753e6c192d2154e7ff8a5a4015">More...</a><br/></td></tr>
<tr class="separator:abdf0ad753e6c192d2154e7ff8a5a4015"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac06d9f90d2213ae41df7b175b73ed85"><td class="memItemLeft" align="right" valign="top">px::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#aac06d9f90d2213ae41df7b175b73ed85">_cmd_username</a></td></tr>
<tr class="memdesc:aac06d9f90d2213ae41df7b175b73ed85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the name of the user who issued the DeviceCommand, eg, FirmwareUpdate.  <a href="#aac06d9f90d2213ae41df7b175b73ed85">More...</a><br/></td></tr>
<tr class="separator:aac06d9f90d2213ae41df7b175b73ed85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade33b8c80b2674c0598f70d901916f5b"><td class="memItemLeft" align="right" valign="top">std::vector&lt; px::id_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#ade33b8c80b2674c0598f70d901916f5b">_cmd_devices</a></td></tr>
<tr class="memdesc:ade33b8c80b2674c0598f70d901916f5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the list of devices that are addressed by the current active C2D command, such as FirmwareUpdate.  <a href="#ade33b8c80b2674c0598f70d901916f5b">More...</a><br/></td></tr>
<tr class="separator:ade33b8c80b2674c0598f70d901916f5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6e8b794eb9736ccd0e9484cdbc717f0"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#af6e8b794eb9736ccd0e9484cdbc717f0">_cmd_device_index</a></td></tr>
<tr class="memdesc:af6e8b794eb9736ccd0e9484cdbc717f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index into the _cmd_devices array for the current device to be processed.  <a href="#af6e8b794eb9736ccd0e9484cdbc717f0">More...</a><br/></td></tr>
<tr class="separator:af6e8b794eb9736ccd0e9484cdbc717f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cd2c490d1056ed1eaa98eb439c60934"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#a6cd2c490d1056ed1eaa98eb439c60934">_expected_recv_size</a></td></tr>
<tr class="memdesc:a6cd2c490d1056ed1eaa98eb439c60934"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the expected size of all the ImageTransfer packets, as told to us by the FirmwareUpdate command.  <a href="#a6cd2c490d1056ed1eaa98eb439c60934">More...</a><br/></td></tr>
<tr class="separator:a6cd2c490d1056ed1eaa98eb439c60934"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d6391a8523babf7a1ae64151e0ac87f"><td class="memItemLeft" align="right" valign="top">uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#a5d6391a8523babf7a1ae64151e0ac87f">_buffer_end_idx</a></td></tr>
<tr class="memdesc:a5d6391a8523babf7a1ae64151e0ac87f"><td class="mdescLeft">&#160;</td><td class="mdescRight">An index into the receive buffer, indicating the position after the last used byte.  <a href="#a5d6391a8523babf7a1ae64151e0ac87f">More...</a><br/></td></tr>
<tr class="separator:a5d6391a8523babf7a1ae64151e0ac87f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f62de5e8202c94a7eb498360a6d1c3e"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#a2f62de5e8202c94a7eb498360a6d1c3e">_recv_buffer</a></td></tr>
<tr class="memdesc:a2f62de5e8202c94a7eb498360a6d1c3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pointer to a calloc'd buffer to hold the received ImageTransfer bytes, after decoding them from Base64.  <a href="#a2f62de5e8202c94a7eb498360a6d1c3e">More...</a><br/></td></tr>
<tr class="separator:a2f62de5e8202c94a7eb498360a6d1c3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a6cd277db795a6a1ed8538d14c06024b2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#a6cd277db795a6a1ed8538d14c06024b2">handle_get_set_field</a> (const IOT_DEVICE_COMMAND *command, std::unordered_map&lt; std::string, px::CValue &gt; cmd_params, IOT_DEVICE_COMMAND_RESPONSE *commandResponse)</td></tr>
<tr class="memdesc:a6cd277db795a6a1ed8538d14c06024b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a C2D built in Device Command for the get and set field.  <a href="#a6cd277db795a6a1ed8538d14c06024b2">More...</a><br/></td></tr>
<tr class="separator:a6cd277db795a6a1ed8538d14c06024b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46ba218b7873d0cf662247b205054c81"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#a46ba218b7873d0cf662247b205054c81">handle_generic_cmds</a> (const IOT_DEVICE_COMMAND *command, const std::unordered_map&lt; std::string, px::CValue &gt; cmd_params, std::string &amp;cmd_line, IOT_DEVICE_COMMAND_RESPONSE *commandResponse)</td></tr>
<tr class="memdesc:a46ba218b7873d0cf662247b205054c81"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle a C2D built in Device Command for commands which execute through shell_cmd.  <a href="#a46ba218b7873d0cf662247b205054c81">More...</a><br/></td></tr>
<tr class="separator:a46ba218b7873d0cf662247b205054c81"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a7775ee17181334661b65515fc634401a"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="../../db/d77/classCIotAgentCore.html">CIotAgentCore</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html#a7775ee17181334661b65515fc634401a">_iot_core</a></td></tr>
<tr class="memdesc:a7775ee17181334661b65515fc634401a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy of the Core class, which gives us access to the OOB handler and CDS handler, as well as the DeviceClient which holds the map of Devices we support.  <a href="#a7775ee17181334661b65515fc634401a">More...</a><br/></td></tr>
<tr class="separator:a7775ee17181334661b65515fc634401a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class to manage the Cloud-to-Device Device Command messages. </p>
<p>Primarily consists of the function invoked by the IoT SDK callback when we receive one of these messages, and then figures out which device(s) is(are) addressed and handles the command or hands it off to that device. </p>

<p>Definition at line <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html#l00032">32</a> of file <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a95488f908378cf0380cda2ec327350a2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">IotDeviceCommand::IotDeviceCommand </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="../../db/d77/classCIotAgentCore.html">CIotAgentCore</a> &gt;&#160;</td>
          <td class="paramname"><em>iot_core</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">iot_core</td><td>The "core" class that manages the ASIO stages and also gives us access to the <a class="el" href="../../dd/d68/classCIotDeviceClient.html" title="Actor that creates a Client IoT Device client and manages its connection to the Azure IoT Hub...">CIotDeviceClient</a> and <a class="el" href="../../d3/d1e/classCIotOobHandler.html" title="IoT Agent&#39;s Handler for the Settings and Status OOBs. ">CIotOobHandler</a>. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html#l00036">36</a> of file <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html">iot_device_command.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/ddf/classIotDeviceCommand_a95488f908378cf0380cda2ec327350a2_icgraph.png" border="0" usemap="#d3/ddf/classIotDeviceCommand_a95488f908378cf0380cda2ec327350a2_icgraph" alt=""/></div>
<map name="d3/ddf/classIotDeviceCommand_a95488f908378cf0380cda2ec327350a2_icgraph" id="d3/ddf/classIotDeviceCommand_a95488f908378cf0380cda2ec327350a2_icgraph">
<area shape="rect" id="node2" href="../../d3/ddf/classIotDeviceCommand.html#a1915d760f715dfa12412dc266ac8849c" title="Handle a C2D built in Device Command for the executing commands supported by products. " alt="" coords="275,5,477,46"/><area shape="rect" id="node3" href="../../d3/ddf/classIotDeviceCommand.html#a988b62c05b69189815f1d27689b6103b" title="Callback function to receive Cloud&#45;to&#45;Device device commands. " alt="" coords="526,5,751,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2be8974dcdd6eb4bbfb7aabcd063d928"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">IotDeviceCommand::~IotDeviceCommand </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Default Xtor. </p>

<p>Definition at line <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html#l00050">50</a> of file <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html">iot_device_command.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a988b62c05b69189815f1d27689b6103b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IotDeviceCommand::cloud_to_device_command_callback </td>
          <td>(</td>
          <td class="paramtype">IOT_DEVICE_HANDLE&#160;</td>
          <td class="paramname"><em>deviceHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const IOT_DEVICE_COMMAND *&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IOT_DEVICE_COMMAND_RESPONSE *&#160;</td>
          <td class="paramname"><em>commandResponse</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback function to receive Cloud-to-Device device commands. </p>
<p>This function conforms to the template for C2DDeviceCommandCallback.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">deviceHandle</td><td>A handle to the device connection. </td></tr>
    <tr><td class="paramname">command</td><td>A pointer to the command (refer to iot_device_command). </td></tr>
    <tr><td class="paramname">commandResponse</td><td>A pointer to the response (freed in the cloud). </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html#l00106">106</a> of file <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html">iot_device_command.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/ddf/classIotDeviceCommand_a988b62c05b69189815f1d27689b6103b_cgraph.png" border="0" usemap="#d3/ddf/classIotDeviceCommand_a988b62c05b69189815f1d27689b6103b_cgraph" alt=""/></div>
<map name="d3/ddf/classIotDeviceCommand_a988b62c05b69189815f1d27689b6103b_cgraph" id="d3/ddf/classIotDeviceCommand_a988b62c05b69189815f1d27689b6103b_cgraph">
<area shape="rect" id="node2" href="../../d3/ddf/classIotDeviceCommand.html#ad82a3fb33c2c66dde4230ee9b5ec4c1e" title="Set the message in commandResponse after checking the memory allocated. " alt="" coords="821,407,1000,448"/><area shape="rect" id="node3" href="../../d3/ddf/classIotDeviceCommand.html#a7eb717298bf9f0b44341d020da79a795" title="Handles one chunk of the ImageTransfer command. " alt="" coords="280,163,483,204"/><area shape="rect" id="node10" href="../../d3/ddf/classIotDeviceCommand.html#a2c97fa49284587e1350d6d6c0bf25254" title="Method to handle the QueryImages request for the indicated Device. " alt="" coords="540,224,743,265"/><area shape="rect" id="node11" href="../../d3/ddf/classIotDeviceCommand.html#a4d05f8f3df173bca5a15caf43979a192" title="Method to handle the FirmwareUpdate request for the indicated Device. " alt="" coords="540,289,743,331"/><area shape="rect" id="node12" href="../../d3/ddf/classIotDeviceCommand.html#a1915d760f715dfa12412dc266ac8849c" title="Handle a C2D built in Device Command for the executing commands supported by products. " alt="" coords="280,472,483,513"/><area shape="rect" id="node7" href="../../d3/ddf/classIotDeviceCommand.html#a7de4e99b99527f750888dc26c82244e5" title="Getter function to get the named parameter from the current _cmd_params or else (use_retained = true)..." alt="" coords="1075,311,1255,352"/><area shape="rect" id="node4" href="../../d3/ddf/classIotDeviceCommand.html#ae8c7cfeb3d43a8e68265da1193fb1e45" title="Gets the current command&#39;s UUID text. " alt="" coords="1075,115,1255,156"/><area shape="rect" id="node5" href="../../d3/ddf/classIotDeviceCommand.html#a17504c7be84eca59d324ee1d615e33fb" title="Utility function to unpack the command params and put them into our _cmd_params map. " alt="" coords="807,201,1014,243"/><area shape="rect" id="node6" href="../../d3/ddf/classIotDeviceCommand.html#a99e493bf3aea14075c8c7493259d62fd" title="Complete the current Firmware Update process, logging a message, and resetting all of the parameters..." alt="" coords="801,56,1021,97"/><area shape="rect" id="node9" href="../../d3/ddf/classIotDeviceCommand.html#a6486755693075d05279e4acd9132378a" title="Handler for changes in the ImageUpdate/xxxx OOB for an active FirmwareUpdate process. " alt="" coords="540,5,743,47"/><area shape="rect" id="node8" href="../../d3/ddf/classIotDeviceCommand.html#a2f0585078794cd2bb731b59c4f9db28c" title="Called when we have completed the command (unrecoverable failure or all devices done) to clear all of..." alt="" coords="1070,49,1261,91"/><area shape="rect" id="node13" href="../../d3/ddf/classIotDeviceCommand.html#a95488f908378cf0380cda2ec327350a2" title="Constructor. " alt="" coords="531,537,752,579"/><area shape="rect" id="node14" href="../../d3/ddf/classIotDeviceCommand.html#a6cd277db795a6a1ed8538d14c06024b2" title="Handle a C2D built in Device Command for the get and set field. " alt="" coords="540,407,743,448"/><area shape="rect" id="node15" href="../../d3/ddf/classIotDeviceCommand.html#a46ba218b7873d0cf662247b205054c81" title="Handle a C2D built in Device Command for commands which execute through shell_cmd. " alt="" coords="540,472,743,513"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a17504c7be84eca59d324ee1d615e33fb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool IotDeviceCommand::unpack_cmd_params </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>commandParams</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Utility function to unpack the command params and put them into our _cmd_params map. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">commandParams</td><td>The commandParams contents of a DeviceCommand; contains Command parameters in JSON format (eg, {"version": "&lt;string&gt;", "size": [int], "recursive": [boolean] } ). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if OK to continue, else False if a severe error (like bad format) requires us to stop processing. </dd></dl>

<p>Definition at line <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html#l00346">346</a> of file <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html">iot_device_command.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/ddf/classIotDeviceCommand_a17504c7be84eca59d324ee1d615e33fb_icgraph.png" border="0" usemap="#d3/ddf/classIotDeviceCommand_a17504c7be84eca59d324ee1d615e33fb_icgraph" alt=""/></div>
<map name="d3/ddf/classIotDeviceCommand_a17504c7be84eca59d324ee1d615e33fb_icgraph" id="d3/ddf/classIotDeviceCommand_a17504c7be84eca59d324ee1d615e33fb_icgraph">
<area shape="rect" id="node2" href="../../d2/d55/classCIotDataDevice.html#acccc33e01c0f9d96183e9f7bc9c54e6f" title="Handle a C2D Device Command for the GetChannelValues method. " alt="" coords="262,5,493,46"/><area shape="rect" id="node3" href="../../d2/d55/classCIotDataDevice.html#ac03a035f18b36de2b3ccb0571ea73bb5" title="Handle a C2D Device Command for the SetChannelValues method. " alt="" coords="263,70,492,111"/><area shape="rect" id="node4" href="../../d3/ddf/classIotDeviceCommand.html#a2c97fa49284587e1350d6d6c0bf25254" title="Method to handle the QueryImages request for the indicated Device. " alt="" coords="276,135,479,177"/><area shape="rect" id="node6" href="../../d3/ddf/classIotDeviceCommand.html#a4d05f8f3df173bca5a15caf43979a192" title="Method to handle the FirmwareUpdate request for the indicated Device. " alt="" coords="276,201,479,242"/><area shape="rect" id="node7" href="../../d3/ddf/classIotDeviceCommand.html#a7eb717298bf9f0b44341d020da79a795" title="Handles one chunk of the ImageTransfer command. " alt="" coords="276,266,479,307"/><area shape="rect" id="node5" href="../../d3/ddf/classIotDeviceCommand.html#a988b62c05b69189815f1d27689b6103b" title="Callback function to receive Cloud&#45;to&#45;Device device commands. " alt="" coords="542,201,767,242"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aecaf71e4f0806f83cf9d6fac2402f681"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool IotDeviceCommand::send_device_to_cloud_command </td>
          <td>(</td>
          <td class="paramtype">IOT_COMMAND_TYPE&#160;</td>
          <td class="paramname"><em>commandType</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build and send a D2C DeviceCommand message. </p>
<p>We currently support just TRANSFER_IMAGE and DEVICE_COMMAND_STATUS messages. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">commandType</td><td>Which type of command this is. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if successfully built and sent the message, else False. </dd></dl>

<p>Definition at line <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html#l00468">468</a> of file <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html">iot_device_command.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/ddf/classIotDeviceCommand_aecaf71e4f0806f83cf9d6fac2402f681_cgraph.png" border="0" usemap="#d3/ddf/classIotDeviceCommand_aecaf71e4f0806f83cf9d6fac2402f681_cgraph" alt=""/></div>
<map name="d3/ddf/classIotDeviceCommand_aecaf71e4f0806f83cf9d6fac2402f681_cgraph" id="d3/ddf/classIotDeviceCommand_aecaf71e4f0806f83cf9d6fac2402f681_cgraph">
<area shape="rect" id="node2" href="../../d3/ddf/classIotDeviceCommand.html#aaa17f8440caac04da991a0b9c26fa0d3" title="Fill out the D2C structure for a DeviceCommand message. " alt="" coords="262,5,469,46"/><area shape="rect" id="node3" href="../../d3/ddf/classIotDeviceCommand.html#ae8c7cfeb3d43a8e68265da1193fb1e45" title="Gets the current command&#39;s UUID text. " alt="" coords="518,5,698,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2c97fa49284587e1350d6d6c0bf25254"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool IotDeviceCommand::handle_query_images </td>
          <td>(</td>
          <td class="paramtype">px::id_t&#160;</td>
          <td class="paramname"><em>cds_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="../../d2/d55/classCIotDataDevice.html">CIotDataDevice</a> &gt;&#160;</td>
          <td class="paramname"><em>dev_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const IOT_DEVICE_COMMAND *&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IOT_DEVICE_COMMAND_RESPONSE *&#160;</td>
          <td class="paramname"><em>commandResponse</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Method to handle the QueryImages request for the indicated Device. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cds_id</td><td>CDS ID for the indicated device. </td></tr>
    <tr><td class="paramname">dev_ptr</td><td>Pointer to the <a class="el" href="../../d2/d55/classCIotDataDevice.html" title="Class to provide the IOT_DATA_DEVICE_ITEM instance from the CDS data for one Device. ">CIotDataDevice</a> instance for this device. </td></tr>
    <tr><td class="paramname">command</td><td>A pointer to the command (refer to iot_device_command), which has already been determined to be for QueryImages. The command parameters will be parsed out on the first call to this. </td></tr>
    <tr><td class="paramname">commandResponse</td><td>A pointer to the response (freed in the cloud), where we will put the results (version information). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if OK to continue for more devices, else False if a severe error or completeness requires us to stop processing any additional devices. </dd></dl>

<p>Definition at line <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html#l00534">534</a> of file <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html">iot_device_command.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/ddf/classIotDeviceCommand_a2c97fa49284587e1350d6d6c0bf25254_cgraph.png" border="0" usemap="#d3/ddf/classIotDeviceCommand_a2c97fa49284587e1350d6d6c0bf25254_cgraph" alt=""/></div>
<map name="d3/ddf/classIotDeviceCommand_a2c97fa49284587e1350d6d6c0bf25254_cgraph" id="d3/ddf/classIotDeviceCommand_a2c97fa49284587e1350d6d6c0bf25254_cgraph">
<area shape="rect" id="node2" href="../../d3/ddf/classIotDeviceCommand.html#a17504c7be84eca59d324ee1d615e33fb" title="Utility function to unpack the command params and put them into our _cmd_params map. " alt="" coords="257,5,463,46"/><area shape="rect" id="node3" href="../../d3/ddf/classIotDeviceCommand.html#ad82a3fb33c2c66dde4230ee9b5ec4c1e" title="Set the message in commandResponse after checking the memory allocated. " alt="" coords="271,70,449,111"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/ddf/classIotDeviceCommand_a2c97fa49284587e1350d6d6c0bf25254_icgraph.png" border="0" usemap="#d3/ddf/classIotDeviceCommand_a2c97fa49284587e1350d6d6c0bf25254_icgraph" alt=""/></div>
<map name="d3/ddf/classIotDeviceCommand_a2c97fa49284587e1350d6d6c0bf25254_icgraph" id="d3/ddf/classIotDeviceCommand_a2c97fa49284587e1350d6d6c0bf25254_icgraph">
<area shape="rect" id="node2" href="../../d3/ddf/classIotDeviceCommand.html#a988b62c05b69189815f1d27689b6103b" title="Callback function to receive Cloud&#45;to&#45;Device device commands. " alt="" coords="257,5,482,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a4d05f8f3df173bca5a15caf43979a192"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool IotDeviceCommand::handle_fw_up_version_check </td>
          <td>(</td>
          <td class="paramtype">px::id_t&#160;</td>
          <td class="paramname"><em>cds_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="../../d2/d55/classCIotDataDevice.html">CIotDataDevice</a> &gt;&#160;</td>
          <td class="paramname"><em>dev_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const IOT_DEVICE_COMMAND *&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IOT_DEVICE_COMMAND_RESPONSE *&#160;</td>
          <td class="paramname"><em>commandResponse</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Method to handle the FirmwareUpdate request for the indicated Device. </p>
<p>Note that this command is basically just a version check challenge, "Could you upgrade Device X Image Y to Version Z?", but it does (on success) kick off the firmware update process.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cds_id</td><td>CDS ID for the indicated device. </td></tr>
    <tr><td class="paramname">dev_ptr</td><td>Pointer to the <a class="el" href="../../d2/d55/classCIotDataDevice.html" title="Class to provide the IOT_DATA_DEVICE_ITEM instance from the CDS data for one Device. ">CIotDataDevice</a> instance for this device. </td></tr>
    <tr><td class="paramname">command</td><td>A pointer to the command (refer to iot_device_command), which has already been determined to be for FirmwareUpdate. The command parameters will be parsed out on the first call to this. </td></tr>
    <tr><td class="paramname">commandResponse</td><td>A pointer to the response (freed in the cloud), where we will put the results (pass or fail). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if OK to continue for more devices, else False if a severe error or completeness requires us to stop processing any additional devices. </dd></dl>

<p>Definition at line <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html#l00755">755</a> of file <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html">iot_device_command.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/ddf/classIotDeviceCommand_a4d05f8f3df173bca5a15caf43979a192_cgraph.png" border="0" usemap="#d3/ddf/classIotDeviceCommand_a4d05f8f3df173bca5a15caf43979a192_cgraph" alt=""/></div>
<map name="d3/ddf/classIotDeviceCommand_a4d05f8f3df173bca5a15caf43979a192_cgraph" id="d3/ddf/classIotDeviceCommand_a4d05f8f3df173bca5a15caf43979a192_cgraph">
<area shape="rect" id="node2" href="../../d3/ddf/classIotDeviceCommand.html#a17504c7be84eca59d324ee1d615e33fb" title="Utility function to unpack the command params and put them into our _cmd_params map. " alt="" coords="257,5,463,46"/><area shape="rect" id="node3" href="../../d3/ddf/classIotDeviceCommand.html#ad82a3fb33c2c66dde4230ee9b5ec4c1e" title="Set the message in commandResponse after checking the memory allocated. " alt="" coords="271,70,449,111"/><area shape="rect" id="node4" href="../../d3/ddf/classIotDeviceCommand.html#ae8c7cfeb3d43a8e68265da1193fb1e45" title="Gets the current command&#39;s UUID text. " alt="" coords="270,135,450,177"/><area shape="rect" id="node5" href="../../d3/ddf/classIotDeviceCommand.html#a7de4e99b99527f750888dc26c82244e5" title="Getter function to get the named parameter from the current _cmd_params or else (use_retained = true)..." alt="" coords="270,201,450,242"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/ddf/classIotDeviceCommand_a4d05f8f3df173bca5a15caf43979a192_icgraph.png" border="0" usemap="#d3/ddf/classIotDeviceCommand_a4d05f8f3df173bca5a15caf43979a192_icgraph" alt=""/></div>
<map name="d3/ddf/classIotDeviceCommand_a4d05f8f3df173bca5a15caf43979a192_icgraph" id="d3/ddf/classIotDeviceCommand_a4d05f8f3df173bca5a15caf43979a192_icgraph">
<area shape="rect" id="node2" href="../../d3/ddf/classIotDeviceCommand.html#a988b62c05b69189815f1d27689b6103b" title="Callback function to receive Cloud&#45;to&#45;Device device commands. " alt="" coords="257,5,482,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7eb717298bf9f0b44341d020da79a795"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool IotDeviceCommand::handle_image_transfer </td>
          <td>(</td>
          <td class="paramtype">const IOT_DEVICE_COMMAND *&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IOT_DEVICE_COMMAND_RESPONSE *&#160;</td>
          <td class="paramname"><em>commandResponse</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles one chunk of the ImageTransfer command. </p>
<p>Will decode the base64 and add the raw bytes to our recv_buffer[] (on success). For all but the final chunk, will put the client state into a Receiving Image mode where it won't attempt to send routine messages. On receipt of the final chunk, will kick off the actual firmware image update.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">command</td><td>A pointer to the command (refer to iot_device_command), which has already been determined to be for ImageTransfer. </td></tr>
    <tr><td class="paramname">commandResponse</td><td>A pointer to the response (freed in the cloud), where we will put the results for this chunk (pass or fail). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success decoding and saving the chunk, else False. In either case, the response will contain appropriate data. </dd></dl>

<p>Definition at line <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html#l01048">1048</a> of file <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html">iot_device_command.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/ddf/classIotDeviceCommand_a7eb717298bf9f0b44341d020da79a795_cgraph.png" border="0" usemap="#d3/ddf/classIotDeviceCommand_a7eb717298bf9f0b44341d020da79a795_cgraph" alt=""/></div>
<map name="d3/ddf/classIotDeviceCommand_a7eb717298bf9f0b44341d020da79a795_cgraph" id="d3/ddf/classIotDeviceCommand_a7eb717298bf9f0b44341d020da79a795_cgraph">
<area shape="rect" id="node2" href="../../d3/ddf/classIotDeviceCommand.html#ae8c7cfeb3d43a8e68265da1193fb1e45" title="Gets the current command&#39;s UUID text. " alt="" coords="787,131,967,172"/><area shape="rect" id="node3" href="../../d3/ddf/classIotDeviceCommand.html#ad82a3fb33c2c66dde4230ee9b5ec4c1e" title="Set the message in commandResponse after checking the memory allocated. " alt="" coords="271,36,449,77"/><area shape="rect" id="node4" href="../../d3/ddf/classIotDeviceCommand.html#a17504c7be84eca59d324ee1d615e33fb" title="Utility function to unpack the command params and put them into our _cmd_params map. " alt="" coords="257,101,463,143"/><area shape="rect" id="node5" href="../../d3/ddf/classIotDeviceCommand.html#a99e493bf3aea14075c8c7493259d62fd" title="Complete the current Firmware Update process, logging a message, and resetting all of the parameters..." alt="" coords="513,196,733,237"/><area shape="rect" id="node8" href="../../d3/ddf/classIotDeviceCommand.html#a6486755693075d05279e4acd9132378a" title="Handler for changes in the ImageUpdate/xxxx OOB for an active FirmwareUpdate process. " alt="" coords="259,167,461,208"/><area shape="rect" id="node6" href="../../d3/ddf/classIotDeviceCommand.html#a7de4e99b99527f750888dc26c82244e5" title="Getter function to get the named parameter from the current _cmd_params or else (use_retained = true)..." alt="" coords="787,196,967,237"/><area shape="rect" id="node7" href="../../d3/ddf/classIotDeviceCommand.html#a2f0585078794cd2bb731b59c4f9db28c" title="Called when we have completed the command (unrecoverable failure or all devices done) to clear all of..." alt="" coords="782,261,973,303"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/ddf/classIotDeviceCommand_a7eb717298bf9f0b44341d020da79a795_icgraph.png" border="0" usemap="#d3/ddf/classIotDeviceCommand_a7eb717298bf9f0b44341d020da79a795_icgraph" alt=""/></div>
<map name="d3/ddf/classIotDeviceCommand_a7eb717298bf9f0b44341d020da79a795_icgraph" id="d3/ddf/classIotDeviceCommand_a7eb717298bf9f0b44341d020da79a795_icgraph">
<area shape="rect" id="node2" href="../../d3/ddf/classIotDeviceCommand.html#a988b62c05b69189815f1d27689b6103b" title="Callback function to receive Cloud&#45;to&#45;Device device commands. " alt="" coords="257,5,482,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="afa7fc44db36e40a5f4ddb60032f455fc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const std::unordered_map&lt; std::string, px::CValue &gt; &amp; IotDeviceCommand::get_cmd_params </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Getter for convenience in unit testing; gets the params map. </p>
<dl class="section return"><dt>Returns</dt><dd>A read-only reference to the map of "params". </dd></dl>

<p>Definition at line <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html#l00375">375</a> of file <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/ddf/classIotDeviceCommand_afa7fc44db36e40a5f4ddb60032f455fc_icgraph.png" border="0" usemap="#d3/ddf/classIotDeviceCommand_afa7fc44db36e40a5f4ddb60032f455fc_icgraph" alt=""/></div>
<map name="d3/ddf/classIotDeviceCommand_afa7fc44db36e40a5f4ddb60032f455fc_icgraph" id="d3/ddf/classIotDeviceCommand_afa7fc44db36e40a5f4ddb60032f455fc_icgraph">
<area shape="rect" id="node2" href="../../d2/d55/classCIotDataDevice.html#acccc33e01c0f9d96183e9f7bc9c54e6f" title="Handle a C2D Device Command for the GetChannelValues method. " alt="" coords="235,5,466,46"/><area shape="rect" id="node3" href="../../d2/d55/classCIotDataDevice.html#ac03a035f18b36de2b3ccb0571ea73bb5" title="Handle a C2D Device Command for the SetChannelValues method. " alt="" coords="236,70,465,111"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aaa17f8440caac04da991a0b9c26fa0d3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool IotDeviceCommand::fill_device_to_cloud_command </td>
          <td>(</td>
          <td class="paramtype">struct iot_command *&#160;</td>
          <td class="paramname"><em>d2c_command</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fill out the D2C structure for a DeviceCommand message. </p>
<p>We currently support just TRANSFER_IMAGE and DEVICE_COMMAND_STATUS messages. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">d2c_command</td><td>The message structure, where, on input, commandType indicates which type of command this is. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if successfully built, else False. </dd></dl>

<p>Definition at line <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html#l01019">1019</a> of file <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html">iot_device_command.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/ddf/classIotDeviceCommand_aaa17f8440caac04da991a0b9c26fa0d3_cgraph.png" border="0" usemap="#d3/ddf/classIotDeviceCommand_aaa17f8440caac04da991a0b9c26fa0d3_cgraph" alt=""/></div>
<map name="d3/ddf/classIotDeviceCommand_aaa17f8440caac04da991a0b9c26fa0d3_cgraph" id="d3/ddf/classIotDeviceCommand_aaa17f8440caac04da991a0b9c26fa0d3_cgraph">
<area shape="rect" id="node2" href="../../d3/ddf/classIotDeviceCommand.html#ae8c7cfeb3d43a8e68265da1193fb1e45" title="Gets the current command&#39;s UUID text. " alt="" coords="262,5,442,46"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/ddf/classIotDeviceCommand_aaa17f8440caac04da991a0b9c26fa0d3_icgraph.png" border="0" usemap="#d3/ddf/classIotDeviceCommand_aaa17f8440caac04da991a0b9c26fa0d3_icgraph" alt=""/></div>
<map name="d3/ddf/classIotDeviceCommand_aaa17f8440caac04da991a0b9c26fa0d3_icgraph" id="d3/ddf/classIotDeviceCommand_aaa17f8440caac04da991a0b9c26fa0d3_icgraph">
<area shape="rect" id="node2" href="../../d3/ddf/classIotDeviceCommand.html#aecaf71e4f0806f83cf9d6fac2402f681" title="Build and send a D2C DeviceCommand message. " alt="" coords="262,5,469,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a99e493bf3aea14075c8c7493259d62fd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IotDeviceCommand::complete_firmware_update </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>cee_status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>reason</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Complete the current Firmware Update process, logging a message, and resetting all of the parameters. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cee_status</td><td>An enum from cee_statuses (eg, CEE_STS_success) to log as the final status of this update. </td></tr>
    <tr><td class="paramname">reason</td><td>The reason for the result. Can be empty or null for success. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html#l01232">1232</a> of file <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html">iot_device_command.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/ddf/classIotDeviceCommand_a99e493bf3aea14075c8c7493259d62fd_cgraph.png" border="0" usemap="#d3/ddf/classIotDeviceCommand_a99e493bf3aea14075c8c7493259d62fd_cgraph" alt=""/></div>
<map name="d3/ddf/classIotDeviceCommand_a99e493bf3aea14075c8c7493259d62fd_cgraph" id="d3/ddf/classIotDeviceCommand_a99e493bf3aea14075c8c7493259d62fd_cgraph">
<area shape="rect" id="node2" href="../../d3/ddf/classIotDeviceCommand.html#a7de4e99b99527f750888dc26c82244e5" title="Getter function to get the named parameter from the current _cmd_params or else (use_retained = true)..." alt="" coords="281,5,461,46"/><area shape="rect" id="node3" href="../../d3/ddf/classIotDeviceCommand.html#ae8c7cfeb3d43a8e68265da1193fb1e45" title="Gets the current command&#39;s UUID text. " alt="" coords="281,70,461,111"/><area shape="rect" id="node4" href="../../d3/ddf/classIotDeviceCommand.html#a2f0585078794cd2bb731b59c4f9db28c" title="Called when we have completed the command (unrecoverable failure or all devices done) to clear all of..." alt="" coords="275,135,466,177"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/ddf/classIotDeviceCommand_a99e493bf3aea14075c8c7493259d62fd_icgraph.png" border="0" usemap="#d3/ddf/classIotDeviceCommand_a99e493bf3aea14075c8c7493259d62fd_icgraph" alt=""/></div>
<map name="d3/ddf/classIotDeviceCommand_a99e493bf3aea14075c8c7493259d62fd_icgraph" id="d3/ddf/classIotDeviceCommand_a99e493bf3aea14075c8c7493259d62fd_icgraph">
<area shape="rect" id="node2" href="../../d3/ddf/classIotDeviceCommand.html#a7eb717298bf9f0b44341d020da79a795" title="Handles one chunk of the ImageTransfer command. " alt="" coords="525,5,728,46"/><area shape="rect" id="node4" href="../../d3/ddf/classIotDeviceCommand.html#a6486755693075d05279e4acd9132378a" title="Handler for changes in the ImageUpdate/xxxx OOB for an active FirmwareUpdate process. " alt="" coords="275,34,477,75"/><area shape="rect" id="node3" href="../../d3/ddf/classIotDeviceCommand.html#a988b62c05b69189815f1d27689b6103b" title="Callback function to receive Cloud&#45;to&#45;Device device commands. " alt="" coords="777,5,1002,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2f0585078794cd2bb731b59c4f9db28c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IotDeviceCommand::clear_cmd_params </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called when we have completed the command (unrecoverable failure or all devices done) to clear all of the class members for the current command. </p>

<p>Definition at line <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html#l01382">1382</a> of file <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html">iot_device_command.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/ddf/classIotDeviceCommand_a2f0585078794cd2bb731b59c4f9db28c_icgraph.png" border="0" usemap="#d3/ddf/classIotDeviceCommand_a2f0585078794cd2bb731b59c4f9db28c_icgraph" alt=""/></div>
<map name="d3/ddf/classIotDeviceCommand_a2f0585078794cd2bb731b59c4f9db28c_icgraph" id="d3/ddf/classIotDeviceCommand_a2f0585078794cd2bb731b59c4f9db28c_icgraph">
<area shape="rect" id="node2" href="../../d3/ddf/classIotDeviceCommand.html#a99e493bf3aea14075c8c7493259d62fd" title="Complete the current Firmware Update process, logging a message, and resetting all of the parameters..." alt="" coords="246,5,466,46"/><area shape="rect" id="node3" href="../../d3/ddf/classIotDeviceCommand.html#a7eb717298bf9f0b44341d020da79a795" title="Handles one chunk of the ImageTransfer command. " alt="" coords="765,5,968,46"/><area shape="rect" id="node5" href="../../d3/ddf/classIotDeviceCommand.html#a6486755693075d05279e4acd9132378a" title="Handler for changes in the ImageUpdate/xxxx OOB for an active FirmwareUpdate process. " alt="" coords="515,34,717,75"/><area shape="rect" id="node4" href="../../d3/ddf/classIotDeviceCommand.html#a988b62c05b69189815f1d27689b6103b" title="Callback function to receive Cloud&#45;to&#45;Device device commands. " alt="" coords="1017,5,1242,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7de4e99b99527f750888dc26c82244e5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">px::string IotDeviceCommand::get_cmd_params_str </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>param_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>use_retained</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Getter function to get the named parameter from the current _cmd_params or else (use_retained = true) from the retained FirmwareUpdate parameters. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">param_name</td><td>The name of the parameter to be fetched from the map. </td></tr>
    <tr><td class="paramname">use_retained</td><td>If true, get from the retained FirmwareUpdate command parameters, else get the current command's parameters map. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>String for the text if the named parameter, if found; else, empty string. </dd></dl>

<p>Definition at line <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html#l00442">442</a> of file <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html">iot_device_command.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/ddf/classIotDeviceCommand_a7de4e99b99527f750888dc26c82244e5_icgraph.png" border="0" usemap="#d3/ddf/classIotDeviceCommand_a7de4e99b99527f750888dc26c82244e5_icgraph" alt=""/></div>
<map name="d3/ddf/classIotDeviceCommand_a7de4e99b99527f750888dc26c82244e5_icgraph" id="d3/ddf/classIotDeviceCommand_a7de4e99b99527f750888dc26c82244e5_icgraph">
<area shape="rect" id="node2" href="../../d3/ddf/classIotDeviceCommand.html#a988b62c05b69189815f1d27689b6103b" title="Callback function to receive Cloud&#45;to&#45;Device device commands. " alt="" coords="1006,25,1231,66"/><area shape="rect" id="node3" href="../../d3/ddf/classIotDeviceCommand.html#a4d05f8f3df173bca5a15caf43979a192" title="Method to handle the FirmwareUpdate request for the indicated Device. " alt="" coords="504,25,707,66"/><area shape="rect" id="node4" href="../../d3/ddf/classIotDeviceCommand.html#a99e493bf3aea14075c8c7493259d62fd" title="Complete the current Firmware Update process, logging a message, and resetting all of the parameters..." alt="" coords="235,83,455,125"/><area shape="rect" id="node5" href="../../d3/ddf/classIotDeviceCommand.html#a7eb717298bf9f0b44341d020da79a795" title="Handles one chunk of the ImageTransfer command. " alt="" coords="755,83,957,125"/><area shape="rect" id="node6" href="../../d3/ddf/classIotDeviceCommand.html#a6486755693075d05279e4acd9132378a" title="Handler for changes in the ImageUpdate/xxxx OOB for an active FirmwareUpdate process. " alt="" coords="504,142,707,183"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ae8c7cfeb3d43a8e68265da1193fb1e45"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * IotDeviceCommand::get_cmd_uuid </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the current command's UUID text. </p>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the character string of the command UUID (8-4-4-4-12 format). </dd></dl>

<p>Definition at line <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html#l00383">383</a> of file <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/ddf/classIotDeviceCommand_ae8c7cfeb3d43a8e68265da1193fb1e45_icgraph.png" border="0" usemap="#d3/ddf/classIotDeviceCommand_ae8c7cfeb3d43a8e68265da1193fb1e45_icgraph" alt=""/></div>
<map name="d3/ddf/classIotDeviceCommand_ae8c7cfeb3d43a8e68265da1193fb1e45_icgraph" id="d3/ddf/classIotDeviceCommand_ae8c7cfeb3d43a8e68265da1193fb1e45_icgraph">
<area shape="rect" id="node2" href="../../d3/ddf/classIotDeviceCommand.html#a4d05f8f3df173bca5a15caf43979a192" title="Method to handle the FirmwareUpdate request for the indicated Device. " alt="" coords="760,20,963,62"/><area shape="rect" id="node4" href="../../d3/ddf/classIotDeviceCommand.html#aaa17f8440caac04da991a0b9c26fa0d3" title="Fill out the D2C structure for a DeviceCommand message. " alt="" coords="242,52,449,94"/><area shape="rect" id="node6" href="../../d3/ddf/classIotDeviceCommand.html#a7eb717298bf9f0b44341d020da79a795" title="Handles one chunk of the ImageTransfer command. " alt="" coords="760,136,963,178"/><area shape="rect" id="node7" href="../../d3/ddf/classIotDeviceCommand.html#a99e493bf3aea14075c8c7493259d62fd" title="Complete the current Firmware Update process, logging a message, and resetting all of the parameters..." alt="" coords="235,170,455,211"/><area shape="rect" id="node8" href="../../d3/ddf/classIotDeviceCommand.html#a6486755693075d05279e4acd9132378a" title="Handler for changes in the ImageUpdate/xxxx OOB for an active FirmwareUpdate process. " alt="" coords="507,220,709,262"/><area shape="rect" id="node3" href="../../d3/ddf/classIotDeviceCommand.html#a988b62c05b69189815f1d27689b6103b" title="Callback function to receive Cloud&#45;to&#45;Device device commands. " alt="" coords="1011,79,1237,120"/><area shape="rect" id="node5" href="../../d3/ddf/classIotDeviceCommand.html#aecaf71e4f0806f83cf9d6fac2402f681" title="Build and send a D2C DeviceCommand message. " alt="" coords="505,52,711,94"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a7dca1fb06906d73d56212254d1165922"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">px::id_t IotDeviceCommand::get_cmd_device </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>advance_to_next</em> = <code>false</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the Device ID of the current device that we are operating on (eg, updating). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">advance_to_next</td><td>If True, advance the _cmd_device_index to the next device in _cmd_devices[] first. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>That Device ID that is current, or 0 if there are no (more) devices (ie, "done"). </dd></dl>

<p>Definition at line <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html#l00497">497</a> of file <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html">iot_device_command.cpp</a>.</p>

</div>
</div>
<a class="anchor" id="a6486755693075d05279e4acd9132378a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IotDeviceCommand::handle_img_up_status </td>
          <td>(</td>
          <td class="paramtype">const px::proto::toolkitStruct &amp;&#160;</td>
          <td class="paramname"><em>oob_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handler for changes in the ImageUpdate/xxxx OOB for an active FirmwareUpdate process. </p>
<p>Builds and sends a D2C DEVICE_COMMAND_STATUS message. Called by <a class="el" href="../../d5/df5/classCIotAgentCdsHandler.html#a6a6970250d348f1fa4aba793d082e921" title="The callback function to handle a solicited or unsolicited response from the CDS. ...">CIotAgentCdsHandler::handle_response()</a> once it determines that the CDS has sent us an update for this OOB. Prototype conforms to typedef for <a class="el" href="../../d5/df5/classCIotAgentCdsHandler.html#a6a9fda717db056469ad4399a64ac97b0" title="Define the function object type to handle OOB updates from the CDS. ">CIotAgentCdsHandler::OOB_Callback_t</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">oob_data</td><td>The contents of the all the OOB data received during callback </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html#l01418">1418</a> of file <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html">iot_device_command.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/ddf/classIotDeviceCommand_a6486755693075d05279e4acd9132378a_cgraph.png" border="0" usemap="#d3/ddf/classIotDeviceCommand_a6486755693075d05279e4acd9132378a_cgraph" alt=""/></div>
<map name="d3/ddf/classIotDeviceCommand_a6486755693075d05279e4acd9132378a_cgraph" id="d3/ddf/classIotDeviceCommand_a6486755693075d05279e4acd9132378a_cgraph">
<area shape="rect" id="node2" href="../../d3/ddf/classIotDeviceCommand.html#ae8c7cfeb3d43a8e68265da1193fb1e45" title="Gets the current command&#39;s UUID text. " alt="" coords="531,5,711,46"/><area shape="rect" id="node3" href="../../d3/ddf/classIotDeviceCommand.html#a99e493bf3aea14075c8c7493259d62fd" title="Complete the current Firmware Update process, logging a message, and resetting all of the parameters..." alt="" coords="257,69,477,110"/><area shape="rect" id="node4" href="../../d3/ddf/classIotDeviceCommand.html#a7de4e99b99527f750888dc26c82244e5" title="Getter function to get the named parameter from the current _cmd_params or else (use_retained = true)..." alt="" coords="531,70,711,111"/><area shape="rect" id="node5" href="../../d3/ddf/classIotDeviceCommand.html#a2f0585078794cd2bb731b59c4f9db28c" title="Called when we have completed the command (unrecoverable failure or all devices done) to clear all of..." alt="" coords="526,135,717,177"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/ddf/classIotDeviceCommand_a6486755693075d05279e4acd9132378a_icgraph.png" border="0" usemap="#d3/ddf/classIotDeviceCommand_a6486755693075d05279e4acd9132378a_icgraph" alt=""/></div>
<map name="d3/ddf/classIotDeviceCommand_a6486755693075d05279e4acd9132378a_icgraph" id="d3/ddf/classIotDeviceCommand_a6486755693075d05279e4acd9132378a_icgraph">
<area shape="rect" id="node2" href="../../d3/ddf/classIotDeviceCommand.html#a7eb717298bf9f0b44341d020da79a795" title="Handles one chunk of the ImageTransfer command. " alt="" coords="256,5,459,46"/><area shape="rect" id="node3" href="../../d3/ddf/classIotDeviceCommand.html#a988b62c05b69189815f1d27689b6103b" title="Callback function to receive Cloud&#45;to&#45;Device device commands. " alt="" coords="507,5,733,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1915d760f715dfa12412dc266ac8849c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool IotDeviceCommand::handle_builtin_cmds </td>
          <td>(</td>
          <td class="paramtype">const IOT_DEVICE_COMMAND *&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IOT_DEVICE_COMMAND_RESPONSE *&#160;</td>
          <td class="paramname"><em>commandResponse</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const px::string &amp;&#160;</td>
          <td class="paramname"><em>cmdMethod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">px::string &amp;&#160;</td>
          <td class="paramname"><em>rcvd_uuid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle a C2D built in Device Command for the executing commands supported by products. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">command</td><td>The Device Command structure, most of which has already been processed. The important remaining portion is the commandParams, where the payload is: method: It is the product specific command name params: These are the arguments required. For example, 'TagName', 'Field', 'Value' are params required for SetField and GetField 'command' and 'args' are required for CommandScript 'args' are required for CdsCmd. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">cmdMethod</td><td>The method of the command received from user </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">commandResponse</td><td>We set the status and msg for the response to this command here. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">rcvd_uuid</td><td>UUID received as a part of the request payload from user. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return false if no further handling of this command by other devices should happen (eg, if there is some serious error in the command), else true if other devices could process it. </dd></dl>

<p>Definition at line <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html#l01583">1583</a> of file <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html">iot_device_command.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/ddf/classIotDeviceCommand_a1915d760f715dfa12412dc266ac8849c_cgraph.png" border="0" usemap="#d3/ddf/classIotDeviceCommand_a1915d760f715dfa12412dc266ac8849c_cgraph" alt=""/></div>
<map name="d3/ddf/classIotDeviceCommand_a1915d760f715dfa12412dc266ac8849c_cgraph" id="d3/ddf/classIotDeviceCommand_a1915d760f715dfa12412dc266ac8849c_cgraph">
<area shape="rect" id="node2" href="../../d3/ddf/classIotDeviceCommand.html#a95488f908378cf0380cda2ec327350a2" title="Constructor. " alt="" coords="256,5,477,46"/><area shape="rect" id="node3" href="../../d3/ddf/classIotDeviceCommand.html#ad82a3fb33c2c66dde4230ee9b5ec4c1e" title="Set the message in commandResponse after checking the memory allocated. " alt="" coords="525,122,704,163"/><area shape="rect" id="node4" href="../../d3/ddf/classIotDeviceCommand.html#a6cd277db795a6a1ed8538d14c06024b2" title="Handle a C2D built in Device Command for the get and set field. " alt="" coords="265,122,468,163"/><area shape="rect" id="node5" href="../../d3/ddf/classIotDeviceCommand.html#a46ba218b7873d0cf662247b205054c81" title="Handle a C2D built in Device Command for commands which execute through shell_cmd. " alt="" coords="265,187,468,229"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/ddf/classIotDeviceCommand_a1915d760f715dfa12412dc266ac8849c_icgraph.png" border="0" usemap="#d3/ddf/classIotDeviceCommand_a1915d760f715dfa12412dc266ac8849c_icgraph" alt=""/></div>
<map name="d3/ddf/classIotDeviceCommand_a1915d760f715dfa12412dc266ac8849c_icgraph" id="d3/ddf/classIotDeviceCommand_a1915d760f715dfa12412dc266ac8849c_icgraph">
<area shape="rect" id="node2" href="../../d3/ddf/classIotDeviceCommand.html#a988b62c05b69189815f1d27689b6103b" title="Callback function to receive Cloud&#45;to&#45;Device device commands. " alt="" coords="257,5,482,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ad82a3fb33c2c66dde4230ee9b5ec4c1e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void IotDeviceCommand::set_command_resp_msg </td>
          <td>(</td>
          <td class="paramtype">IOT_DEVICE_COMMAND_RESPONSE *&#160;</td>
          <td class="paramname"><em>commandResponse</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>resp_msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the message in commandResponse after checking the memory allocated. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">commandResponse</td><td>The command response structure, which has the msg field we will copy to </td></tr>
    <tr><td class="paramname">resp_msg</td><td>The text of the message to set in the response </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html#l00061">61</a> of file <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html">iot_device_command.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/ddf/classIotDeviceCommand_ad82a3fb33c2c66dde4230ee9b5ec4c1e_icgraph.png" border="0" usemap="#d3/ddf/classIotDeviceCommand_ad82a3fb33c2c66dde4230ee9b5ec4c1e_icgraph" alt=""/></div>
<map name="d3/ddf/classIotDeviceCommand_ad82a3fb33c2c66dde4230ee9b5ec4c1e_icgraph" id="d3/ddf/classIotDeviceCommand_ad82a3fb33c2c66dde4230ee9b5ec4c1e_icgraph">
<area shape="rect" id="node2" href="../../d2/d55/classCIotDataDevice.html#acccc33e01c0f9d96183e9f7bc9c54e6f" title="Handle a C2D Device Command for the GetChannelValues method. " alt="" coords="233,5,463,46"/><area shape="rect" id="node3" href="../../d2/d55/classCIotDataDevice.html#ac03a035f18b36de2b3ccb0571ea73bb5" title="Handle a C2D Device Command for the SetChannelValues method. " alt="" coords="233,70,463,111"/><area shape="rect" id="node4" href="../../d3/ddf/classIotDeviceCommand.html#a988b62c05b69189815f1d27689b6103b" title="Callback function to receive Cloud&#45;to&#45;Device device commands. " alt="" coords="763,253,989,294"/><area shape="rect" id="node5" href="../../d3/ddf/classIotDeviceCommand.html#a2c97fa49284587e1350d6d6c0bf25254" title="Method to handle the QueryImages request for the indicated Device. " alt="" coords="512,187,715,229"/><area shape="rect" id="node6" href="../../d3/ddf/classIotDeviceCommand.html#a4d05f8f3df173bca5a15caf43979a192" title="Method to handle the FirmwareUpdate request for the indicated Device. " alt="" coords="512,253,715,294"/><area shape="rect" id="node7" href="../../d3/ddf/classIotDeviceCommand.html#a7eb717298bf9f0b44341d020da79a795" title="Handles one chunk of the ImageTransfer command. " alt="" coords="512,318,715,359"/><area shape="rect" id="node8" href="../../d3/ddf/classIotDeviceCommand.html#a1915d760f715dfa12412dc266ac8849c" title="Handle a C2D built in Device Command for the executing commands supported by products. " alt="" coords="512,386,715,427"/><area shape="rect" id="node9" href="../../d3/ddf/classIotDeviceCommand.html#a6cd277db795a6a1ed8538d14c06024b2" title="Handle a C2D built in Device Command for the get and set field. " alt="" coords="247,390,449,431"/><area shape="rect" id="node10" href="../../d3/ddf/classIotDeviceCommand.html#a46ba218b7873d0cf662247b205054c81" title="Handle a C2D built in Device Command for commands which execute through shell_cmd. " alt="" coords="247,455,449,497"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6cd277db795a6a1ed8538d14c06024b2"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool IotDeviceCommand::handle_get_set_field </td>
          <td>(</td>
          <td class="paramtype">const IOT_DEVICE_COMMAND *&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::unordered_map&lt; std::string, px::CValue &gt;&#160;</td>
          <td class="paramname"><em>cmd_params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IOT_DEVICE_COMMAND_RESPONSE *&#160;</td>
          <td class="paramname"><em>commandResponse</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle a C2D built in Device Command for the get and set field. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">command</td><td>The Device Command structure, most of which has already been processed. The important remaining portion is the commandParams, where the payload is: method: It is the product specific command name params: These are the arguments required. For example, 'TagName', 'Field', 'Value' are params required for SetField and GetField </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">cmd_params</td><td>It is a map of received params and their values. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">commandResponse</td><td>We set the status and msg for the response to this command here. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return false in case of any failure; true if success. </dd></dl>

<p>Definition at line <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html#l01666">1666</a> of file <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html">iot_device_command.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/ddf/classIotDeviceCommand_a6cd277db795a6a1ed8538d14c06024b2_cgraph.png" border="0" usemap="#d3/ddf/classIotDeviceCommand_a6cd277db795a6a1ed8538d14c06024b2_cgraph" alt=""/></div>
<map name="d3/ddf/classIotDeviceCommand_a6cd277db795a6a1ed8538d14c06024b2_cgraph" id="d3/ddf/classIotDeviceCommand_a6cd277db795a6a1ed8538d14c06024b2_cgraph">
<area shape="rect" id="node2" href="../../d3/ddf/classIotDeviceCommand.html#ad82a3fb33c2c66dde4230ee9b5ec4c1e" title="Set the message in commandResponse after checking the memory allocated. " alt="" coords="256,5,435,46"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/ddf/classIotDeviceCommand_a6cd277db795a6a1ed8538d14c06024b2_icgraph.png" border="0" usemap="#d3/ddf/classIotDeviceCommand_a6cd277db795a6a1ed8538d14c06024b2_icgraph" alt=""/></div>
<map name="d3/ddf/classIotDeviceCommand_a6cd277db795a6a1ed8538d14c06024b2_icgraph" id="d3/ddf/classIotDeviceCommand_a6cd277db795a6a1ed8538d14c06024b2_icgraph">
<area shape="rect" id="node2" href="../../d3/ddf/classIotDeviceCommand.html#a1915d760f715dfa12412dc266ac8849c" title="Handle a C2D built in Device Command for the executing commands supported by products. " alt="" coords="256,5,459,46"/><area shape="rect" id="node3" href="../../d3/ddf/classIotDeviceCommand.html#a988b62c05b69189815f1d27689b6103b" title="Callback function to receive Cloud&#45;to&#45;Device device commands. " alt="" coords="507,5,733,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a46ba218b7873d0cf662247b205054c81"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool IotDeviceCommand::handle_generic_cmds </td>
          <td>(</td>
          <td class="paramtype">const IOT_DEVICE_COMMAND *&#160;</td>
          <td class="paramname"><em>command</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::unordered_map&lt; std::string, px::CValue &gt;&#160;</td>
          <td class="paramname"><em>cmd_params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string &amp;&#160;</td>
          <td class="paramname"><em>cmd_line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IOT_DEVICE_COMMAND_RESPONSE *&#160;</td>
          <td class="paramname"><em>commandResponse</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle a C2D built in Device Command for commands which execute through shell_cmd. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">command</td><td>The Device Command structure, most of which has already been processed. The important remaining portion is the commandParams, where the payload is: method: It is the product specific command name params: These are the arguments required. For example, 'command' and 'args' are params required for generic shell commands to execute. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">cmd_params</td><td>It is a map of received params and their values. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">cmd_line</td><td>It is the command line string which will be executed via shell_cmd. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">commandResponse</td><td>We set the status and msg for the response to this command here. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return false in case of any failure; true if success. </dd></dl>

<p>Definition at line <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html#l01807">1807</a> of file <a class="el" href="../../de/d31/iot__device__command_8cpp_source.html">iot_device_command.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/ddf/classIotDeviceCommand_a46ba218b7873d0cf662247b205054c81_cgraph.png" border="0" usemap="#d3/ddf/classIotDeviceCommand_a46ba218b7873d0cf662247b205054c81_cgraph" alt=""/></div>
<map name="d3/ddf/classIotDeviceCommand_a46ba218b7873d0cf662247b205054c81_cgraph" id="d3/ddf/classIotDeviceCommand_a46ba218b7873d0cf662247b205054c81_cgraph">
<area shape="rect" id="node2" href="../../d3/ddf/classIotDeviceCommand.html#ad82a3fb33c2c66dde4230ee9b5ec4c1e" title="Set the message in commandResponse after checking the memory allocated. " alt="" coords="256,5,435,46"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/ddf/classIotDeviceCommand_a46ba218b7873d0cf662247b205054c81_icgraph.png" border="0" usemap="#d3/ddf/classIotDeviceCommand_a46ba218b7873d0cf662247b205054c81_icgraph" alt=""/></div>
<map name="d3/ddf/classIotDeviceCommand_a46ba218b7873d0cf662247b205054c81_icgraph" id="d3/ddf/classIotDeviceCommand_a46ba218b7873d0cf662247b205054c81_icgraph">
<area shape="rect" id="node2" href="../../d3/ddf/classIotDeviceCommand.html#a1915d760f715dfa12412dc266ac8849c" title="Handle a C2D built in Device Command for the executing commands supported by products. " alt="" coords="256,5,459,46"/><area shape="rect" id="node3" href="../../d3/ddf/classIotDeviceCommand.html#a988b62c05b69189815f1d27689b6103b" title="Callback function to receive Cloud&#45;to&#45;Device device commands. " alt="" coords="507,5,733,46"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="aff396e809b4be704902e39ca8c8ebc16"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int IotDeviceCommand::_max_chunk_size = 5500</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Specify the "chunk size" that we support for IoT data packets. </p>
<p>We have no real limit, but Azure limits the messages to 6k bytes, which after headers and base64 encoding of binary data, works out to about this 5500 byte size for the binary payload. Also define as a text equivalent. </p>

<p>Definition at line <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html#l00224">224</a> of file <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a6f7fc1960df7c44b65e3034457ce3c7c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const int IotDeviceCommand::_transfer_delay = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Specify the delay (in seconds) between chunk tranfers, eg for ImageTransfer messages. </p>
<p>We have no limitation, and big tarballs to be transferred, so set to 0. Also define as a text equivalent. </p>

<p>Definition at line <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html#l00232">232</a> of file <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a421e8fd8867719e337bfd22af573c1a6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string IotDeviceCommand::_image_filename</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Holds the full path and filename of a received Image file. </p>
<p>We write the _recv_buffer to this file at the end of the transfers. </p>

<p>Definition at line <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html#l00238">238</a> of file <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a8ddc745b3ba5492eb4a66f726b2a3c86"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;px::proto::ImageVersion&gt; IotDeviceCommand::_img_ver_pbuf</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Holds the information for the current version of the image during a FirmwareUpdate process. </p>
<p>Helpful for the image name and update script/program. </p>

<p>Definition at line <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html#l00243">243</a> of file <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="adae2bfce1f669c0eb96b9fe04473e5bf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* IotDeviceCommand::BUILT_IN_COMMAND_SET_FIELD = &quot;SetField&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html#l00246">246</a> of file <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a8cd168a757a0f0e4996d0c5c6a8353d6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* IotDeviceCommand::BUILT_IN_COMMAND_GET_FIELD = &quot;GetField&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html#l00247">247</a> of file <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a8d895f8ff2d4283f8171eca88cd0e81e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* IotDeviceCommand::BUILT_IN_COMMAND_SET_OOB = &quot;SetOob&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html#l00248">248</a> of file <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="addcdf40ce9f39d12b8f16fd38e402cc2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* IotDeviceCommand::BUILT_IN_COMMAND_GET_OOB = &quot;GetOob&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html#l00249">249</a> of file <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a92903874cc3cf3de7f2cc47a07887656"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* IotDeviceCommand::BUILT_IN_COMMAND_CDSCMD = &quot;CdsCmd&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html#l00250">250</a> of file <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a44794ff5cc5ab50e7d67f0b24ca00577"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* IotDeviceCommand::BUILT_IN_COMMAND_SCRIPT = &quot;CommandScript&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html#l00251">251</a> of file <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ac2c4703dc59fc47ad88cc9620325964c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* IotDeviceCommand::TAGNAME = &quot;TagName&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html#l00253">253</a> of file <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a82acc7ffe1fbd7c3390cfca65ada0ef3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* IotDeviceCommand::FIELD = &quot;Field&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html#l00254">254</a> of file <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ad6ed21c7f5fa496d6282c56a873f1d0d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* IotDeviceCommand::VALUE = &quot;Value&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html#l00255">255</a> of file <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="aa82690332f20b208f9a97b54f870b040"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* IotDeviceCommand::ARGS = &quot;args&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html#l00256">256</a> of file <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="aab5bb029c8b87ab049c9370b42e3444a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* IotDeviceCommand::COMMAND = &quot;command&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html#l00257">257</a> of file <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a700cf59aa68c5d9ba09c1e9977d2fa0a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const size_t IotDeviceCommand::REQD_PARAMS_SET_FIELD = 3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html#l00259">259</a> of file <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a607e1f39c74d9de965e5623e6c0a6660"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const size_t IotDeviceCommand::REQD_PARAMS_GET_FIELD = 2</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html#l00260">260</a> of file <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a169a3fcabc1bd67cd2645ac9f3e911e7"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;std::string, px::CValue&gt; IotDeviceCommand::_cmd_params</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A map of the "params" section of a DeviceCommand, with each field entered (and keyed by the field name) with its payload as a CValue. </p>

<p>Definition at line <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html#l00267">267</a> of file <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a642ac9241d2bdf8c29ccbea24695bda9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::unordered_map&lt;std::string, px::CValue&gt; IotDeviceCommand::_fw_up_cmd_params</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A copy of the map of the "params" section of the FirmwareUpdate DeviceCommand which started a FirmwareUpdate process. </p>
<p>Useful for the names and new version. This is just a retained copy of _cmd_params from that command. </p>

<p>Definition at line <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html#l00273">273</a> of file <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a4f2dbe5de16988f377f9a7416eb46791"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;px::string, std::shared_ptr&lt;px::proto::ImageVersion&gt; &gt; IotDeviceCommand::_images_map</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A map of the assembled set of images for all supporting devices, keyed by the tag (name) of the corresponding OOB. </p>
<p>The ImageVersion info from the indicated OOB contains the array of all device IDs which support this firmware image at this version. This map is used when building the response to a QueryImages or FirmwareUpdate request, and then discarded. </p>

<p>Definition at line <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html#l00282">282</a> of file <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="abdf0ad753e6c192d2154e7ff8a5a4015"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">px::string IotDeviceCommand::_cmd_uuid</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Holds the UUID of the current (active) FirmwareUpdate (or other C2D) command. </p>
<p>We will validate all ImageTransfer messages against this, to make sure we are receiving the correct image. Once set, this also indicates that we are in a FirmwareUpdate process, and additional attempts to do a FirmwareUpdate before this one completes will be rejected. </p>

<p>Definition at line <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html#l00290">290</a> of file <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="aac06d9f90d2213ae41df7b175b73ed85"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">px::string IotDeviceCommand::_cmd_username</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Holds the name of the user who issued the DeviceCommand, eg, FirmwareUpdate. </p>
<p>Used for making Audit Log entries with proper attribution. </p>

<p>Definition at line <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html#l00295">295</a> of file <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="ade33b8c80b2674c0598f70d901916f5b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;px::id_t&gt; IotDeviceCommand::_cmd_devices</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Holds the list of devices that are addressed by the current active C2D command, such as FirmwareUpdate. </p>

<p>Definition at line <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html#l00300">300</a> of file <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="af6e8b794eb9736ccd0e9484cdbc717f0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t IotDeviceCommand::_cmd_device_index</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Index into the _cmd_devices array for the current device to be processed. </p>
<p>Should be &gt; _cmd_devices.size() when there are no more devices. </p>

<p>Definition at line <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html#l00305">305</a> of file <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a6cd2c490d1056ed1eaa98eb439c60934"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t IotDeviceCommand::_expected_recv_size</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Holds the expected size of all the ImageTransfer packets, as told to us by the FirmwareUpdate command. </p>
<p>This is the binary size, after decoding the Base64 data. When _recv_buffer is allocated to hold the received image, this will hold the size of the buffer allocation, which will probably be larger than what we were told by the command, by a safety margin (nominally 1/16th extra). </p>

<p>Definition at line <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html#l00313">313</a> of file <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a5d6391a8523babf7a1ae64151e0ac87f"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t IotDeviceCommand::_buffer_end_idx</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>An index into the receive buffer, indicating the position after the last used byte. </p>
<p>(Thus is also the count of received bytes.) Initialized to 0 at the start of ImageTransfers, will be increased by each one until we reach the end. </p>

<p>Definition at line <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html#l00320">320</a> of file <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a2f62de5e8202c94a7eb498360a6d1c3e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t* IotDeviceCommand::_recv_buffer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Pointer to a calloc'd buffer to hold the received ImageTransfer bytes, after decoding them from Base64. </p>
<p>Should be allocated at the start of FirmwareUpdate, and freed after writing them to a file. </p>

<p>Definition at line <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html#l00326">326</a> of file <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a7775ee17181334661b65515fc634401a"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="../../db/d77/classCIotAgentCore.html">CIotAgentCore</a>&gt; IotDeviceCommand::_iot_core</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Copy of the Core class, which gives us access to the OOB handler and CDS handler, as well as the DeviceClient which holds the map of Devices we support. </p>

<p>Definition at line <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html#l00333">333</a> of file <a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/src/product-ref1/px-toolkit/etn_source/iot_agent/include/<a class="el" href="../../df/d7a/iot__device__command_8hpp_source.html">iot_device_command.hpp</a></li>
<li>/src/product-ref1/px-toolkit/etn_source/iot_agent/source/<a class="el" href="../../de/d31/iot__device__command_8cpp_source.html">iot_device_command.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d3/ddf/classIotDeviceCommand.html">IotDeviceCommand</a></li>
    <li class="footer">Generated on Fri May 7 2021 20:26:04 for IoT Agent by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
