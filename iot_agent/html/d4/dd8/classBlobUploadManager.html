<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>IoT Agent: BlobUploadManager Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../Eaton_Red_Toolbox_Logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">IoT Agent
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Classes</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="../../classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="../../inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d4/dd8/classBlobUploadManager.html','../../');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../d1/d81/classBlobUploadManager-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">BlobUploadManager Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Class to manage Blob uploads, handling the requests and response through OOB/.  
 <a href="../../d4/dd8/classBlobUploadManager.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../d7/d64/blob__upload__manager_8hpp_source.html">blob_upload_manager.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for BlobUploadManager:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/de9/classBlobUploadManager__coll__graph.png" border="0" usemap="#BlobUploadManager_coll__map" alt="Collaboration graph"/></div>
<map name="BlobUploadManager_coll__map" id="BlobUploadManager_coll__map">
<area shape="rect" id="node3" title="STL class. " alt="" coords="41,5,175,83"/></map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:aa8974922762389dbd0e39352512c3cbb"><td class="memItemLeft" align="right" valign="top">typedef std::pair&lt; enum <br class="typebreak"/>
px::proto::IotBlobUploadErrorEnums, <br class="typebreak"/>
std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd8/classBlobUploadManager.html#aa8974922762389dbd0e39352512c3cbb">blob_upload_result_t</a></td></tr>
<tr class="memdesc:aa8974922762389dbd0e39352512c3cbb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type for blob upload thread results: results in enum and human-readable text string.  <a href="#aa8974922762389dbd0e39352512c3cbb">More...</a><br/></td></tr>
<tr class="separator:aa8974922762389dbd0e39352512c3cbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a253395e21785c30f3e73e6e5afd11b62"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd8/classBlobUploadManager.html#a253395e21785c30f3e73e6e5afd11b62">BlobUploadManager</a> (std::shared_ptr&lt; <a class="el" href="../../db/d77/classCIotAgentCore.html">CIotAgentCore</a> &gt; iot_core)</td></tr>
<tr class="memdesc:a253395e21785c30f3e73e6e5afd11b62"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#a253395e21785c30f3e73e6e5afd11b62">More...</a><br/></td></tr>
<tr class="separator:a253395e21785c30f3e73e6e5afd11b62"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a996dd332a1fa7cbe35667cd072dddf"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd8/classBlobUploadManager.html#a6a996dd332a1fa7cbe35667cd072dddf">~BlobUploadManager</a> ()</td></tr>
<tr class="memdesc:a6a996dd332a1fa7cbe35667cd072dddf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default Xtor.  <a href="#a6a996dd332a1fa7cbe35667cd072dddf">More...</a><br/></td></tr>
<tr class="separator:a6a996dd332a1fa7cbe35667cd072dddf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a611ea39e19532e6ed6cc855303f046ad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd8/classBlobUploadManager.html#a611ea39e19532e6ed6cc855303f046ad">handle_blob_upload_req</a> (const px::proto::toolkitStruct &amp;oob_data)</td></tr>
<tr class="memdesc:a611ea39e19532e6ed6cc855303f046ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle the blob upload request and launch that blob upload thread.  <a href="#a611ea39e19532e6ed6cc855303f046ad">More...</a><br/></td></tr>
<tr class="separator:a611ea39e19532e6ed6cc855303f046ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7e833a162791d802ca935108e8b6df9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd8/classBlobUploadManager.html#aa7e833a162791d802ca935108e8b6df9">init</a> ()</td></tr>
<tr class="memdesc:aa7e833a162791d802ca935108e8b6df9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the blob upload manager with the catchup of pending blob uploads if any due to interruption in the previous attempt.  <a href="#aa7e833a162791d802ca935108e8b6df9">More...</a><br/></td></tr>
<tr class="separator:aa7e833a162791d802ca935108e8b6df9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fb71393c8eb30b47686d3666ff89548"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd8/classBlobUploadManager.html#a2fb71393c8eb30b47686d3666ff89548">catchup_blobs</a> ()</td></tr>
<tr class="memdesc:a2fb71393c8eb30b47686d3666ff89548"><td class="mdescLeft">&#160;</td><td class="mdescRight">Carry out the catchup for blob uploads Go through the OOBs present on the device for blob uploads and add the pending ones to the blob upload list when IoT agent starts.  <a href="#a2fb71393c8eb30b47686d3666ff89548">More...</a><br/></td></tr>
<tr class="separator:a2fb71393c8eb30b47686d3666ff89548"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a725e245abeb217c46613575590c2e18a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd8/classBlobUploadManager.html#a725e245abeb217c46613575590c2e18a">execute_blob_upload</a> ()</td></tr>
<tr class="memdesc:a725e245abeb217c46613575590c2e18a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Execute the blob upload operation by launching a thread for all the pending blob uploads.  <a href="#a725e245abeb217c46613575590c2e18a">More...</a><br/></td></tr>
<tr class="separator:a725e245abeb217c46613575590c2e18a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6bde31c4e391be69e5ea63950f5f6089"><td class="memItemLeft" align="right" valign="top">enum <br class="typebreak"/>
px::proto::IotBlobUploadErrorEnums&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dbd/group__iot__threading.html#ga6bde31c4e391be69e5ea63950f5f6089">launch_blob_upload_thread</a> (const px::string &amp;upload_oob_tag, const px::proto::IotBlobUpload &amp;blob_upld_req)</td></tr>
<tr class="memdesc:ga6bde31c4e391be69e5ea63950f5f6089"><td class="mdescLeft">&#160;</td><td class="mdescRight">Launches the thread that does the blob upload operations.  <a href="../../d3/dbd/group__iot__threading.html#ga6bde31c4e391be69e5ea63950f5f6089">More...</a><br/></td></tr>
<tr class="separator:ga6bde31c4e391be69e5ea63950f5f6089"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1f2661900480aa5af5b6efae516d159"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd8/classBlobUploadManager.html#ab1f2661900480aa5af5b6efae516d159">check_is_done</a> ()</td></tr>
<tr class="memdesc:ab1f2661900480aa5af5b6efae516d159"><td class="mdescLeft">&#160;</td><td class="mdescRight">Utility to check to see if the blob upload task (thread) is done.  <a href="#ab1f2661900480aa5af5b6efae516d159">More...</a><br/></td></tr>
<tr class="separator:ab1f2661900480aa5af5b6efae516d159"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afaa509709143d8f6541b5299f25710ef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/dd8/classBlobUploadManager.html#aa8974922762389dbd0e39352512c3cbb">blob_upload_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd8/classBlobUploadManager.html#afaa509709143d8f6541b5299f25710ef">get_results</a> ()</td></tr>
<tr class="memdesc:afaa509709143d8f6541b5299f25710ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the results of the blob upload thread, once it is done executing.  <a href="#afaa509709143d8f6541b5299f25710ef">More...</a><br/></td></tr>
<tr class="separator:afaa509709143d8f6541b5299f25710ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9764e96da86d3edf8a1292a42ef88462"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd8/classBlobUploadManager.html#a9764e96da86d3edf8a1292a42ef88462">request_thread_stop</a> ()</td></tr>
<tr class="memdesc:a9764e96da86d3edf8a1292a42ef88462"><td class="mdescLeft">&#160;</td><td class="mdescRight">Utility that lets the calling application request the running blob upload thread to stop.  <a href="#a9764e96da86d3edf8a1292a42ef88462">More...</a><br/></td></tr>
<tr class="separator:a9764e96da86d3edf8a1292a42ef88462"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad4ca922ec163d493621767f1b75b61d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd8/classBlobUploadManager.html#aad4ca922ec163d493621767f1b75b61d">is_blob_upload_thread_launched</a> ()</td></tr>
<tr class="memdesc:aad4ca922ec163d493621767f1b75b61d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Getter for the blob_upload_thread_is_launched flag.  <a href="#aad4ca922ec163d493621767f1b75b61d">More...</a><br/></td></tr>
<tr class="separator:aad4ca922ec163d493621767f1b75b61d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:aef800d56f4fef09efe7f17fc5c29a44b"><td class="memItemLeft" align="right" valign="top">std::map&lt; px::string, <br class="typebreak"/>
px::proto::IotBlobUpload &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd8/classBlobUploadManager.html#aef800d56f4fef09efe7f17fc5c29a44b">_blob_upload_pending_list</a></td></tr>
<tr class="memdesc:aef800d56f4fef09efe7f17fc5c29a44b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Map to hold the OOBs which are yet to be processed for the blob upload operation Key in the map is the OOB tag Value is the OOB data corresponsing to the tag.  <a href="#aef800d56f4fef09efe7f17fc5c29a44b">More...</a><br/></td></tr>
<tr class="separator:aef800d56f4fef09efe7f17fc5c29a44b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a238050cdc4944018ce7b1b128ee5a12c"><td class="memItemLeft" align="right" valign="top">friend&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd8/classBlobUploadManager.html#a238050cdc4944018ce7b1b128ee5a12c">CMockIotAgentCore</a></td></tr>
<tr class="separator:a238050cdc4944018ce7b1b128ee5a12c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ab28da64518c66f2594e3c10ecd6fbceb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d4/dd8/classBlobUploadManager.html#aa8974922762389dbd0e39352512c3cbb">blob_upload_result_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd8/classBlobUploadManager.html#ab28da64518c66f2594e3c10ecd6fbceb">blob_upload_task</a> (const px::string &amp;upload_oob_tag, const px::proto::IotBlobUpload &amp;blob_upld_req)</td></tr>
<tr class="memdesc:ab28da64518c66f2594e3c10ecd6fbceb"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is the task that does the blob upload.  <a href="#ab28da64518c66f2594e3c10ecd6fbceb">More...</a><br/></td></tr>
<tr class="separator:ab28da64518c66f2594e3c10ecd6fbceb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:ab4e78ce3c4e0fbcda95fd9956c9f0e9c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd8/classBlobUploadManager.html#ab4e78ce3c4e0fbcda95fd9956c9f0e9c">read_upload_file</a> (std::string &amp;filepath, void *&amp;file_buf, size_t &amp;file_size, std::string &amp;text)</td></tr>
<tr class="memdesc:ab4e78ce3c4e0fbcda95fd9956c9f0e9c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to read the contents of the file to be uploaded.  <a href="#ab4e78ce3c4e0fbcda95fd9956c9f0e9c">More...</a><br/></td></tr>
<tr class="separator:ab4e78ce3c4e0fbcda95fd9956c9f0e9c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaac64b7603394c6b94ecaa1056fec9fb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd8/classBlobUploadManager.html#aaac64b7603394c6b94ecaa1056fec9fb">handle_blob_upload_resp</a> (const px::string &amp;upload_oob_tag, enum px::proto::IotBlobUploadErrorEnums thread_result, const std::string result_msg)</td></tr>
<tr class="memdesc:aaac64b7603394c6b94ecaa1056fec9fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle the response/status update to be sent to the application via the OOB.  <a href="#aaac64b7603394c6b94ecaa1056fec9fb">More...</a><br/></td></tr>
<tr class="separator:aaac64b7603394c6b94ecaa1056fec9fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a6a876cc2b1414dc96633dd4e7eb9ca9d"><td class="memItemLeft" align="right" valign="top">std::shared_ptr&lt; <a class="el" href="../../db/d77/classCIotAgentCore.html">CIotAgentCore</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd8/classBlobUploadManager.html#a6a876cc2b1414dc96633dd4e7eb9ca9d">_iot_core</a></td></tr>
<tr class="memdesc:a6a876cc2b1414dc96633dd4e7eb9ca9d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy of the Core class, which gives us access to the OOB handler and CDS handler, as well as the DeviceClient which holds the map of Devices we support.  <a href="#a6a876cc2b1414dc96633dd4e7eb9ca9d">More...</a><br/></td></tr>
<tr class="separator:a6a876cc2b1414dc96633dd4e7eb9ca9d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92448938ebddbdef4fa1d61e7c4310a0"><td class="memItemLeft" align="right" valign="top">std::future&lt; <a class="el" href="../../d4/dd8/classBlobUploadManager.html#aa8974922762389dbd0e39352512c3cbb">blob_upload_result_t</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd8/classBlobUploadManager.html#a92448938ebddbdef4fa1d61e7c4310a0">blob_upload_future_result</a></td></tr>
<tr class="memdesc:a92448938ebddbdef4fa1d61e7c4310a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">The future that our thread will provide on exit.  <a href="#a92448938ebddbdef4fa1d61e7c4310a0">More...</a><br/></td></tr>
<tr class="separator:a92448938ebddbdef4fa1d61e7c4310a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add92cfe4bed567e04166e9d39e015e24"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd8/classBlobUploadManager.html#add92cfe4bed567e04166e9d39e015e24">want_thread_stop</a></td></tr>
<tr class="memdesc:add92cfe4bed567e04166e9d39e015e24"><td class="mdescLeft">&#160;</td><td class="mdescRight">The flag that tells our blob upload task to stop and exit the thread.  <a href="#add92cfe4bed567e04166e9d39e015e24">More...</a><br/></td></tr>
<tr class="separator:add92cfe4bed567e04166e9d39e015e24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeac2cd2da16946decfbbe6d3500ae4bf"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd8/classBlobUploadManager.html#aeac2cd2da16946decfbbe6d3500ae4bf">blob_upload_thread_is_launched</a></td></tr>
<tr class="memdesc:aeac2cd2da16946decfbbe6d3500ae4bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">The flag that indicates that the blob upload thread was launched (but could be done).  <a href="#aeac2cd2da16946decfbbe6d3500ae4bf">More...</a><br/></td></tr>
<tr class="separator:aeac2cd2da16946decfbbe6d3500ae4bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af79ce5c4cd39ba6c8203afa07b146bd3"><td class="memItemLeft" align="right" valign="top">std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/dd8/classBlobUploadManager.html#af79ce5c4cd39ba6c8203afa07b146bd3">pending_upload_list_lock</a></td></tr>
<tr class="memdesc:af79ce5c4cd39ba6c8203afa07b146bd3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lock object for the pending blob upload global list to be used while copying the contents to another local upload list.  <a href="#af79ce5c4cd39ba6c8203afa07b146bd3">More...</a><br/></td></tr>
<tr class="separator:af79ce5c4cd39ba6c8203afa07b146bd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class to manage Blob uploads, handling the requests and response through OOB/. </p>

<p>Definition at line <a class="el" href="../../d7/d64/blob__upload__manager_8hpp_source.html#l00019">19</a> of file <a class="el" href="../../d7/d64/blob__upload__manager_8hpp_source.html">blob_upload_manager.hpp</a>.</p>
</div><h2 class="groupheader">Member Typedef Documentation</h2>
<a class="anchor" id="aa8974922762389dbd0e39352512c3cbb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::pair&lt;enum px::proto::IotBlobUploadErrorEnums, std::string&gt; <a class="el" href="../../d4/dd8/classBlobUploadManager.html#aa8974922762389dbd0e39352512c3cbb">BlobUploadManager::blob_upload_result_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type for blob upload thread results: results in enum and human-readable text string. </p>
<p>The text must be statically allocated so it persists, since the main process function will not free it but does need to have it as persistent storage. </p>

<p>Definition at line <a class="el" href="../../d7/d64/blob__upload__manager_8hpp_source.html#l00031">31</a> of file <a class="el" href="../../d7/d64/blob__upload__manager_8hpp_source.html">blob_upload_manager.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a253395e21785c30f3e73e6e5afd11b62"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BlobUploadManager::BlobUploadManager </td>
          <td>(</td>
          <td class="paramtype">std::shared_ptr&lt; <a class="el" href="../../db/d77/classCIotAgentCore.html">CIotAgentCore</a> &gt;&#160;</td>
          <td class="paramname"><em>iot_core</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">iot_core</td><td>The "core" class that manages the ASIO stages and also gives us access to the <a class="el" href="../../dd/d68/classCIotDeviceClient.html" title="Actor that creates a Client IoT Device client and manages its connection to the Azure IoT Hub...">CIotDeviceClient</a>. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d4/de1/blob__upload__manager_8cpp_source.html#l00024">24</a> of file <a class="el" href="../../d4/de1/blob__upload__manager_8cpp_source.html">blob_upload_manager.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/dd8/classBlobUploadManager_a253395e21785c30f3e73e6e5afd11b62_cgraph.png" border="0" usemap="#d4/dd8/classBlobUploadManager_a253395e21785c30f3e73e6e5afd11b62_cgraph" alt=""/></div>
<map name="d4/dd8/classBlobUploadManager_a253395e21785c30f3e73e6e5afd11b62_cgraph" id="d4/dd8/classBlobUploadManager_a253395e21785c30f3e73e6e5afd11b62_cgraph">
<area shape="rect" id="node2" href="../../d4/dd8/classBlobUploadManager.html#a611ea39e19532e6ed6cc855303f046ad" title="Handle the blob upload request and launch that blob upload thread. " alt="" coords="217,5,397,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a6a996dd332a1fa7cbe35667cd072dddf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">BlobUploadManager::~BlobUploadManager </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Default Xtor. </p>

<p>Definition at line <a class="el" href="../../d4/de1/blob__upload__manager_8cpp_source.html#l00042">42</a> of file <a class="el" href="../../d4/de1/blob__upload__manager_8cpp_source.html">blob_upload_manager.cpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a611ea39e19532e6ed6cc855303f046ad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BlobUploadManager::handle_blob_upload_req </td>
          <td>(</td>
          <td class="paramtype">const px::proto::toolkitStruct &amp;&#160;</td>
          <td class="paramname"><em>oob_data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handle the blob upload request and launch that blob upload thread. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">upload_oob_tag</td><td>IotBlobUpload file specific tag </td></tr>
    <tr><td class="paramname">blob_upld_req</td><td>The IotBLobUpload/xxx OOB data for processing the blobl upload request. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d4/de1/blob__upload__manager_8cpp_source.html#l00172">172</a> of file <a class="el" href="../../d4/de1/blob__upload__manager_8cpp_source.html">blob_upload_manager.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/dd8/classBlobUploadManager_a611ea39e19532e6ed6cc855303f046ad_icgraph.png" border="0" usemap="#d4/dd8/classBlobUploadManager_a611ea39e19532e6ed6cc855303f046ad_icgraph" alt=""/></div>
<map name="d4/dd8/classBlobUploadManager_a611ea39e19532e6ed6cc855303f046ad_icgraph" id="d4/dd8/classBlobUploadManager_a611ea39e19532e6ed6cc855303f046ad_icgraph">
<area shape="rect" id="node2" href="../../d4/dd8/classBlobUploadManager.html#a253395e21785c30f3e73e6e5afd11b62" title="Constructor. " alt="" coords="235,5,397,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aa7e833a162791d802ca935108e8b6df9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BlobUploadManager::init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the blob upload manager with the catchup of pending blob uploads if any due to interruption in the previous attempt. </p>

<p>Definition at line <a class="el" href="../../d4/de1/blob__upload__manager_8cpp_source.html#l00050">50</a> of file <a class="el" href="../../d4/de1/blob__upload__manager_8cpp_source.html">blob_upload_manager.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/dd8/classBlobUploadManager_aa7e833a162791d802ca935108e8b6df9_cgraph.png" border="0" usemap="#d4/dd8/classBlobUploadManager_aa7e833a162791d802ca935108e8b6df9_cgraph" alt=""/></div>
<map name="d4/dd8/classBlobUploadManager_aa7e833a162791d802ca935108e8b6df9_cgraph" id="d4/dd8/classBlobUploadManager_aa7e833a162791d802ca935108e8b6df9_cgraph">
<area shape="rect" id="node2" href="../../d4/dd8/classBlobUploadManager.html#a2fb71393c8eb30b47686d3666ff89548" title="Carry out the catchup for blob uploads Go through the OOBs present on the device for blob uploads and..." alt="" coords="238,5,399,46"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/dd8/classBlobUploadManager_aa7e833a162791d802ca935108e8b6df9_icgraph.png" border="0" usemap="#d4/dd8/classBlobUploadManager_aa7e833a162791d802ca935108e8b6df9_icgraph" alt=""/></div>
<map name="d4/dd8/classBlobUploadManager_aa7e833a162791d802ca935108e8b6df9_icgraph" id="d4/dd8/classBlobUploadManager_aa7e833a162791d802ca935108e8b6df9_icgraph">
<area shape="rect" id="node2" href="../../dd/d68/classCIotDeviceClient.html#adb2e4268d80323e508cc574786893dd4" title="Execute tasks necessary now that we have achieved a connection. " alt="" coords="238,23,389,65"/><area shape="rect" id="node3" href="../../dd/d68/classCIotDeviceClient.html#ab49100be4e2dc5ef53115fbdafb55f94" title="Determines the current connection status via the Eaton Device SDK. " alt="" coords="438,23,615,65"/><area shape="rect" id="node4" href="../../dd/d68/classCIotDeviceClient.html#ac088663bab4b0ddec2c4c60bbc605166" title="Attempt to open the Azure IoT Hub connection. " alt="" coords="665,5,855,32"/><area shape="rect" id="node5" href="../../dd/d68/classCIotDeviceClient.html#ac3e59938659409ee0adee10292047aca" title="Called by the core&#39;s update timer to manage next state / action. " alt="" coords="905,23,1087,65"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a2fb71393c8eb30b47686d3666ff89548"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BlobUploadManager::catchup_blobs </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Carry out the catchup for blob uploads Go through the OOBs present on the device for blob uploads and add the pending ones to the blob upload list when IoT agent starts. </p>

<p>Definition at line <a class="el" href="../../d4/de1/blob__upload__manager_8cpp_source.html#l00067">67</a> of file <a class="el" href="../../d4/de1/blob__upload__manager_8cpp_source.html">blob_upload_manager.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/dd8/classBlobUploadManager_a2fb71393c8eb30b47686d3666ff89548_icgraph.png" border="0" usemap="#d4/dd8/classBlobUploadManager_a2fb71393c8eb30b47686d3666ff89548_icgraph" alt=""/></div>
<map name="d4/dd8/classBlobUploadManager_a2fb71393c8eb30b47686d3666ff89548_icgraph" id="d4/dd8/classBlobUploadManager_a2fb71393c8eb30b47686d3666ff89548_icgraph">
<area shape="rect" id="node2" href="../../d4/dd8/classBlobUploadManager.html#aa7e833a162791d802ca935108e8b6df9" title="Initialize the blob upload manager with the catchup of pending blob uploads if any due to interruptio..." alt="" coords="217,31,399,57"/><area shape="rect" id="node3" href="../../dd/d68/classCIotDeviceClient.html#adb2e4268d80323e508cc574786893dd4" title="Execute tasks necessary now that we have achieved a connection. " alt="" coords="449,23,599,65"/><area shape="rect" id="node4" href="../../dd/d68/classCIotDeviceClient.html#ab49100be4e2dc5ef53115fbdafb55f94" title="Determines the current connection status via the Eaton Device SDK. " alt="" coords="649,23,826,65"/><area shape="rect" id="node5" href="../../dd/d68/classCIotDeviceClient.html#ac088663bab4b0ddec2c4c60bbc605166" title="Attempt to open the Azure IoT Hub connection. " alt="" coords="875,5,1066,32"/><area shape="rect" id="node6" href="../../dd/d68/classCIotDeviceClient.html#ac3e59938659409ee0adee10292047aca" title="Called by the core&#39;s update timer to manage next state / action. " alt="" coords="1115,23,1298,65"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a725e245abeb217c46613575590c2e18a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BlobUploadManager::execute_blob_upload </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Execute the blob upload operation by launching a thread for all the pending blob uploads. </p>

<p>Definition at line <a class="el" href="../../d4/de1/blob__upload__manager_8cpp_source.html#l00109">109</a> of file <a class="el" href="../../d4/de1/blob__upload__manager_8cpp_source.html">blob_upload_manager.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/dd8/classBlobUploadManager_a725e245abeb217c46613575590c2e18a_cgraph.png" border="0" usemap="#d4/dd8/classBlobUploadManager_a725e245abeb217c46613575590c2e18a_cgraph" alt=""/></div>
<map name="d4/dd8/classBlobUploadManager_a725e245abeb217c46613575590c2e18a_cgraph" id="d4/dd8/classBlobUploadManager_a725e245abeb217c46613575590c2e18a_cgraph">
<area shape="rect" id="node2" href="../../d3/dbd/group__iot__threading.html#ga6bde31c4e391be69e5ea63950f5f6089" title="Launches the thread that does the blob upload operations. " alt="" coords="216,5,416,46"/><area shape="rect" id="node5" href="../../d4/dd8/classBlobUploadManager.html#aad4ca922ec163d493621767f1b75b61d" title="Getter for the blob_upload_thread_is_launched flag. " alt="" coords="232,71,400,127"/><area shape="rect" id="node6" href="../../d4/dd8/classBlobUploadManager.html#afaa509709143d8f6541b5299f25710ef" title="Get the results of the blob upload thread, once it is done executing. " alt="" coords="235,151,397,193"/><area shape="rect" id="node8" href="../../d4/dd8/classBlobUploadManager.html#aaac64b7603394c6b94ecaa1056fec9fb" title="Handle the response/status update to be sent to the application via the OOB. " alt="" coords="223,217,409,258"/><area shape="rect" id="node3" href="../../d4/dd8/classBlobUploadManager.html#ab28da64518c66f2594e3c10ecd6fbceb" title="This is the task that does the blob upload. " alt="" coords="465,5,626,46"/><area shape="rect" id="node4" href="../../d4/dd8/classBlobUploadManager.html#ab4e78ce3c4e0fbcda95fd9956c9f0e9c" title="Function to read the contents of the file to be uploaded. " alt="" coords="675,5,837,46"/><area shape="rect" id="node7" href="../../d4/dd8/classBlobUploadManager.html#ab1f2661900480aa5af5b6efae516d159" title="Utility to check to see if the blob upload task (thread) is done. " alt="" coords="465,151,626,193"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/dd8/classBlobUploadManager_a725e245abeb217c46613575590c2e18a_icgraph.png" border="0" usemap="#d4/dd8/classBlobUploadManager_a725e245abeb217c46613575590c2e18a_icgraph" alt=""/></div>
<map name="d4/dd8/classBlobUploadManager_a725e245abeb217c46613575590c2e18a_icgraph" id="d4/dd8/classBlobUploadManager_a725e245abeb217c46613575590c2e18a_icgraph">
<area shape="rect" id="node2" href="../../dd/d68/classCIotDeviceClient.html#ac3e59938659409ee0adee10292047aca" title="Called by the core&#39;s update timer to manage next state / action. " alt="" coords="217,5,399,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab1f2661900480aa5af5b6efae516d159"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BlobUploadManager::check_is_done </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Utility to check to see if the blob upload task (thread) is done. </p>
<p>You should not call <a class="el" href="../../d4/dd8/classBlobUploadManager.html#afaa509709143d8f6541b5299f25710ef" title="Get the results of the blob upload thread, once it is done executing. ">get_results()</a> until this returns True, or your main thread will stop and wait on this thread being done.</p>
<dl class="section return"><dt>Returns</dt><dd>True when done, else False. </dd></dl>

<p>Definition at line <a class="el" href="../../d4/de1/blob__upload__manager_8cpp_source.html#l00267">267</a> of file <a class="el" href="../../d4/de1/blob__upload__manager_8cpp_source.html">blob_upload_manager.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/dd8/classBlobUploadManager_ab1f2661900480aa5af5b6efae516d159_icgraph.png" border="0" usemap="#d4/dd8/classBlobUploadManager_ab1f2661900480aa5af5b6efae516d159_icgraph" alt=""/></div>
<map name="d4/dd8/classBlobUploadManager_ab1f2661900480aa5af5b6efae516d159_icgraph" id="d4/dd8/classBlobUploadManager_ab1f2661900480aa5af5b6efae516d159_icgraph">
<area shape="rect" id="node2" href="../../d4/dd8/classBlobUploadManager.html#afaa509709143d8f6541b5299f25710ef" title="Get the results of the blob upload thread, once it is done executing. " alt="" coords="217,5,378,46"/><area shape="rect" id="node3" href="../../d4/dd8/classBlobUploadManager.html#a725e245abeb217c46613575590c2e18a" title="Execute the blob upload operation by launching a thread for all the pending blob uploads. " alt="" coords="427,5,589,46"/><area shape="rect" id="node4" href="../../dd/d68/classCIotDeviceClient.html#ac3e59938659409ee0adee10292047aca" title="Called by the core&#39;s update timer to manage next state / action. " alt="" coords="638,5,821,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="afaa509709143d8f6541b5299f25710ef"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/dd8/classBlobUploadManager.html#aa8974922762389dbd0e39352512c3cbb">BlobUploadManager::blob_upload_result_t</a> BlobUploadManager::get_results </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the results of the blob upload thread, once it is done executing. </p>
<p>Use <a class="el" href="../../d4/dd8/classBlobUploadManager.html#ab1f2661900480aa5af5b6efae516d159" title="Utility to check to see if the blob upload task (thread) is done. ">check_is_done()</a> first to ensure that the thread has completed, or this call will make the calling thread wait on this thread's completion.</p>
<dl class="section return"><dt>Returns</dt><dd>Pair containing one of the px::proto::IotBlobUploadErrorEnums enums and a human-readable results message. </dd></dl>

<p>Definition at line <a class="el" href="../../d4/de1/blob__upload__manager_8cpp_source.html#l00297">297</a> of file <a class="el" href="../../d4/de1/blob__upload__manager_8cpp_source.html">blob_upload_manager.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/dd8/classBlobUploadManager_afaa509709143d8f6541b5299f25710ef_cgraph.png" border="0" usemap="#d4/dd8/classBlobUploadManager_afaa509709143d8f6541b5299f25710ef_cgraph" alt=""/></div>
<map name="d4/dd8/classBlobUploadManager_afaa509709143d8f6541b5299f25710ef_cgraph" id="d4/dd8/classBlobUploadManager_afaa509709143d8f6541b5299f25710ef_cgraph">
<area shape="rect" id="node2" href="../../d4/dd8/classBlobUploadManager.html#ab1f2661900480aa5af5b6efae516d159" title="Utility to check to see if the blob upload task (thread) is done. " alt="" coords="217,5,378,46"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/dd8/classBlobUploadManager_afaa509709143d8f6541b5299f25710ef_icgraph.png" border="0" usemap="#d4/dd8/classBlobUploadManager_afaa509709143d8f6541b5299f25710ef_icgraph" alt=""/></div>
<map name="d4/dd8/classBlobUploadManager_afaa509709143d8f6541b5299f25710ef_icgraph" id="d4/dd8/classBlobUploadManager_afaa509709143d8f6541b5299f25710ef_icgraph">
<area shape="rect" id="node2" href="../../d4/dd8/classBlobUploadManager.html#a725e245abeb217c46613575590c2e18a" title="Execute the blob upload operation by launching a thread for all the pending blob uploads. " alt="" coords="217,5,378,46"/><area shape="rect" id="node3" href="../../dd/d68/classCIotDeviceClient.html#ac3e59938659409ee0adee10292047aca" title="Called by the core&#39;s update timer to manage next state / action. " alt="" coords="427,5,610,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a9764e96da86d3edf8a1292a42ef88462"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void BlobUploadManager::request_thread_stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Utility that lets the calling application request the running blob upload thread to stop. </p>
<p>No guarantee of success, and no timeout included here - just best effort. Normally this would only be called on shutdown. The application can then use <a class="el" href="../../d4/dd8/classBlobUploadManager.html#ab1f2661900480aa5af5b6efae516d159" title="Utility to check to see if the blob upload task (thread) is done. ">check_is_done()</a> to see if the thread exited, or wait on <a class="el" href="../../d4/dd8/classBlobUploadManager.html#afaa509709143d8f6541b5299f25710ef" title="Get the results of the blob upload thread, once it is done executing. ">get_results()</a> if it is willing to wait. </p>

<p>Definition at line <a class="el" href="../../d4/de1/blob__upload__manager_8cpp_source.html#l00324">324</a> of file <a class="el" href="../../d4/de1/blob__upload__manager_8cpp_source.html">blob_upload_manager.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/dd8/classBlobUploadManager_a9764e96da86d3edf8a1292a42ef88462_icgraph.png" border="0" usemap="#d4/dd8/classBlobUploadManager_a9764e96da86d3edf8a1292a42ef88462_icgraph" alt=""/></div>
<map name="d4/dd8/classBlobUploadManager_a9764e96da86d3edf8a1292a42ef88462_icgraph" id="d4/dd8/classBlobUploadManager_a9764e96da86d3edf8a1292a42ef88462_icgraph">
<area shape="rect" id="node2" href="../../dd/d68/classCIotDeviceClient.html#a0c9200d4e190ae553db7246c36f939d3" title="Default Xtor. " alt="" coords="217,5,359,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aad4ca922ec163d493621767f1b75b61d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool BlobUploadManager::is_blob_upload_thread_launched </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Getter for the blob_upload_thread_is_launched flag. </p>
<dl class="section return"><dt>Returns</dt><dd>True if theblob upload thread was launched (but could be done); False if it hasn't been launched or if we recognized that it was completed. </dd></dl>

<p>Definition at line <a class="el" href="../../d7/d64/blob__upload__manager_8hpp_source.html#l00193">193</a> of file <a class="el" href="../../d7/d64/blob__upload__manager_8hpp_source.html">blob_upload_manager.hpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/dd8/classBlobUploadManager_aad4ca922ec163d493621767f1b75b61d_icgraph.png" border="0" usemap="#d4/dd8/classBlobUploadManager_aad4ca922ec163d493621767f1b75b61d_icgraph" alt=""/></div>
<map name="d4/dd8/classBlobUploadManager_aad4ca922ec163d493621767f1b75b61d_icgraph" id="d4/dd8/classBlobUploadManager_aad4ca922ec163d493621767f1b75b61d_icgraph">
<area shape="rect" id="node2" href="../../d4/dd8/classBlobUploadManager.html#a725e245abeb217c46613575590c2e18a" title="Execute the blob upload operation by launching a thread for all the pending blob uploads. " alt="" coords="222,13,383,54"/><area shape="rect" id="node3" href="../../dd/d68/classCIotDeviceClient.html#ac3e59938659409ee0adee10292047aca" title="Called by the core&#39;s update timer to manage next state / action. " alt="" coords="433,13,615,54"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab28da64518c66f2594e3c10ecd6fbceb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d4/dd8/classBlobUploadManager.html#aa8974922762389dbd0e39352512c3cbb">BlobUploadManager::blob_upload_result_t</a> BlobUploadManager::blob_upload_task </td>
          <td>(</td>
          <td class="paramtype">const px::string &amp;&#160;</td>
          <td class="paramname"><em>upload_oob_tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const px::proto::IotBlobUpload &amp;&#160;</td>
          <td class="paramname"><em>blob_upld_req</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>This is the task that does the blob upload. </p>
<p><a class="el" href="../../d3/dbd/group__iot__threading.html#ga6bde31c4e391be69e5ea63950f5f6089" title="Launches the thread that does the blob upload operations. ">launch_blob_upload_thread()</a> will run this task in a separate thread. Eventually returns a result code, and a string with a useful message.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">upload_oob_tag</td><td>IotBlobUpload file specific tag </td></tr>
    <tr><td class="paramname">blob_upld_req</td><td>IotBlobUpload OOB structure pertaining to a particular file being uploaded </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pair containing one of the px::proto::IotBlobUploadErrorEnums enums and a human-readable results message. </dd></dl>

<p>Definition at line <a class="el" href="../../d4/de1/blob__upload__manager_8cpp_source.html#l00341">341</a> of file <a class="el" href="../../d4/de1/blob__upload__manager_8cpp_source.html">blob_upload_manager.cpp</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/dd8/classBlobUploadManager_ab28da64518c66f2594e3c10ecd6fbceb_cgraph.png" border="0" usemap="#d4/dd8/classBlobUploadManager_ab28da64518c66f2594e3c10ecd6fbceb_cgraph" alt=""/></div>
<map name="d4/dd8/classBlobUploadManager_ab28da64518c66f2594e3c10ecd6fbceb_cgraph" id="d4/dd8/classBlobUploadManager_ab28da64518c66f2594e3c10ecd6fbceb_cgraph">
<area shape="rect" id="node2" href="../../d4/dd8/classBlobUploadManager.html#ab4e78ce3c4e0fbcda95fd9956c9f0e9c" title="Function to read the contents of the file to be uploaded. " alt="" coords="217,5,378,46"/></map>
</div>
</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/dd8/classBlobUploadManager_ab28da64518c66f2594e3c10ecd6fbceb_icgraph.png" border="0" usemap="#d4/dd8/classBlobUploadManager_ab28da64518c66f2594e3c10ecd6fbceb_icgraph" alt=""/></div>
<map name="d4/dd8/classBlobUploadManager_ab28da64518c66f2594e3c10ecd6fbceb_icgraph" id="d4/dd8/classBlobUploadManager_ab28da64518c66f2594e3c10ecd6fbceb_icgraph">
<area shape="rect" id="node2" href="../../d3/dbd/group__iot__threading.html#ga6bde31c4e391be69e5ea63950f5f6089" title="Launches the thread that does the blob upload operations. " alt="" coords="216,5,416,46"/><area shape="rect" id="node3" href="../../d4/dd8/classBlobUploadManager.html#a725e245abeb217c46613575590c2e18a" title="Execute the blob upload operation by launching a thread for all the pending blob uploads. " alt="" coords="465,5,626,46"/><area shape="rect" id="node4" href="../../dd/d68/classCIotDeviceClient.html#ac3e59938659409ee0adee10292047aca" title="Called by the core&#39;s update timer to manage next state / action. " alt="" coords="675,5,858,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ab4e78ce3c4e0fbcda95fd9956c9f0e9c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool BlobUploadManager::read_upload_file </td>
          <td>(</td>
          <td class="paramtype">std::string &amp;&#160;</td>
          <td class="paramname"><em>filepath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&amp;&#160;</td>
          <td class="paramname"><em>file_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t &amp;&#160;</td>
          <td class="paramname"><em>file_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string &amp;&#160;</td>
          <td class="paramname"><em>text</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Function to read the contents of the file to be uploaded. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filepath</td><td>Relative path of the file provided by the user </td></tr>
    <tr><td class="paramname">file_buf</td><td>Buffer to hold the contents of the file </td></tr>
    <tr><td class="paramname">file_size</td><td>Size of the file </td></tr>
    <tr><td class="paramname">text</td><td>Error codes in string format if any during file operations </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True if success, false in case of failures </dd></dl>

<p>Definition at line <a class="el" href="../../d4/de1/blob__upload__manager_8cpp_source.html#l00550">550</a> of file <a class="el" href="../../d4/de1/blob__upload__manager_8cpp_source.html">blob_upload_manager.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/dd8/classBlobUploadManager_ab4e78ce3c4e0fbcda95fd9956c9f0e9c_icgraph.png" border="0" usemap="#d4/dd8/classBlobUploadManager_ab4e78ce3c4e0fbcda95fd9956c9f0e9c_icgraph" alt=""/></div>
<map name="d4/dd8/classBlobUploadManager_ab4e78ce3c4e0fbcda95fd9956c9f0e9c_icgraph" id="d4/dd8/classBlobUploadManager_ab4e78ce3c4e0fbcda95fd9956c9f0e9c_icgraph">
<area shape="rect" id="node2" href="../../d4/dd8/classBlobUploadManager.html#ab28da64518c66f2594e3c10ecd6fbceb" title="This is the task that does the blob upload. " alt="" coords="217,5,378,46"/><area shape="rect" id="node3" href="../../d3/dbd/group__iot__threading.html#ga6bde31c4e391be69e5ea63950f5f6089" title="Launches the thread that does the blob upload operations. " alt="" coords="427,5,627,46"/><area shape="rect" id="node4" href="../../d4/dd8/classBlobUploadManager.html#a725e245abeb217c46613575590c2e18a" title="Execute the blob upload operation by launching a thread for all the pending blob uploads. " alt="" coords="675,5,837,46"/><area shape="rect" id="node5" href="../../dd/d68/classCIotDeviceClient.html#ac3e59938659409ee0adee10292047aca" title="Called by the core&#39;s update timer to manage next state / action. " alt="" coords="886,5,1069,46"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="aaac64b7603394c6b94ecaa1056fec9fb"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void BlobUploadManager::handle_blob_upload_resp </td>
          <td>(</td>
          <td class="paramtype">const px::string &amp;&#160;</td>
          <td class="paramname"><em>upload_oob_tag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum px::proto::IotBlobUploadErrorEnums&#160;</td>
          <td class="paramname"><em>thread_result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string&#160;</td>
          <td class="paramname"><em>result_msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle the response/status update to be sent to the application via the OOB. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">upload_oob_tag</td><td>IotBlobUpload file specific tag </td></tr>
    <tr><td class="paramname">blob_upld_req</td><td>IotBlobUpload OOB structure pertaining to a particular file being uploaded </td></tr>
    <tr><td class="paramname">thread_result</td><td>Results of the blob upload thread </td></tr>
    <tr><td class="paramname">result_msg</td><td>Result message for the blob upload operation </td></tr>
    <tr><td class="paramname">blob_path</td><td>Blob path supplied to Eaton SDK </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="../../d4/de1/blob__upload__manager_8cpp_source.html#l00204">204</a> of file <a class="el" href="../../d4/de1/blob__upload__manager_8cpp_source.html">blob_upload_manager.cpp</a>.</p>

<p><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="../../d4/dd8/classBlobUploadManager_aaac64b7603394c6b94ecaa1056fec9fb_icgraph.png" border="0" usemap="#d4/dd8/classBlobUploadManager_aaac64b7603394c6b94ecaa1056fec9fb_icgraph" alt=""/></div>
<map name="d4/dd8/classBlobUploadManager_aaac64b7603394c6b94ecaa1056fec9fb_icgraph" id="d4/dd8/classBlobUploadManager_aaac64b7603394c6b94ecaa1056fec9fb_icgraph">
<area shape="rect" id="node2" href="../../d4/dd8/classBlobUploadManager.html#a725e245abeb217c46613575590c2e18a" title="Execute the blob upload operation by launching a thread for all the pending blob uploads. " alt="" coords="241,5,402,46"/><area shape="rect" id="node3" href="../../dd/d68/classCIotDeviceClient.html#ac3e59938659409ee0adee10292047aca" title="Called by the core&#39;s update timer to manage next state / action. " alt="" coords="451,5,634,46"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="aef800d56f4fef09efe7f17fc5c29a44b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;px::string, px::proto::IotBlobUpload&gt; BlobUploadManager::_blob_upload_pending_list</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Map to hold the OOBs which are yet to be processed for the blob upload operation Key in the map is the OOB tag Value is the OOB data corresponsing to the tag. </p>

<p>Definition at line <a class="el" href="../../d7/d64/blob__upload__manager_8hpp_source.html#l00129">129</a> of file <a class="el" href="../../d7/d64/blob__upload__manager_8hpp_source.html">blob_upload_manager.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a238050cdc4944018ce7b1b128ee5a12c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">friend BlobUploadManager::CMockIotAgentCore</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="../../d7/d64/blob__upload__manager_8hpp_source.html#l00132">132</a> of file <a class="el" href="../../d7/d64/blob__upload__manager_8hpp_source.html">blob_upload_manager.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a6a876cc2b1414dc96633dd4e7eb9ca9d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::shared_ptr&lt;<a class="el" href="../../db/d77/classCIotAgentCore.html">CIotAgentCore</a>&gt; BlobUploadManager::_iot_core</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Copy of the Core class, which gives us access to the OOB handler and CDS handler, as well as the DeviceClient which holds the map of Devices we support. </p>

<p>Definition at line <a class="el" href="../../d7/d64/blob__upload__manager_8hpp_source.html#l00173">173</a> of file <a class="el" href="../../d7/d64/blob__upload__manager_8hpp_source.html">blob_upload_manager.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="a92448938ebddbdef4fa1d61e7c4310a0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::future&lt;<a class="el" href="../../d4/dd8/classBlobUploadManager.html#aa8974922762389dbd0e39352512c3cbb">blob_upload_result_t</a>&gt; BlobUploadManager::blob_upload_future_result</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The future that our thread will provide on exit. </p>

<p>Definition at line <a class="el" href="../../d7/d64/blob__upload__manager_8hpp_source.html#l00176">176</a> of file <a class="el" href="../../d7/d64/blob__upload__manager_8hpp_source.html">blob_upload_manager.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="add92cfe4bed567e04166e9d39e015e24"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool BlobUploadManager::want_thread_stop</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The flag that tells our blob upload task to stop and exit the thread. </p>

<p>Definition at line <a class="el" href="../../d7/d64/blob__upload__manager_8hpp_source.html#l00179">179</a> of file <a class="el" href="../../d7/d64/blob__upload__manager_8hpp_source.html">blob_upload_manager.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="aeac2cd2da16946decfbbe6d3500ae4bf"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool BlobUploadManager::blob_upload_thread_is_launched</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The flag that indicates that the blob upload thread was launched (but could be done). </p>
<p>If it hasn't been launched, it isn't necessary to check its future to see if completed yet. </p>

<p>Definition at line <a class="el" href="../../d7/d64/blob__upload__manager_8hpp_source.html#l00184">184</a> of file <a class="el" href="../../d7/d64/blob__upload__manager_8hpp_source.html">blob_upload_manager.hpp</a>.</p>

</div>
</div>
<a class="anchor" id="af79ce5c4cd39ba6c8203afa07b146bd3"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex BlobUploadManager::pending_upload_list_lock</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Lock object for the pending blob upload global list to be used while copying the contents to another local upload list. </p>

<p>Definition at line <a class="el" href="../../d7/d64/blob__upload__manager_8hpp_source.html#l00189">189</a> of file <a class="el" href="../../d7/d64/blob__upload__manager_8hpp_source.html">blob_upload_manager.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/src/product-ref1/px-toolkit/etn_source/iot_agent/include/<a class="el" href="../../d7/d64/blob__upload__manager_8hpp_source.html">blob_upload_manager.hpp</a></li>
<li>/src/product-ref1/px-toolkit/etn_source/iot_agent/source/<a class="el" href="../../d4/de1/blob__upload__manager_8cpp_source.html">blob_upload_manager.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d4/dd8/classBlobUploadManager.html">BlobUploadManager</a></li>
    <li class="footer">Generated on Fri May 7 2021 20:26:03 for IoT Agent by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
