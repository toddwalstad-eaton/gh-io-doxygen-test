<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>IoT Agent: /src/product-ref1/px-toolkit/etn_source/iot_agent/docs/iot_built_in_device_commands.md Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../Eaton_Red_Toolbox_Logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">IoT Agent
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('dc/d92/iot__built__in__device__commands_8md.html','../../');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">/src/product-ref1/px-toolkit/etn_source/iot_agent/docs/iot_built_in_device_commands.md</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../dc/d92/iot__built__in__device__commands_8md.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor"># IoT Agent built-in Device Commands {#iot_builtin_cmds}</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;Iot built in device commands is a feature added to the iot_agent to pass and execute various commands over cloud to a px-red device which is connected to cloud.</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;## Device Command Schema</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;Device command sent from the cloud to device:</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;```json</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;{</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;        <span class="stringliteral">&quot;who&quot;</span>: <span class="stringliteral">&quot;&lt;user_uuid&gt;&quot;</span>,               <span class="comment">// Optional. The cloud shall send the command requester&#39;s id.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;        <span class="stringliteral">&quot;id&quot;</span>: <span class="stringliteral">&quot;&lt;command_instance_uuid&gt;&quot;</span>,    <span class="comment">// Required. The command instance uuid. This can be used to track a command&#39;s execution lifecycle.</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;        <span class="stringliteral">&quot;d&quot;</span>: <span class="stringliteral">&quot;&lt;device_uuid&gt;&quot;</span>,               <span class="comment">// Optional. The target device uuid.</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;        <span class="stringliteral">&quot;method&quot;</span>: <span class="stringliteral">&quot;&lt;MethodName&gt;&quot;</span>,           <span class="comment">// Required. Defined by the device profile. Recommended to use Camel case to identify the commands. Only letter</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;                                            <span class="comment">// and digits are allowed. No any other characters shall be allowed, such as spaces or underscores. The first </span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;                                            <span class="comment">// character must be a letter.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;        <span class="stringliteral">&quot;params&quot;</span>: {<span class="stringliteral">&quot;param1&quot;</span>:<span class="stringliteral">&quot;value1&quot;</span>, <span class="stringliteral">&quot;param2&quot;</span>:<span class="stringliteral">&quot;value2&quot;</span>, ...} </div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;                                            <span class="comment">// Optional. A list of input parameters and the values. The actual parameters key value pairs are defined </span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;                                            <span class="comment">// differently for different commands.</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;                                            <span class="comment">// Example: &quot;args&quot; : &quot;-got NETWORK&quot;, &quot;IsHardReset&quot;:&quot;True&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;}</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;```</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;Device command response from the device to the cloud:</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;```json</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;{</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;        <span class="stringliteral">&quot;id&quot;</span>: <span class="stringliteral">&quot;&lt;command_instance_uuid&gt;&quot;</span>,    <span class="comment">// Required. The command instance uuid. Each command shall have one response.</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;        <span class="stringliteral">&quot;status&quot;</span>: &lt;<span class="keywordtype">int</span>&gt;,                    <span class="comment">// Required. See the reference of the HTTP Response Code.</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        <span class="stringliteral">&quot;msg&quot;</span>: <span class="stringliteral">&quot;&lt;string&gt;&quot;</span>,                  <span class="comment">// Required. This field will contain the output parameter values. </span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        <span class="stringliteral">&quot;params&quot;</span>: {<span class="stringliteral">&quot;param1&quot;</span>:<span class="stringliteral">&quot;value1&quot;</span>, <span class="stringliteral">&quot;param2&quot;</span>:<span class="stringliteral">&quot;value2&quot;</span>, ...}  <span class="comment">// Optional. A list of output parameters and the values. The same naming convention for the input params applies.</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;}</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;```</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;The Generic device commands to be sent from the Swagger interfce must be mapped to the PX-Red Commands <span class="keyword">using</span> the schema mentioned at</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;(http:<span class="comment">//cipt0534.nam.ci.root:8090/display/LNXTK/PX+Red+Generic+Device+Commands+Mapping)</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;## How to add your own <span class="keyword">new</span> Generic Device Command support:</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; * Adopter needs to create a mapping json file which will map the adopter <span class="keyword">generic</span> device command schema to the PX-Red schema.</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; * This file should be stored in the adopter repository `rootfs/etc/cds/<span class="keyword">generic</span>/` directory. The file should be named something like **99_adopter_iot_generic_dev_cmds.json**.   </div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160; * When the firmware is built, the file will be placed in the `/etc/cds/<span class="keyword">generic</span>/` directory.</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160; * With <span class="keyword">this</span> json file present on device at correct path, during start up the cds will process <span class="keyword">this</span> json file and update the **IotBuiltInCommands/&lt;product&gt;** oob with all device commands listed in json file. Then authenticated user can send any of these commands from Swagger interface to the device connected to cloud.</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160; * If Adopter wants to add any <span class="keyword">new</span> command during runtime then above steps should be followed and then the device must be rebooted so that the cds will process the mapping json file and update the **IotBuiltInCommands/&lt;product&gt;** oob with the newly added command.</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    </div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    `Note`: Swagger request **method** property must match PX Red **oobs[x].data.generic_table[y].label** property. This is the key to the mapping schema.</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;## How it works:</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160; * When the user sends a command from the swagger interface, the iot agent will look <span class="keywordflow">for</span> the command **method** property in the PX-Red IotBuiltInCommands/&lt;product&gt; OOB **label** field.</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160; * If found, then the the IoT Agent will form the command line <span class="keywordtype">string</span> from the request received and then shell out and execute these commands in a shell, then <span class="keywordflow">return</span> the response line(s) in the <span class="stringliteral">&quot;msg&quot;</span> parameter of the response (Except <span class="keywordflow">for</span> GetField and SetField, which are examples of coded commands.) </div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;### Command Enhancements:</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160; * PX-Red iot_agent enhances the commands by adding arguments like timeout and redirection to know exactly what gets executed.</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;#### Timeout:</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160; * A timeout is added to the commands before sending to shell to <span class="keyword">get</span> a timely response from commands. This is especially required <span class="keywordflow">for</span> commands which run continuously until interrupted. (For example, ping command). </div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; * Current timeout is 10seconds <span class="keywordflow">for</span> all commands.</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;#### Redirection:</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160; * The output redirection *2&gt;&amp;1* is added to the shell command to redirect the stderr output to the stdout so that we <span class="keyword">get</span> the complete output with errors and log messages combined.</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;## Examples showing the Swagger and PX Red Generic Device Command Schemas:</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;### Method: Adopter Specific Generic Command</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;The PX-Red Command Schema <span class="keywordflow">for</span> <span class="keyword">this</span> command to be added in **99_adopter_iot_generic_dev_cmds.json** file will be as below:</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;```json</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;{</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="stringliteral">&quot;px.tk_proto.config.PersistentConfig&quot;</span>: {</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="stringliteral">&quot;oobs&quot;</span>: [{</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <span class="stringliteral">&quot;tag&quot;</span>: <span class="stringliteral">&quot;IotBuiltInCommands/MyThermostat&quot;</span>,</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="stringliteral">&quot;data&quot;</span>: {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            <span class="stringliteral">&quot;label&quot;</span>: <span class="stringliteral">&quot;MyThermostat Device Commands&quot;</span>,</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;            <span class="stringliteral">&quot;generic_table&quot;</span>: [{</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            <span class="stringliteral">&quot;label&quot;</span>: <span class="stringliteral">&quot;SetThermostatTemperatureRange&quot;</span>,</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            <span class="stringliteral">&quot;value&quot;</span>: {</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                <span class="stringliteral">&quot;str_val&quot;</span>: <span class="stringliteral">&quot;/sbin/set_thermo.py -temprange&quot;</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                    }</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                }, {</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                label<span class="stringliteral">&quot;: &quot;</span>GetThermostatTemperatureRange<span class="stringliteral">&quot;,</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="stringliteral">                &quot;</span>value<span class="stringliteral">&quot;: {</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="stringliteral">                    &quot;</span>str_val<span class="stringliteral">&quot;: &quot;</span>/sbin/get_thermo.py -temprange<span class="stringliteral">&quot;</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="stringliteral">                    }</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="stringliteral">                }]</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="stringliteral">            }</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="stringliteral">        }]</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="stringliteral">    }</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="stringliteral">Request Paylod:</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="stringliteral">```json</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="stringliteral">    &quot;</span>method<span class="stringliteral">&quot;: &quot;</span>SetThermostatTemperatureRange<span class="stringliteral">&quot;,</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="stringliteral">    &quot;</span>params<span class="stringliteral">&quot;: {</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="stringliteral">        &quot;</span>args<span class="stringliteral">&quot;: &quot;</span>68 78 Fahrenheit<span class="stringliteral">&quot;</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="stringliteral">    }</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="stringliteral">For this request, the final command that gets parsed and executed by the PX-Red iot_agent will be:      </span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="stringliteral">    timeout -t &lt;timeout&gt; /sbin/set_thermo.py -temprange 68 78 Fahrenheit 2&gt;&amp;1</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="stringliteral">       </span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="stringliteral">### Method: CdsCmd</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="stringliteral">    </span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="stringliteral">PX-Red Command Schema for this command to be added in **99_adopter_iot_generic_dev_cmds.json** file will be as below:</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="stringliteral">```json</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="stringliteral">{ </span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="stringliteral">    &quot;</span>px.tk_proto.config.PersistentConfig<span class="stringliteral">&quot;:{</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="stringliteral">    &quot;</span>oobs<span class="stringliteral">&quot;: [{</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="stringliteral">        &quot;</span>tag<span class="stringliteral">&quot;:&quot;</span>IotBuiltInCommands/MyBBB<span class="stringliteral">&quot;,</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="stringliteral">        &quot;</span>data<span class="stringliteral">&quot;: {</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="stringliteral">            &quot;</span>label<span class="stringliteral">&quot;:&quot;</span>Built In Device Commands <span class="keywordflow">for</span> BBB<span class="stringliteral">&quot;,</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="stringliteral">            &quot;</span>generic_table<span class="stringliteral">&quot;: [{</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="stringliteral">                &quot;</span>label<span class="stringliteral">&quot;:&quot;</span>CdsCmd<span class="stringliteral">&quot;,</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="stringliteral">                &quot;</span>description<span class="stringliteral">&quot;:&quot;</span>Built in support to run cdscmd<span class="stringliteral">&quot;,</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="stringliteral">                &quot;</span>value<span class="stringliteral">&quot;: {</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="stringliteral">                    &quot;</span>str_val<span class="stringliteral">&quot;: &quot;</span>cdscmd<span class="stringliteral">&quot;</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="stringliteral">                    }</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="stringliteral">                }]</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="stringliteral">            }</span></div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="stringliteral">        }]</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="stringliteral">    }</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="stringliteral">Single-line response commands   </span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="stringliteral">Request Payload:</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="stringliteral">```json</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="stringliteral">    &quot;</span>method<span class="stringliteral">&quot;: &quot;</span>CdsCmd<span class="stringliteral">&quot;,</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="stringliteral">    &quot;</span>params<span class="stringliteral">&quot;: {&quot;</span>args<span class="stringliteral">&quot;: &quot;</span>-pp -gdg 1<span class="stringliteral">&quot;}</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="stringliteral">        </span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="stringliteral">For this request, the command that gets parsed and executed by the PX-Red iot_agent will be:        </span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="stringliteral">    timeout -t &lt;timeout&gt; cdscmd -pp -gdg 1 2&gt;&amp;1</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="stringliteral"> Response Payload</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="stringliteral">```json</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="stringliteral">    &quot;</span>status<span class="stringliteral">&quot;:200,</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="stringliteral">    &quot;</span>msg<span class="stringliteral">&quot;:&quot;</span>dde53e79-6685-56a5-b75d-901b2e2925f9<span class="stringliteral">&quot;</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="stringliteral">    </span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="stringliteral">Mutli-line response commands</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="stringliteral">Request Payload:</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="stringliteral">```json</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="stringliteral">    &quot;</span>method<span class="stringliteral">&quot;: &quot;</span>CdsCmd<span class="stringliteral">&quot;,</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="stringliteral">    &quot;</span>params<span class="stringliteral">&quot;: {&quot;</span>args<span class="stringliteral">&quot;: &quot;</span>-pp -gr<span class="stringliteral">&quot;}</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="stringliteral">For this request, the command that gets parsed and executed by the PX-Red iot_agent will be:        </span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="stringliteral">    timeout -t &lt;timeout&gt; cdscmd -pp -gr 2&gt;&amp;1</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="stringliteral">Response Payload</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="stringliteral">```json</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="stringliteral">    &quot;</span>status<span class="stringliteral">&quot;:200,</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="stringliteral">    &quot;</span>msg<span class="stringliteral">&quot;:&quot;</span>admin: data_read,data_write,data_admin,config_read,config_write,config_file,install,troubleshoot,control_basic,control_oper,event_ack,security_admin,security_read,per_userViewer: data_read,per_userIoT Agent: data_read,data_write,data_admin,config_read,config_write,config_file,install,event_ack,security_admin,security_read,per_userOperator: data_read,config_read,control_basic,control_oper,event_ack,per_userService Engineer:data_read,data_admin,config_read,config_write,config_file,install,troubleshoot,control_basic,control_oper,event_ack,per_userEngineer: data_read,data_admin,config_read,config_write,install,control_basic,control_oper,event_ack,per_userSecurity Admin: data_read,security_admin,security_read,per_userSecurity Audit: data_read,security_read,per_user<span class="stringliteral">&quot;</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="stringliteral">Embedded json request commands</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="stringliteral">Request Payload:</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="stringliteral">```json</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="stringliteral">    &quot;</span>method<span class="stringliteral">&quot;: &quot;</span>CdsCmd<span class="stringliteral">&quot;,</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="stringliteral">    &quot;</span>params<span class="stringliteral">&quot;: {&quot;</span>args<span class="stringliteral">&quot;:&quot;</span>-vv -soj DateTime </div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        { \<span class="stringliteral">&quot;toolkitStruct\&quot;:{ \&quot;datetime_settings\&quot;:{ \&quot;ntp_enabled\&quot;:true, \&quot;use_dhcp_ntp_servers\&quot;:false, \&quot;ipv4_ntp_servers\&quot;:[ \&quot;151.110.126.15\&quot;, \&quot;0.pool.ntp.org\&quot;, \&quot;1.pool.ntp.org\&quot;]  }, \&quot;description\&quot;:\&quot;Default NTP settings and UTC timestamp\&quot;} </span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="stringliteral">        }</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="stringliteral">    }</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="stringliteral">* For this request, the command that gets parsed and executed by the PX-Red iot_agent will be:      </span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="stringliteral">    timeout -t &lt;timeout&gt; cdscmd -vv -soj DateTime &#39;{&quot;</span>toolkitStruct<span class="stringliteral">&quot;: {&quot;</span>datetime_settings<span class="stringliteral">&quot;: {&quot;</span>ntp_enabled<span class="stringliteral">&quot;: true,&quot;</span>use_dhcp_ntp_servers<span class="stringliteral">&quot;: false,&quot;</span>ipv4_ntp_servers<span class="stringliteral">&quot;: [&quot;</span>151.110.126.15<span class="stringliteral">&quot;, &quot;</span>0.pool.ntp.org<span class="stringliteral">&quot;, &quot;</span>1.pool.ntp.org<span class="stringliteral">&quot;]},&quot;</span>description<span class="stringliteral">&quot;: &quot;</span>Default NTP settings and UTC timestamp<span class="stringliteral">&quot;}}&#39; 2&gt;&amp;1</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="stringliteral">Response Payload</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="stringliteral">```json</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="stringliteral">    &quot;</span>status<span class="stringliteral">&quot;:200,</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="stringliteral">    &quot;</span>msg<span class="stringliteral">&quot;:&quot;</span>Connecting to CDS... Done!Setting 1 OOB data objects, persist value = paWaiting <span class="keywordflow">for</span> CDS to finish processing our commandsDisconnecting from CDS<span class="stringliteral">&quot;</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="stringliteral">### Method: GetField</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="stringliteral">Example below shows the GetField command to get a field value of an OOB data &quot;</span>IotConnectionStatus<span class="stringliteral">&quot; from CDS.</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="stringliteral">        </span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="stringliteral">PX-Red Command Schema required to be added in **99_adopter_iot_generic_dev_cmds.json** file will be as below:</span></div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="stringliteral">```json     </span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="stringliteral">{ </span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="stringliteral">    &quot;</span>px.tk_proto.config.PersistentConfig<span class="stringliteral">&quot;:{</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="stringliteral">    &quot;</span>oobs<span class="stringliteral">&quot;: [{</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="stringliteral">        &quot;</span>tag<span class="stringliteral">&quot;:&quot;</span>IotBuiltInCommands/MyBBB<span class="stringliteral">&quot;,</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="stringliteral">        &quot;</span>data<span class="stringliteral">&quot;: {</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="stringliteral">            &quot;</span>label<span class="stringliteral">&quot;:&quot;</span>Built In Device Commands <span class="keywordflow">for</span> BBB<span class="stringliteral">&quot;,</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="stringliteral">            &quot;</span>generic_table<span class="stringliteral">&quot;: [{</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="stringliteral">                &quot;</span>label<span class="stringliteral">&quot;:&quot;</span>GetField<span class="stringliteral">&quot;,</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="stringliteral">                &quot;</span>description<span class="stringliteral">&quot;:&quot;</span>Supported built in <span class="keyword">get</span> field device command<span class="stringliteral">&quot;,</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="stringliteral">                &quot;</span>value<span class="stringliteral">&quot;: {</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="stringliteral">                    &quot;</span>str_val<span class="stringliteral">&quot;: &quot;</span><span class="stringliteral">&quot;</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="stringliteral">                    },</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="stringliteral">                &quot;</span>comments<span class="stringliteral">&quot;: &quot;</span>params:<span class="stringliteral">&#39;TagName&#39;</span> must be valid OOB tag, <span class="stringliteral">&#39;Field&#39;</span> must be valid field in the OOB to <span class="keyword">get</span> value <span class="keywordflow">for</span> OOB.<span class="stringliteral">&quot;</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="stringliteral">                }]</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="stringliteral">            }</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="stringliteral">        }]</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="stringliteral">    }</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="stringliteral">Request Payload:</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="stringliteral">```json</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="stringliteral">    &quot;</span>method<span class="stringliteral">&quot;: &quot;</span>GetField<span class="stringliteral">&quot;,</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="stringliteral">    &quot;</span>params<span class="stringliteral">&quot;: {&quot;</span>TagName<span class="stringliteral">&quot;: &quot;</span>IotConnectionStatus<span class="stringliteral">&quot;, &quot;</span>Field<span class="stringliteral">&quot;: &quot;</span>iot_connection_status.traffic_count<span class="stringliteral">&quot;}</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="stringliteral">Response Payload:</span></div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="stringliteral">```json</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="stringliteral">    &quot;</span>status<span class="stringliteral">&quot;: 200,</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="stringliteral">    &quot;</span>msg<span class="stringliteral">&quot;: &quot;</span>217<span class="stringliteral">&quot;</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="stringliteral">### Method: SetField</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="stringliteral">Example below shows the SetField command to set a field value of an OOB data &quot;</span>IotConnectionStatus<span class="stringliteral">&quot; from CDS.</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="stringliteral">        </span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="stringliteral">PX-Red Command Schema required for mapping:</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="stringliteral">```json     </span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="stringliteral">{ </span></div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="stringliteral">    &quot;</span>px.tk_proto.config.PersistentConfig<span class="stringliteral">&quot;:{</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="stringliteral">    &quot;</span>oobs<span class="stringliteral">&quot;: [{</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="stringliteral">        &quot;</span>tag<span class="stringliteral">&quot;:&quot;</span>IotBuiltInCommands/MyBBB<span class="stringliteral">&quot;,</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="stringliteral">        &quot;</span>data<span class="stringliteral">&quot;: {</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="stringliteral">            &quot;</span>label<span class="stringliteral">&quot;:&quot;</span>Built In Device Commands <span class="keywordflow">for</span> BBB<span class="stringliteral">&quot;,</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="stringliteral">            &quot;</span>generic_table<span class="stringliteral">&quot;: [{</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="stringliteral">            &quot;</span>label<span class="stringliteral">&quot;:&quot;</span>SetField<span class="stringliteral">&quot;,</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="stringliteral">            &quot;</span>description<span class="stringliteral">&quot;:&quot;</span>Supported built in set field device command<span class="stringliteral">&quot;,</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="stringliteral">            &quot;</span>value<span class="stringliteral">&quot;: {</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="stringliteral">                &quot;</span>str_val<span class="stringliteral">&quot;: &quot;</span><span class="stringliteral">&quot;</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="stringliteral">                    },</span></div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="stringliteral">                &quot;</span>comments<span class="stringliteral">&quot;: &quot;</span>params:<span class="stringliteral">&#39;TagName&#39;</span> must be valid OOB tag, <span class="stringliteral">&#39;Field&#39;</span> must be valid field in the OOB, <span class="stringliteral">&#39;Value&#39;</span> must be value to set <span class="keywordflow">for</span> OOB.<span class="stringliteral">&quot;</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="stringliteral">                }]</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="stringliteral">            }</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="stringliteral">        }]</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="stringliteral">    }</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="stringliteral">Request Payload:</span></div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="stringliteral">```json</span></div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="stringliteral">    &quot;</span>method<span class="stringliteral">&quot;: &quot;</span>SetField<span class="stringliteral">&quot;,</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="stringliteral">    &quot;</span>params<span class="stringliteral">&quot;: {&quot;</span>TagName<span class="stringliteral">&quot;: &quot;</span>IotConnectionStatus<span class="stringliteral">&quot;, &quot;</span>Field<span class="stringliteral">&quot;: &quot;</span>iot_connection_status.traffic_count<span class="stringliteral">&quot;, &quot;</span>Value<span class="stringliteral">&quot; : &quot;</span>10<span class="stringliteral">&quot;}</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="stringliteral">Response Payload:</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="stringliteral">```json</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="stringliteral">    &quot;</span>status<span class="stringliteral">&quot;: 200,</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="stringliteral">    &quot;</span>msg<span class="stringliteral">&quot;: &quot;</span>OK<span class="stringliteral">&quot;</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="stringliteral">## **CommandScript** type of commands details</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="stringliteral"> </span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="stringliteral"> * Using this command user can run any linux command or program of his choice on the device, but required that the privileges are of **iot_agent** and not root.</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="stringliteral"> * Inclusion of this command for an adopter is potentially dangerous option, as almost any command could be sent to the device leading to harmful threats. Hence it is recommended not to add this command in your release code or shippable products.</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="stringliteral">### Method: CommandScript</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="stringliteral">* Example below shows the CommandScript command to execute a script present on the device to get the alarm information for a particular device.</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="stringliteral">* Here, the param &#39;command&#39; holds the command to be executed, the shell script in this case and the param &#39;args&#39; holds the argument to be passed to the command if any. In this case, we pass the device id for which the alarm information is needed.</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="stringliteral">        </span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="stringliteral">Request Payload:</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="stringliteral">```json</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="stringliteral">    &quot;</span>method<span class="stringliteral">&quot;: &quot;</span>CommandScript<span class="stringliteral">&quot;,</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="stringliteral">    &quot;</span>params<span class="stringliteral">&quot;: {&quot;</span>command<span class="stringliteral">&quot;:&quot;</span>/tmp/DevAlarmInfo.sh<span class="stringliteral">&quot;, &quot;</span>args<span class="stringliteral">&quot;:&quot;</span>1<span class="stringliteral">&quot;}</span></div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="stringliteral">```</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="stringliteral">Response Payload:</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="stringliteral">```json</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="stringliteral">{</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="stringliteral">    &quot;</span>status<span class="stringliteral">&quot;:200,</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="stringliteral">    &quot;</span>msg<span class="stringliteral">&quot;:&quot;</span>{ </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        \<span class="stringliteral">&quot;AlarmUpdate\&quot;:{ \&quot;alarm_id\&quot;:1154, \&quot;sequence_index\&quot;:0, \&quot;update_global_count\&quot;:2309, \&quot;time\&quot;:{ \&quot;sec\&quot;:1538130426, \&quot;nsec\&quot;:289164229 }, \&quot;device_id\&quot;:1, \&quot;channel_id\&quot;:64, \&quot;value\&quot;:{ \&quot;bool_val\&quot;:true, \&quot;str_val\&quot;:\&quot;True\&quot; }, \&quot;realtime_state\&quot;:{ \&quot;disabled\&quot;:false, \&quot;disarmed\&quot;:false, \&quot;not_communicating\&quot;:false, \&quot;pass_through\&quot;:false, \&quot;waveform_available\&quot;:false }, \&quot;latching\&quot;:true, \&quot;alarm_closed\&quot;:false, \&quot;trigger\&quot;:{ \&quot;level\&quot;:1,</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="stringliteral">        \&quot;trigger_type\&quot;:\&quot;ON_VALUE\&quot;, \&quot;threshold\&quot;:{ \&quot;bool_val\&quot;:true }, \&quot;priority\&quot;:5000, \&quot;custom_message\&quot;:\&quot;Persistent data storage is corrupted. Check system log.\&quot; }, \&quot;ack_level\&quot;:0, \&quot;trigger_condition_cleared\&quot;:false, \&quot;first_occur_time\&quot;:{ \&quot;sec\&quot;:1538130426, \&quot;nsec\&quot;:289164229 }, \&quot;max_reached_trigger_level\&quot;:1, \&quot;str_val\&quot;:\&quot;True\&quot; } }</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="stringliteral">        { \&quot;AlarmUpdate\&quot;:{ \&quot;alarm_id\&quot;:1154, \&quot;sequence_index\&quot;:1, \&quot;update_global_count\&quot;:2310, \&quot;time\&quot;:{ \&quot;sec\&quot;:1538130433,</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="stringliteral">        \&quot;nsec\&quot;:154372945 }, \&quot;device_id\&quot;:1, \&quot;channel_id\&quot;:64, \&quot;value\&quot;:{ \&quot;bool_val\&quot;:true, \&quot;str_val\&quot;:\&quot;True\&quot; }, \&quot;realtime_state\&quot;:{ \&quot;disabled\&quot;:false, \&quot;disarmed\&quot;:false, \&quot;not_communicating\&quot;:false, \&quot;pass_through\&quot;:false, \&quot;waveform_available\&quot;:false }, \&quot;latching\&quot;:true, \&quot;alarm_closed\&quot;:false, \&quot;trigger\&quot;:{ \&quot;level\&quot;:1, \&quot;trigger_type\&quot;:\&quot;ON_VALUE\&quot;, \&quot;threshold\&quot;:{ \&quot;bool_val\&quot;:true }, \&quot;priority\&quot;:5000, \&quot;custom_message\&quot;:\&quot;Persistent data storage is corrupted. Check</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="stringliteral">        system log.\&quot; }, \&quot;ack_level\&quot;:1, \&quot;trigger_condition_cleared\&quot;:false, \&quot;first_occur_time\&quot;:{ \&quot;sec\&quot;:1538130426, \&quot;nsec\&quot;:289164229 }, \&quot;max_reached_trigger_level\&quot;:1, \&quot;str_val\&quot;:\&quot;True\&quot; } }</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="stringliteral">        { \&quot;AlarmUpdate\&quot;:{ \&quot;alarm_id\&quot;:1154, \&quot;sequence_index\&quot;:2, \&quot;update_global_count\&quot;:2311, \&quot;time\&quot;:{ \&quot;sec\&quot;:1538130436, \&quot;nsec\&quot;:225537088 }, \&quot;device_id\&quot;:1, \&quot;channel_id\&quot;:64, \&quot;value\&quot;:{ \&quot;bool_val\&quot;:false, \&quot;str_val\&quot;:\&quot;False\&quot; }, \&quot;realtime_state\&quot;:{ \&quot;disabled\&quot;:false, \&quot;disarmed\&quot;:false, \&quot;not_communicating\&quot;:false, \&quot;pass_through\&quot;:false, \&quot;waveform_available\&quot;:false }, \&quot;latching\&quot;:true, \&quot;alarm_closed\&quot;:true, \&quot;trigger\&quot;:{ \&quot;level\&quot;:1, \&quot;trigger_type\&quot;:\&quot;ON_VALUE\&quot;, \&quot;threshold\&quot;:{ \&quot;bool_val\&quot;:true }, \&quot;priority\&quot;:5000, \&quot;custom_message\&quot;:\&quot;Persistent data storage is corrupted. Check system log.\&quot; }, \&quot;ack_level\&quot;:1, \&quot;trigger_condition_cleared\&quot;:true, \&quot;first_occur_time\&quot;:{ \&quot;sec\&quot;:1538130426, \&quot;nsec\&quot;:289164229 },</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="stringliteral">        \&quot;max_reached_trigger_level\&quot;:1, \&quot;str_val\&quot;:\&quot;False\&quot; } }&quot;</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;}</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;```</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="preprocessor">### For more information on generic device commands please refer the links:</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;[R10 Generic Device Commands Design](https:<span class="comment">//confluence-prod.tcc.etn.com/display/IoTPlatform/R10+Generic+Device+Commands+Design)</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;[Device Commands](https:<span class="comment">//confluence-prod.tcc.etn.com/display/IoTPlatform/Device+Command)</span></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dc/d92/iot__built__in__device__commands_8md.html">iot_built_in_device_commands.md</a></li>
    <li class="footer">Generated on Fri May 7 2021 20:26:02 for IoT Agent by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
